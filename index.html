<!DOCTYPE html>
<html>
    <head>
		<meta charset="utf-8">
        <title>Hydropocj</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="verdammt">
        <meta name="keywords" content="lol,wtf">
        <meta name="copyright" content="IN20">
        <link rel="icon" href="img/favicon.ico" type="image/x-icon">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/fontawesome.css">
        <link rel="stylesheet" href="css/dataTables.bootstrap5.min.css">
        <script src="js/bootstrap.bundle.min.js"></script>
        <script src="js/vue.global.prod.js"></script>
        <script src="js/jquery-3.6.0.min.js"></script>
        <script src="js/datatables.min.js"></script>
        <script src="js/dataTables.bootstrap5.min.js"></script>
        <script src="js/chart.min.js"></script>
        <script src="js/chartjs-adapter-date-fns.bundle.min.js"></script>
        <script>
            const app = Vue.createApp({});
            Chart.register("filler");
            const charts = {
                "co2": {},
                "temperature": {},
                "salinity": {},
                "pH": {},
                "waterlevel": {}
            };
            const dataTablesLocalization = {
                sEmptyTable: "Keine Daten vorhanden",
                sInfo: "_START_ bis _END_ von _TOTAL_ Einträgen",
                sInfoEmpty: "0 bis 0 von 0 Einträgen",
                sInfoFiltered: "(gefiltert aus _MAX_ Einträgen)",
                sInfoPostFix: "",
                sInfoThousands: ".",
                sLengthMenu: "_MENU_ Einträge anzeigen",
                sLoadingRecords: "Wird geladen...",
                sProcessing: "Bitte warten...",
                sSearch: "Suchen:",
                sZeroRecords: "Keine Einträge vorhanden.",
                oPaginate: {
                    sFirst: "Erste",
                    sPrevious: "Zurück",
                    sNext: "Nächste",
                    sLast: "Letzte"
                },
                oAria: {
                    sSortAscending: ": aktivieren, um Spalte aufsteigend zu sortieren",
                    sSortDescending: ": aktivieren, um Spalte absteigend zu sortieren"
                }
            }
            function switchAlert(element, type) {
                type = type.toLowerCase();
                element = $("#section-" + element)[0];
                console.log(element);
                if (["danger", "warning", "success"].includes(type) && !Object.values(element.classList).includes(type)) {
                    $(element).removeClass("danger warning success").addClass(type);
                    let icon = $(element).find(".section-header > h3 > i:first-of-type");
                    $(icon).removeClass("fa-exclamation-circle fa-check-circle fa-exclamation-triangle");
                    let section = $(element).attr("id").split("-")[1];
                    switch (type) {
                        case "danger":
                            $(icon).addClass("fa-exclamation-circle");
                            charts[section]["current"]["data"]["datasets"][0]["fill"]["above"] = getGradient(charts[section]["current"]["ctx"], charts[section]["current"]["chartArea"], {0: getCSSVar("--chart-background-danger"), 1: "rgba(255, 255, 255, 0.5)"});
                            charts[section]["current"]["data"]["datasets"][0]["backgroundColor"] = getCSSVar("--chart-background-danger");
                            charts[section]["current"]["data"]["datasets"][0]["borderColor"] = getCSSVar("--chart-border-danger");
                            break;
                        case "warning":
                            $(icon).addClass("fa-exclamation-triangle");
                            charts[section]["current"]["data"]["datasets"][0]["fill"]["above"] = getGradient(charts[section]["current"]["ctx"], charts[section]["current"]["chartArea"], {0: getCSSVar("--chart-background-warning"), 1: "rgba(255, 255, 255, 0.5)"});
                            charts[section]["current"]["data"]["datasets"][0]["backgroundColor"] = getCSSVar("--chart-background-warning");
                            charts[section]["current"]["data"]["datasets"][0]["borderColor"] = getCSSVar("--chart-border-warning");
                            break;
                        case "success":
                            $(icon).addClass("fa-check-circle");
                            charts[section]["current"]["data"]["datasets"][0]["fill"]["above"] = getGradient(charts[section]["current"]["ctx"], charts[section]["current"]["chartArea"], {0: getCSSVar("--chart-background-success"), 1: "rgba(255, 255, 255, 0.5)"});
                            charts[section]["current"]["data"]["datasets"][0]["backgroundColor"] = getCSSVar("--chart-background-success");
                            charts[section]["current"]["data"]["datasets"][0]["borderColor"] = getCSSVar("--chart-border-success");
                            break;
                    }
                }
            }
            function getCSSVar(val) {
                return getComputedStyle($(":root")[0]).getPropertyValue(val);
            }
            function getGradient(context, chartArea, data) {
                let gradient = context.createLinearGradient(0, chartArea.bottom, 0, chartArea.top);
                let steps = Object.getOwnPropertyNames(data);
                for (step of steps) {
                    gradient.addColorStop(step, data[step]);
                }
                return gradient;
            }
            document.addEventListener("DOMContentLoaded", function(event) {
                // Hier alle Skripte ausführen, die auf DOM zugreifen sollen

                // DataTable für Benutzerkonten
                $("#user-actions-accordion").on("shown.bs.collapse", function() {
                    if (!DataTable.isDataTable("#usersTable")) {
                        var usersTable = $("#usersTable").DataTable({
                            order: [1, "asc"],
                            language: dataTablesLocalization,
                            columns: [
                                { name: "fullName", data: "fullName" },
                                { name: "userName", data: "userName" },
                                { name: "creationDate", data: "creationDate" },
                                { name: "status", data: "status" },
                                { name: "actions", data: "actions" },
                            ]/*,
                            columnDefs: [
                                { className: "p-2", targets: [4] }
                            ]
                            ajax: {
                                url: "{{ url('api/people/admin/manageUsers/datatables/facets') }}",
                                type: 'GET',
                                dataSrc: function(response) {
                                    keys = Object.getOwnPropertyNames(response["sections"]);
                                    keys.sort();
                                    $("#group").empty();
                                    for (key of keys) {
                                        $("#group").append("<option value='" + key + "'>" + response["sections"][key] +  "</option>");
                                    }
                                    return response.data;
                                }
                            }*/
                        });
                    }
                });

                // DataTable für Logs
                $("#collapse-logs-actions").on("shown.bs.collapse", function() {
                    if (!DataTable.isDataTable("#logTable")) {
                        var logTable = $("#logTable").DataTable({
                            order: [0, "asc"],
                            language: dataTablesLocalization,
                            columns: [
                                { name: "timestamp", data: "timestamp" },
                                { name: "message", data: "message" }
                            ],
                            columnDefs: [
                                { width: "25%", targets: [0] },
                                { width: "75%", targets: [1] }
                            ]/*,
                            ajax: {
                                url: "{{ url('api/people/admin/manageUsers/datatables/facets') }}",
                                type: 'GET',
                                dataSrc: function(response) {
                                    keys = Object.getOwnPropertyNames(response["sections"]);
                                    keys.sort();
                                    $("#group").empty();
                                    for (key of keys) {
                                        $("#group").append("<option value='" + key + "'>" + response["sections"][key] +  "</option>");
                                    }
                                    return response.data;
                                }
                            }*/
                        });
                    }
                });

                // Verlauf
                let a = new Chart($("#co2-chart-history")[0].getContext("2d"), {
                    options: {
                        scales: {
                            x: {
                                type: "timeseries",
                                time: {
                                    displayFormats: {
                                        second: "HH:mm:ss"
                                    },
                                    unit: "hour",
                                    stepSize: 1 // Innerhalb einer Min. alle 5 Sek. Daten einfügen 
                                }
                            },
                            y: { // defining min and max so hiding the dataset does not change scale range
                                min: 0, // muss individuell für jedes diagrammm festgelegt werden
                                max: 100
                            }
                        },
                        elements: {
                            line: {
                                borderWidth: 1
                            }
                        }
                    },
                    type: "line",
                    data: {
                        datasets: [
                            {
                                label: "Höchster Wert",
                                backgroundColor: "rgba(255, 0, 0, 0.5)",
                                borderColor : "rgb(255, 0, 0, 0.75)",
                                data: []
                            },
                            {
                                label: "Letzter Wert",
                                fill: {
                                    target: "start",
                                    above: "rgba(153, 102, 255, 0.25)"
                                },
                                backgroundColor: "rgba(153, 102, 255, 0.5)",
                                borderColor: 'rgba(153, 102, 255, 0.75)',
                                data: []
                            },
                            {
                                label: "Niedrigster Wert",
                                backgroundColor: "rgba(54, 162, 235, 0.5)",
                                borderColor : "rgba(54, 162, 235, 0.75)",
                                data: []
                            },
                            {
                                label: "Durchschnitt",
                                backgroundColor: "rgba(102, 102, 153, 0.5)",
                                borderColor : "rgba(102, 102, 153, 0.75)",
                                data: []
                            }
                        ]
                    }
                });
                // Aktuell
                charts["co2"]["current"] = new Chart($("#co2-chart-current")[0].getContext("2d"), {
                    options: {
                        onResize: function(a,b) {
                            console.log(a,b);
                        },
                        scales: {
                            x: {
                                ticks: {
                                    callback: function(val, index) {
                                        return index % 2 === 0 ? charts["co2"]["current"]["data"]["labels"][index] : "";
                                    }
                                }
                            },
                            y: { // defining min and max so hiding the dataset does not change scale range
                                min: 0, // muss individuell für jedes diagrammm festgelegt werden
                                max: 100
                            }
                        },
                        elements: {
                            line: {
                                borderWidth: 1
                            }
                        }
                    },
                    type: "line",
                    data: {
                        datasets: [
                            {
                                label: "Letzter Wert",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            // This case happens on initial chart load
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(205, 133, 63, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                },
                                // ALLE Farben müssen abhängig vom Messwert automatisch gewählt werden
                                backgroundColor: "rgba(205, 133, 63, 0.5)",
                                borderColor: "rgba(205, 133, 63, 0.75)",
                            }
                        ]
                    }
                });

                charts["salinity"]["current"] = new Chart($("#salinity-chart-current")[0].getContext("2d"), {
                    options: {
                        onResize: function(a,b) {
                            console.log(a,b);
                        },
                        scales: {
                            x: {
                                ticks: {
                                    callback: function(val, index) {
                                        return index % 2 === 0 ? charts["salinity"]["current"]["data"]["labels"][index] : "";
                                    }
                                }
                            },
                            y: { // defining min and max so hiding the dataset does not change scale range
                                min: 0, // muss individuell für jedes diagrammm festgelegt werden
                                max: 100
                            }
                        },
                        elements: {
                            line: {
                                borderWidth: 1
                            }
                        }
                    },
                    type: "line",
                    data: {
                        datasets: [
                            {
                                label: "(Einheit)",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            // This case happens on initial chart load
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(205, 133, 63, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                },
                                // ALLE Farben müssen abhängig vom Messwert automatisch gewählt werden
                                backgroundColor: "rgba(205, 133, 63, 0.5)",
                                borderColor: "rgba(205, 133, 63, 0.75)",
                            }
                        ]
                    }
                });
                charts["temperature"]["current"] = new Chart($("#temperature-chart-current")[0].getContext("2d"), {
                    options: {
                        onResize: function(a,b) {
                            console.log(a,b);
                        },
                        scales: {
                            x: {
                                ticks: {
                                    callback: function(val, index) {
                                        return index % 2 === 0 ? charts["temperature"]["current"]["data"]["labels"][index] : "";
                                    }
                                }
                            },
                            y: { // defining min and max so hiding the dataset does not change scale range
                                min: 0, // muss individuell für jedes diagrammm festgelegt werden
                                max: 100
                            }
                        },
                        elements: {
                            line: {
                                borderWidth: 1
                            }
                        }
                    },
                    type: "line",
                    data: {
                        datasets: [
                            {
                                label: "°C",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            // This case happens on initial chart load
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(205, 133, 63, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                },
                                // ALLE Farben müssen abhängig vom Messwert automatisch gewählt werden
                                backgroundColor: "rgba(205, 133, 63, 0.5)",
                                borderColor: "rgba(205, 133, 63, 0.75)",
                            }
                        ]
                    }
                });
                app.component('copyright', {
                    data() {
                        let aso = new Date();
                        return {
                            text: (aso.getFullYear() >= 2022 ? "2021-" + aso.getFullYear() : aso.getFullYear()) + " Deine Mutter"
                        }
                    },
                template: `{{ text }}`
                });
                app.mount($("footer")[0]);
                let dropDowns = $("[data-bs-toggle='collapse']");
                for (dropDown of dropDowns) {
                    $(dropDown).click(function() {
                        $(this).children("i:last-of-type").css("transform", ($(this).attr("aria-expanded") == "true" ? "rotate(180deg)" : "rotate(0deg)"));
                    });
                }

                // Neue Daten vom Server laden
                setInterval(function() {
                    $.post("ajax.php", { labels: JSON.stringify(charts["co2"]["current"]["data"]["labels"]) }).done(function(response) {
                        let data = JSON.parse(response);
                        let items = Object.keys(data);
                        // item = Sensor, z.B. co2
                        for (item of items) {
                            if (charts.hasOwnProperty(item)) {
                                charts[item]["current"]["data"]["labels"] = data[item]["labels"]["current"];
                                if (charts[item]["current"]["data"]["datasets"][0]["data"].length >= 13) {
                                    charts[item]["current"]["data"]["datasets"][0]["data"].splice(0, 1);
                                }
                                charts[item]["current"]["options"]["scales"]["x"]["min"] = data[item]["labels"]["current"][0];
                                charts[item]["current"]["options"]["scales"]["x"]["max"] = data[item]["labels"]["current"][data[item]["labels"]["current"].length -1];
                                charts[item]["current"]["data"]["datasets"][0]["data"].push({x: data[item]["data"]["current"]["x"], y: Number(data[item]["data"]["current"]["y"])});
                                charts[item]["current"].update();
                            }
                        }
                    });
                }, 5000);
            });
        </script>
        <style>
            :root {
                --alert-color-warning: #cd853f;
                --alert-background-warning: #f7e8cd;
                --alert-color-danger: #dc143c;
                --alert-background-danger: #ffe4e1;
                --alert-color-success: #228b22;
                --alert-background-success: #c0edc0;
                --chart-background-danger: #dc143c80;
                --chart-border-danger: #dc143cbf;
                --chart-background-warning: #cd853f80;
                --chart-border-warning: #cd853fbf;
                --chart-background-success: #228b2280;
                --chart-border-success: #228b22bf;
            }
            body {
                display: grid;
                grid-gap: 0;
                grid-template-rows: auto 1fr 71px;
                overflow-x: hidden;
                min-height: 100vh; 
                background-color: #f4f2e0;
                align-content: flex-start;
                background-image: url("img/moo.png");
                background-repeat: repeat;
                background-blend-mode: color;
            }
            main {
                grid-column: 1 / 3;
                grid-row: 2 / 2;
			    display: flex;
    			align-items: flex-start
            }
            main > div.row:first-of-type {
                flex: 1 0 100%;
            }
            header {
                grid-column: 1 / 3;
                grid-row: 1 / 1;
                display: flex;
                flex-direction: column;
                align-self: flex-start;
                background-image: linear-gradient(90deg, #32887c, #458084, #32887c);
                border-top: 1px solid #76a5a8;
                border-bottom: 1px solid #76a5a8;
                height: 50px;
		    	color: #fff;
                justify-content: center;
            }
            footer {
                height: 50px;
                color: white; 
                grid-column: 1 / 3;
                grid-row: 3 / 3;
                align-self: flex-end;
                background-image: linear-gradient(90deg, #32887c, #458084, #32887c);
                border-top: 1px solid #76a5a8;
                border-bottom: 1px solid #76a5a8;
                text-shadow: 0 1px 0 black;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            [data-bs-toggle="collapse"] > i {
                transition: transform 250ms;
            }
            .tab-pane > section:not(:last-of-type) {
                margin-bottom: 24px;
            }
	    	section.lol {
                border: 2px solid var(--bs-gray-300, #dee2e6);
		    }
            section.section-item {
                background-color: #fbfbfb;
                min-height: 400px;
                flex: 2 0;
                border-radius: 2px;
                outline: 1px solid var(--bs-gray-300);
                display: flex;
                align-content: center;
                align-items: center;
                position: relative
            }
            section.lol.warning {
                background-color: var(--alert-background-warning);
                border: 2px dashed var(--alert-color-warning);
            }
            section.lol.danger {
                background-color: var(--alert-background-danger);
                border: 2px dashed var(--alert-color-danger);
            }
            section.lol.warning > .section-body > .section-item {
                outline: 1px solid var(--alert-color-warning);
            }
            section.lol.danger > .section-body > .section-item {
                outline: 1px solid var(--alert-color-danger);
            }
            section.lol > .section-header > hr {
                flex: 1 0 auto;
                background-color: var(--bs-gray-300, #dee2e6);
            }
            section.lol.warning > .section-header > hr {
                background-color: var(--alert-color-warning)
            }
            section.lol.danger > .section-header > hr {
                background-color: var(--alert-color-danger)
            }
            section.lol.warning > .section-header > h3 > i:first-of-type {
                color: var(--alert-color-warning);
                animation: flashing 3s linear 0s infinite
            }
            section.lol.danger > .section-header > h3 > i:first-of-type {
                color: var(--alert-color-danger);
                animation: flashing 1s linear 0s infinite
            }
            section.lol.success > .section-header > h3 > i:first-of-type {
                color: var(--alert-color-success)
            }
            .section-item-label {
                flex: 2 0
            }
	    	.separator {
		    	width: 0;
			    border-right: 1px solid var(--bs-gray-300, #dee2e6);
    			margin-left: -1px;
	    		flex: 0 0 1px;
                align-self: stretch;
		    }
	    	section.lol.warning > .section-body > .separator {
			    border-right: 1px solid var(--alert-color-warning);
		    }
	    	section.lol.danger > .section-body > .separator {
			    border-right: 1px solid var(--alert-color-danger);
		    }
            .tab-content {
                background-color: #fbfbfb;
                border-bottom-left-radius: 5px;
                border-bottom-right-radius: 5px;
                border-top-right-radius: 5px;
                box-shadow: 0 1px 4px 0px var(--bs-gray-600, #6c757d);
            }
            #tabNavigation {
                border-bottom-width: 0 !important;
            }
            #tabNavigation .nav-link.active::after {
                content: "";
                position: absolute;
                width: 100%;
                height: 20px;
                left: 0;
                bottom: -10px;
                z-index: 10;
                background-color: #fbfbfb;
                display: block
            }
            #tabNavigation .nav-item {
                position: relative
            }
            #tabNavigation .nav-item:first-of-type::after {
                content: "";
                position: absolute;
                width: 6px;
                height: 5px;
                right: -3px;
                bottom: -6px;
                z-index: 10;
                background-color: #fbfbfb;
            }
            #tabNavigation .nav-item:last-of-type::after {
                content: "";
                position: absolute;
                width: 6px;
                height: 5px;
                right: -3px;
                bottom: -6px;
                z-index: 10;
                background-color: #fbfbfb;
            }
            #tabNavigation .nav-item:first-of-type .nav-link.active::before {
                content: "";
                position: absolute;
                width: 1px;
                height: 40px;
                left: -1px;
                bottom: -20px;
                z-index: 10;
                background-color: var(--bs-gray-300, #dee2e6);
            }
            #tabNavigation .nav-link.active {
                background-color: #fbfbfb !important;
                border-bottom-color: #fbfbfb !important;
                position: relative;
                box-shadow: 0 1px 4px 0px var(--bs-gray-600, #6c757d)
            }
            #tabNavigation .nav-link.disabled {
                border: 1px solid var(--bs-gray-200, #e9ecef) !important;
            }
            #tabNavigation a.nav-link:not(.disabled, .active):hover {
                border: 1px solid var(--bs-gray-300, #dee2e6) !important;
                border-bottom: 1px solid transparent !important
            }
            nav {
                flex: 1 0 100%;
            }
            #first-navbar > li:not(:first-of-type, :last-of-type) {
                margin-left: 8px;
            }
            #second-navbar > li:not(:first-of-type, :last-of-type) {
                margin-right: 8px;
            }
            #navigation > ul > li > a:not(.disabled), #navigation > ul > li > a:not(.disabled):visited {
                color: white;
            }
            #navigation > ul > li > a {
                text-shadow: 0 1px 0 black
            }
            #navigation > ul > li > a:not(.disabled):hover, #navigation > ul > li > a:not(.disabled):active, #navigation > ul > li > a.active {
                color: black !important;
                background-color: #fbfbfb;
                box-shadow: 0 1px 1px 0px rgba(0, 0, 0, 0.5);
                text-shadow: 0 0 0 transparent
            }
            .card-header {
                padding: 0 !important;
            }
            hr {
                opacity: 1 !important;
            }
            table {
                border-spacing: 0;
                border-radius: 2px;
                border-collapse: separate !important;
                overflow: hidden;
            }
            table > thead > tr > th:first-of-type {
                border-top-left-radius: 2px;
            }
            table > thead > tr > th:last-of-type {
                border-top-right-radius: 2px;
            }
            table > thead > tr > th {
                border-left: 1px solid var(--bs-gray-300) !important;
                border-top: 1px solid var(--bs-gray-300) !important;
                border-bottom: 2px solid var(--bs-gray-300) !important;
                background-color: #f7f7f7 !important
            }
            table > thead > tr > th:last-of-type {
                border-right: 1px solid var(--bs-gray-300) !important
            }
            table > tbody > tr > td {
                border-left: 1px solid var(--bs-gray-300) !important
            }
            table > tbody > tr > td:last-of-type {
                border-right: 1px solid var(--bs-gray-300) !important
            }
            table > tbody > tr:last-of-type > td {
                border-bottom: 1px solid var(--bs-gray-300) !important
            }
            table > tbody > tr:last-of-type > td:first-of-type {
                border-bottom-left-radius: 2px
            }
            table > tbody > tr:last-of-type > td:last-of-type {
                border-bottom-right-radius: 2px
            }
            i.user-offline {
                color: var(--alert-color-danger);
                text-shadow: 0 0 3px var(--alert-color-danger);
            }
            .section-header > h3 > i:first-of-type {
                vertical-align: top;
                font-size: larger;
            }
            i.user-online {
                color: var(--alert-color-success);
                text-shadow: 0 0 3px var(--alert-background-success);
            }
            @keyframes flashing {
                0% { opacity: 0; }
                50% { opacity: 1; }
                100% { opacity: 0; }
            }
            i.project-admin {
                font-size: larger;
                color: goldenrod
            }
            i.site-admin {
                font-size: larger;
                color: silver
            }
            table.dataTable > thead .sorting::before, table.dataTable > thead .sorting_asc::before, 
            table.dataTable > thead .sorting_desc::before, table.dataTable > thead .sorting_asc_disabled::before, 
            table.dataTable > thead .sorting_desc_disabled::before,
            table.dataTable > thead .sorting::after, table.dataTable > thead .sorting_asc::after,
            table.dataTable > thead .sorting_desc::after, table.dataTable > thead .sorting_asc_disabled::after,
            table.dataTable > thead .sorting_desc_disabled::after {
                content: "" !important;
                right: auto !important
            }
            table.dataTable thead .sorting {
                position: relative
            }
            table.dataTable thead .sorting::after {
                position: absolute;
                width: 100%;
                height: 100%;
                right: 5px !important;
                top: 0 !important;
                opacity: 0.5 !important;
                background-repeat: no-repeat;
                background-position-x: right;
                background-position-y: center;
                background-size: 16px 16px;
                background-image: url("img/iconmonstr-sort-2.svg")
            }
            table.dataTable thead .sorting_desc::after {
                background-image: url("img/iconmonstr-sort-3.svg") !important
            }
            table.dataTable thead .sorting_asc::after {
                background-image: url("img/iconmonstr-sort-4.svg") !important
            }
            .dataTables_scrollHeadInner {
                padding-right: 0 !important;
                width: 100% !important
            }
            .dataTables_scrollBody > table th {
                border-width: 0 !important
            }
            .dataTables_wrapper > .row:last-of-type {
                margin-top: 24px
            }
            .table-responsive {
                max-height: 400px
            }
            /* Vorladen von Sortierungssymbolen in Tabellen */
            body::after {
                position: absolute;
                width: 0;
                height: 0;
                z-index: -1;
                overflow: hidden;
                content: url("img/iconmonstr-sort-2.svg") url("img/iconmonstr-sort-3.svg") url("img/iconmonstr-sort-4.svg")
            }
        </style>
	</head>
    <body class="m-0 p-0">
        <header>
            <nav class="navbar navbar-expand-sm p-0" id="navigation">
                <h3 class="navbar-brand ms-2 mb-0" href="#">Hydroponic, lol</h3>
                <ul class="navbar-nav" id="first-navbar">
                    <li class="nav-item">
                        <a class="nav-link active rounded-3" href="#" id="randomizeData">Active</a>
                    </li>
                   <li class="nav-item">
                      <a class="nav-link rounded-3" href="#">Link</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link rounded-3" href="#">Link</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link disabled rounded-3" href="#">Disabled</a>
                    </li>
                </ul>
                <ul class="navbar-nav mt-auto me-2 mb-auto ms-auto" id="second-navbar">
                    <li class="nav-item">
                        <a class="nav-link rounded-3" href="#" data-bs-toggle="modal" data-bs-target="#loginModal"><i class="fas fa-sign-in-alt"></i> Anmelden</a>
                    </li>
                    <!-- Es darf immer nur eine Aktion möglich sein -->
                    <li class="nav-item d-none">
                        <a class="nav-link rounded-3" href="#"><i class="fas fa-sign-out-alt"></i> Abmelden</a>
                    </li>
                </ul>
            </nav>
        </header>
        <main>
            <div class="row">
                <div class="col-10 offset-1 mt-4 p-0" id="panel">
                    <ul class="nav nav-tabs" id="tabNavigation">
                        <li class="nav-item">
                          <a class="nav-link active" data-bs-toggle="tab" href="#overview">Übersicht</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" data-bs-toggle="tab" href="#administration">Administration</a>
                          <!-- class="nav-link disabled" -->
                        </li>
                    </ul>
                    <div class="tab-content p-4 border">
                        <div class="tab-pane active" id="overview">
                            <!-- Sensoren mit kritischen Werten ganz oben positionieren -->
                            <section class="rounded-3 p-3 col-12 lol warning" id="section-co2">
						        <div class="d-flex section-header">
                                    <h3><i class="fas fa-exclamation-triangle"></i> Co²-Gehalt</h3>
                                    <hr class="align-self-center ms-2">
                                </div>
                                <div class="d-flex m-0 justify-content-evenly align-items-stretch section-body">
                                    <span class="section-item-label">Letzte 60 Sekunden:</span>
						        	<div class="separator me-3 ms-3"></div>
                                    <span class="section-item-label">Letzte X Stunden:</span>
                                </div>
						        <div class="d-flex m-0 justify-content-evenly align-items-stretch section-body">
        							<section class="section-item">
                                        <canvas id="co2-chart-current"></canvas>
                                    </section>
		        					<div class="separator me-3 ms-3"></div>
        							<section class="section-item">
				        			    <canvas id="co2-chart-history"></canvas>
                                    </section>
        						</div>
                            </section>
                            <section class="rounded-3 p-3 col-12 lol danger" id="section-temperature">
                                <div class="d-flex section-header">
                                    <h3><i class="fas fa-exclamation-circle"></i> Temperatur</h3>
                                    <hr class="align-self-center ms-2">
                                </div>
                                <div class="d-flex m-0 justify-content-evenly align-items-stretch section-body">
                                    <span class="section-item-label">Letzte 60 Sekunden:</span>
						        	<div class="separator me-3 ms-3"></div>
                                    <span class="section-item-label">Letzte X Stunden:</span>
                                </div>
						        <div class="d-flex m-0 justify-content-evenly align-items-stretch section-body">
        							<section class="section-item">
                                        <canvas id="temperature-chart-current"></canvas>
                                    </section>
		        					<div class="separator me-3 ms-3"></div>
				        			<section class="section-item">
                                        <canvas id="temperature-chart-history"></canvas>
                                    </section>
						        </div>
                            </section>
                            <section class="rounded-3 p-3 col-12 lol success" id="section-salinity">
                                <div class="d-flex section-header">
                                    <h3><i class="fas fa-check-circle"></i> Salzgehalt</h3>
                                    <hr class="align-self-center ms-2">
                                </div>
                                <div class="d-flex m-0 justify-content-evenly align-items-stretch section-body">
                                    <span class="section-item-label">Letzte 60 Sekunden:</span>
						        	<div class="separator me-3 ms-3"></div>
                                    <span class="section-item-label">Letzte X Stunden:</span>
                                </div>
             					<div class="d-flex m-0 justify-content-evenly align-items-stretch section-body">
		        					<section class="section-item">
                                        <canvas id="salinity-chart-current"></canvas>
                                    </section>
				        			<div class="separator me-3 ms-3"></div>
						        	<section class="section-item">
                                        <canvas id="salinity-chart-history"></canvas>
                                    </section>
        						</div>
                            </section>
                            <section class="rounded-3 p-3 col-12 lol" id="section-pH">
                                <div class="d-flex section-header">
                                    <h3><i class="fas fa-check-circle"></i> pH-Wert</h3>
                                    <hr class="align-self-center ms-2">
                                </div>
                                <div class="d-flex m-0 justify-content-evenly align-items-stretch section-body">
                                    <span class="section-item-label">Letzte 60 Sekunden:</span>
						        	<div class="separator me-3 ms-3"></div>
                                    <span class="section-item-label">Letzte X Stunden:</span>
                                </div>
  		        				<div class="d-flex m-0 justify-content-evenly align-items-stretch section-body">
				        			<section class="section-item">
                                        <canvas id="ph-chart-current"></canvas>
                                    </section>
						    	    <div class="separator me-3 ms-3"></div>
        						    <section class="section-item">
                                        <canvas id="ph-chart-current"></canvas>
                                    </section>
		        				</div>
                            </section>
                            <section class="rounded-3 p-3 col-12 lol" id="section-waterlevel">
                                <div class="d-flex section-header">
                                    <h3><i class="fas fa-check-circle"></i> Wasserstand</h3>
                                    <hr class="align-self-center ms-2">
                                </div>
                                <div class="d-flex m-0 justify-content-evenly align-items-stretch section-body">
                                    <span class="section-item-label">Letzte X Sekunden:</span>
						        	<div class="separator me-3 ms-3"></div>
                                    <span class="section-item-label">Letzte X Stunden:</span>
                                </div>
		        				<div class="d-flex m-0 justify-content-evenly align-items-stretch section-body">
				        			<section class="section-item">
                                        <canvas id="waterlevel-chart-current"></canvas>
                                    </section>
						        	<div class="separator me-3 ms-3"></div>
        							<section class="section-item">
                                        <canvas id="waterlevel-chart-current"></canvas>
                                    </section>
		        				</div>
                            </section>
                        </div>
                        <div class="tab-pane" id="administration">
                            <section id="pump-actions-accordion">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-pump-actions">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-fan"></i> Pumpensteuerung</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-pump-actions" class="collapse hide" data-bs-parent="#pump-actions-accordion">
                                        <div class="card-body">
                                        2 Wasserpumpen, 5 Schlauchpumpen
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="actuator-actions-accordion">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-actuator-actions">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-bolt"></i> Aktorensteuerung</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-actuator-actions" class="collapse hide" data-bs-parent="#actuator-actions-accordion">
                                        <div class="card-body">
                                          1 Schwimmerschalter
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="self-test-actions-accordion">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-self-test-actions">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-heartbeat"></i> Selbsttests</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-self-test-actions" class="collapse hide" data-bs-parent="#self-test-actions-accordion">
                                        <div class="card-body">
                                        Lorem ipsum..
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="user-actions-accordion">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-user-actions">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-users"></i> Benutzerkonten</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-user-actions" class="collapse hide" data-bs-parent="#actuator-user-accordion">
                                        <div class="card-body">
                                            <div class="table-responsive">
                                                <table class="table table-sm w-100" id="usersTable">
                                                    <thead>
                                                        <tr>
                                                            <th>Vollständiger Name</th>
                                                            <th>Benutzername</th>
                                                            <th>Hinzugefügt</th>
                                                            <th>Status</th>
                                                            <th>Aktionen</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                <!-- Projektadministrator kann zusätzlich Benutzer verwalten.
                                                    Oder sollen Administratoren andere Administratoren bearbeiten
                                                    können, wie sie wollen?
                                                -->
                                                        <tr>
                                                            <td><i class="fas fa-chess-king project-admin"></i> Gitta Stäbe</td>
                                                            <td>igitt</td>
                                                            <td>01.01.1970 12:12</td>
                                                            <td><i class="fas fa-dot-circle user-offline"></i> Offline (Letzte Aktivität: 10.10.2000 13:37)</td>
                                                            <td>
                                                                <button type="button" class="btn btn-primary"><i class="fas fa-user-edit"></i> Bearbeiten...</button>
                                                                <button type="button" class="btn btn-danger"><i class="fas fa-user-alt-slash"></i> Entfernen</button>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><i class="fas fa-chess-rook site-admin"></i> Gitta Stäbe</td>
                                                            <td>igitt</td>
                                                            <td>01.01.1970 12:12</td>
                                                            <td><i class="fas fa-dot-circle user-online"></i> Online</td>
                                                            <td>
                                                                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editUserModal"><i class="fas fa-user-edit"></i> Bearbeiten...</button>
                                                                <button type="button" class="btn btn-danger"><i class="fas fa-user-alt-slash"></i> Entfernen</button>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="d-flex align-items-start mt-3">
                                                <div>
                                                    <div><i class="fas fa-chess-king project-admin"></i> Projektadministrator</div>
                                                    <div><i class="fas fa-chess-rook site-admin"></i> Seitenadministrator</div>
                                                </div>
                                                <button type="button" class="btn btn-primary mt-0 me-0 mb-auto ms-auto"><i class="fas fa-user-plus"></i> Hinzufügen...</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="events-accordion">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-events-actions">
                                          <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-newspaper"></i> Ereignisse</h4>
                                          <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-events-actions" class="collapse hide" data-bs-parent="#events-accordion">
                                        <div class="card-body">
                                          Lorem ipsum..
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="logs-accordion">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-logs-actions">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-scroll"></i> Logs</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-logs-actions" class="collapse hide" data-bs-parent="#logs-accordion">
                                        <div class="card-body">
                                            <div class="d-inline-flex">
                                                <label for="logType" class="form-label col-form-label me-2">Aktivität:</label>
                                                <select class="form-select" id="logType">
                                                    <option value="0">Alles</option>
                                                    <option value="1">Aktoren</option>
                                                    <option value="1">Pumpen</option>
                                                    <option value="3">Selbsttests</option>
                                                    <option value="2">Benutzerkonten</option>
                                                    <option value="4">Ereignisse</option>
                                                    <option value="5">Anmeldung</option>
                                                </select>
                                            </div>
                                            <div class="mt-3 pt-1" class="table-responsive">
                                                <table class="table table-sm w-100" id="logTable">
                                                    <thead>
                                                        <tr>
                                                            <th class="">Zeitpunkt</th>
                                                            <th class="">Nachricht</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>Donnerstag, XX.XX.XXXX, XX:XX:XX</td>
                                                            <td>verdammt</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Donnerstag, XX.XX.XXXX, XX:XX:XX</td>
                                                            <td>verdammt</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Donnerstag, XX.XX.XXXX, XX:XX:XX</td>
                                                            <td>verdammt</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Donnerstag, XX.XX.XXXX, XX:XX:XX</td>
                                                            <td>verdammt</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Donnerstag, XX.XX.XXXX, XX:XX:XX</td>
                                                            <td>verdammt</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Donnerstag, XX.XX.XXXX, XX:XX:XX</td>
                                                            <td>verdammt</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Donnerstag, XX.XX.XXXX, XX:XX:XX</td>
                                                            <td>verdammt</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Donnerstag, XX.XX.XXXX, XX:XX:XX</td>
                                                            <td>verdammt</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Donnerstag, XX.XX.XXXX, XX:XX:XX</td>
                                                            <td>verdammt</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Donnerstag, XX.XX.XXXX, XX:XX:XX</td>
                                                            <td>verdammt</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <footer>
            &copy;
            <copyright v-once></copyright>
        </footer>
        <div class="modal fade" id="loginModal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Anmelden</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="alert alert-danger fade show">
                            Fehlermeldung, wenn Anmeldung fehlschlug...
                        </div>
                        <!-- Bei neuem Anmeldeversuch Fehlermeldung vorher ausblenden -->
                        <div>
                            <label for="username" class="form-label">Benutzername:</label>
                            <input type="text" class="form-control" id="username" placeholder="Benutzernamen eingeben">
                        </div>
                        <div class="mt-3">
                            <label for="password" class="form-label">Passwort:</label>
                            <input type="password" class="form-control" id="password" placeholder="Passwort eingeben">
                        </div>
                        <div class="d-flex mt-3 justify-content-between align-items-center">
                            <button class="btn btn-primary" data-processing="false">
                                <!-- wenn true, soll kein Spinner angezeigt werden, wenn man auf Knopf drückt.
                                Bei Klick Spinner anzeigen -->
                                <span class="spinner-border spinner-border-sm"></span> Anmelden
                                <!-- Knopf deaktivieren, wenn Anmeldevorgang läuft -->
                            </button>
                            <a href="#">Ich habe mein Passwort vergessen!</a>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Abbrechen</button>
                        <!-- Knopf deaktivieren, wenn Anmeldevorgang läuft -->
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="editUserModal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">"Benutzer" bearbeiten</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <!-- Benutzername darf nur von Projektadmins verändert werden -->
                        <div>
                            <label for="usernameInput" class="form-label">Benutzername:</label>
                            <input type="text" class="form-control" id="usernameInput" placeholder="Benutzername eingeben" readonly="readonly">
                        </div>
                        <div class="mt-3">
                            <label for="usernameSurnameInput" class="form-label">Nachname:</label>
                            <input type="text" class="form-control" id="usernameSurnameInput" placeholder="Nachnamen eingeben">
                        </div>
                        <div class="mt-3">
                            <label for="usernameFornameInput" class="form-label">Vorname:</label>
                            <input type="text" class="form-control" id="usernameFornameInput" placeholder="Vornamen eingeben">
                        </div>
                        <!-- Eigenes Passwort darf nur von Projektadmins und vom jeweiligen Benutzer geändert werden -->
                        <div class="mt-3">
                            <label for="oldPasswordInput" class="form-label">Altes Passwort:</label>
                            <input type="password" class="form-control" id="oldPasswordInput" placeholder="Altes Passwort eingeben">
                        </div>
                        <div class="mt-3">
                            <label for="newPasswordInput" class="form-label">Neues Passwort:</label>
                            <input type="password" class="form-control" id="newPasswordInput" placeholder="Neues Passwort eingeben">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary"><span class="spinner-border spinner-border-sm"></span> Speichern</button>
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Abbrechen</button>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>