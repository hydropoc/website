<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="utf-8" />
        <title>Hydropoc</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="verdammt" />
        <meta name="keywords" content="lol,wtf" />
        <meta name="copyright" content="IN20" />
        <link rel="icon" href="img/favicon.ico" type="image/x-icon" />
        <link rel="stylesheet" href="css/bootstrap.min.css" />
        <link rel="stylesheet" href="css/fontawesome.css" />
        <link rel="stylesheet" href="css/dataTables.bootstrap5.min.css" />
        <link rel="stylesheet" href="css/bootstrap4-toggle.min.css" />
        <script src="js/jquery-3.6.0.min.js"></script>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script src="js/datatables.min.js"></script>
        <script src="js/dataTables.bootstrap5.min.js"></script>
        <script src="js/chart.min.js"></script>
        <script src="js/bootstrap4-toggle.min.js"></script>
        <script src="js/litepicker.js"></script>
        <script>
            Chart.register('filler');
            //const apiURL = 'http://hydropoc.api.jongmans.net/api';
            const charts = {
                current: {
                    temperature_water: {},
                    temperature_air: {},
                    humidity: {},
                    ph_value: {},
                    swimmer_1: {},
                    swimmer_2: {},
                    swimmer_3: {},
                    co2_level: {},
                    ec_value: {},
                },
                history: {},
                scales: {
                    temperature_water: [10, 35],
                    temperature_air: [10, 35],
                    humidity: [0, 100],
                    ph_value: [0, 14],
                    swimmer_1: [0, 100],
                    swimmer_2: [0, 100],
                    swimmer_3: [0, 100],
                    co2_level: [0, 1000],
                    ec_value: [200, 1400],
                },
                historyLabelInterval: {
                    86400: 24,
                    43200: 20,
                    21600: 15,
                    10800: 15,
                    3600: 10
                }
            };
            const ajaxRequestErrors = {
                invalid_token: "Der Authentifizierungstoken ist ungültig. Bitte erneut anmelden.",
                register_user_not_exists: "Der angegebene Benutzername existiert nicht.",
                register_user_already_exists: "Der gewählte Benutzername existiert bereits.",
                register_user_too_many_exists: "Der angegebene Benutzername existiert mehrfach.",
                invalid_user_credentials: "Die angegebenen Anmeldedaten sind falsch."
            };
            const dataTablesLocalisation = {
                sEmptyTable: 'Keine Daten vorhanden',
                sInfo: '_START_ bis _END_ von _TOTAL_ Einträgen',
                sInfoEmpty: '0 bis 0 von 0 Einträgen',
                sInfoFiltered: '(gefiltert aus _MAX_ Einträgen)',
                sInfoPostFix: '',
                sInfoThousands: '.',
                sLengthMenu: '_MENU_ Einträge anzeigen',
                sLoadingRecords: 'Wird geladen...',
                sProcessing: 'Bitte warten...',
                sSearch: 'Suchen:',
                sZeroRecords: 'Keine Einträge vorhanden.',
                oPaginate: {
                    sFirst: 'Erste',
                    sPrevious: 'Zurück',
                    sNext: 'Nächste',
                    sLast: 'Letzte',
                },
                oAria: {
                    sSortAscending: ': aktivieren, um Spalte aufsteigend zu sortieren',
                    sSortDescending: ': aktivieren, um Spalte absteigend zu sortieren',
                },
            };
            const adminDataTables = {};
            const dataTablesAdminOptions = {
                plants: {
                    order: [0, 'asc'],
                    language: dataTablesLocalisation,
                    lengthMenu: [5, 10, 25, 50],
                    columns: [
                        {
                            name: 'id',
                            data: 'id',
                        },
                        {
                            name: 'name',
                            data: function (row, type, set, meta) {
                                let index = plantProperties.findIndex((key) => key['id'] === row['id']);
                                return index >= 0 ? plantProperties[index]['name'] : '(Unbekannte ID: ' + row['id'] + ')';
                            },
                        },
                        {
                            name: 'properties',
                            data: function (row, type, set, meta) {
                                let content = '';
                                let index = plantProperties.findIndex((key) => key['id'] === row['id']);
                                if (index >= 0) {
                                    content += "<div class='accordion accordion-flush' id='accordionPlantsAdminTableProperties-" + row['id'] + "'>";
                                    let properties = Object.getOwnPropertyNames(plantPropertyNames);
                                    for (property of properties) {
                                        content += "<div class='accordion-item'>";
                                        content += "<h2 class='accordion-header' id='flushPlantsAdminTable" + property + 'PropertyHeader-' + row['id'] + "'>";
                                        content += "<button class='accordion-button collapsed p-2' type='button' data-bs-toggle='collapse' data-bs-target='#flush-collapsePlantsAdminTable" + property + 'Property-' + row['id'] + "' aria-expanded='false' aria-controls='plantsAdminTable" + property + 'Property-' + row['id'] + "'>";
                                        content += plantPropertyNames[property] + '</button></h2>';
                                        content += "<div id='flush-collapsePlantsAdminTable" + property + 'Property-' + row['id'] + "' class='accordion-collapse collapse' aria-labelledby='flushPlantsAdminTable" + property + 'PropertyHeader-' + row['id'] + "' data-bs-parent='#accordionPlantsAdminTableProperties-" + row['id'] + "'>";
                                        content += "<div class='accordion-body p-2'><div class='row'><div class='col-md-8'>Sollwert:</div><div class='col-md-4'>" + (index >= 0 ? plantProperties[index]['properties'][property]['setpoint'] : '(Keine Daten vorhanden)') + '</div>';
                                        content += "<div class='col-md-8'>Obere Eingriffsgrenze:</div><div class='col-md-4'>" + (index >= 0 ? plantProperties[index]['properties'][property]['upperControlLimit'] : '(Keine Daten vorhanden)') + '</div>';
                                        content += "<div class='col-md-8'>Untere Eingriffsgrenze:</div><div class='col-md-4'>" + (index >= 0 ? plantProperties[index]['properties'][property]['lowerControlLimit'] : '(Keine Daten vorhanden)') + '</div>';
                                        content += "<div class='col-md-8'>Obere Warngrenze:</div><div class='col-md-4'>" + (index >= 0 ? plantProperties[index]['properties'][property]['upperWarningLimit'] : '(Keine Daten vorhanden)') + '</div>';
                                        content += "<div class='col-md-8'>Untere Warngrenze:</div><div class='col-md-4'>" + (index >= 0 ? plantProperties[index]['properties'][property]['lowerWarningLimit'] : '(Keine Daten vorhanden)') + '</div>';
                                        content += '</div></div></div></div>';
                                    }
                                    content += '</div>';
                                } else {
                                    content = '(Keine Daten vorhanden)';
                                }
                                return content;
                            },
                            width: '50%',
                        },
                        {
                            name: 'options',
                            data: function (row, type, set, meta) {
                                let buttons = "<div class='d-flex flex-wrap' style='gap: 5px'>";
                                let index = plantProperties.findIndex((key) => key['id'] === row['id']);
                                if (index >= 0) {
                                    buttons += "<button type='button' class='btn btn-sm btn-primary' style='width: 32px' onclick='editPlant(" + row['id'] + ")'><i class='fas fa-pen'></i></button><button type='button' class='btn btn-sm btn-danger' style='width: 32px' onclick='confirmPlantDeletion(" + row['id'] + ")'><i class='fas fa-times'></i></button>";
                                } else {
                                    buttons += "<button type='button' class='btn btn-sm btn-primary disabled' disabled='disabled' style='width: 32px'><i class='fas fa-pen'></i></button><button type='button' class='btn btn-sm btn-danger disabled' disabled='disabled' style='width: 32px'><i class='fas fa-times'></i></button>";
                                }
                                buttons += '</div>';
                                return buttons;
                            },
                        },
                    ],
                    ajax: {
                        url: 'dataTables_test.php',
                        type: 'GET',
                        data: {
                            type: 'plantdetails',
                        },
                        dataSrc: function (response) {
                            Object.assign(plantProperties, response['data']);
                            return response['data'];
                        },
                        error: function (response) {
                            $("#plantsReloadButton").removeAttr("disabled").find("[data-processing='true']").remove();
                            if (response.hasOwnProperty("responseJSON") && response["responseJSON"].hasOwnProperty("error")) {
                                if (ajaxRequestErrors.hasOwnProperty(response["responseJSON"]["error"])) {
                                    $("#plantsAdminTable_wrapper").before(Alert.create("danger", ajaxRequestErrors[response["responseJSON"]["error"]]));
                                }
                            }
                            else {
                                $("#plantsAdminTable_wrapper").before(Alert.create("danger", "Es konnten keine Daten geladen werden."));
                            }
                        }
                    },
                    drawCallback: function (settings) {
                        $('#plantsAdminTable').parent().addClass('table-container');
                    },
                },
                userAccounts: {
                    order: [0, 'asc'],
                    language: dataTablesLocalisation,
                    columns: [
                        {
                            name: 'id',
                            data: 'id',
                            width: '8%',
                        },
                        {
                            name: 'username',
                            data: 'username',
                        },
                        {
                            name: 'lastlogin',
                            data: 'lastlogin',
                            render: function (data, type, row) {
                                if (type === 'display' || type === 'filter') {
                                    let time = new Date(Number.parseInt(data));
                                    let date = time.toISOString();
                                    return date.substring(8, 10) + "." + date.substring(5, 7) + "." + date.substring(0, 4) + ", " + date.substring(11, 19);
                                }
                                return data;
                            },
                        },
                    ],
                    ajax: {
                        type: 'POST',
                        contentType: 'application/json',
                        data: function (data, settings) {
                            data['token'] = getCookie('authToken');
                            return JSON.stringify(data);
                        },
                        dataSrc: function (response) {
                            return response['users'];
                        },
                        error: function (response) {
                            $("#usersReloadButton").removeAttr("disabled").find("[data-processing='true']").remove();
                            if (response.hasOwnProperty("responseJSON") && response["responseJSON"].hasOwnProperty("error")) {
                                if (ajaxRequestErrors.hasOwnProperty(response["responseJSON"]["error"])) {
                                    $("#userAccountsAdminTable_wrapper").before(Alert.create("danger", ajaxRequestErrors[response["responseJSON"]["error"]]));
                                }
                            }
                            else {
                                $("#userAccountsAdminTable_wrapper").before(Alert.create("danger", "Es konnten keine Daten geladen werden."));
                            }
                        }
                    },
                    drawCallback: function (settings) {
                        $('#userAccountsAdminTable').parent().addClass('table-container');
                    },
                },
                pumps: {
                    order: [0, 'asc'],
                    language: dataTablesLocalisation,
                    columns: [
                        {
                            name: 'name',
                            data: 'name',
                        },
                        {
                            name: 'power',
                            data: 'power',
                        },
                        {
                            name: 'rpm',
                            data: 'rpm',
                        },
                        {
                            name: 'status',
                            data: 'status',
                        },
                    ],
                    ajax: {
                        url: 'dataTables_test.php',
                        type: 'POST',
                        contentType: 'application/json',
                        data: function (data, settings) {
                            data['type'] = 'pumps'; // Test
                            data['token'] = getCookie('authToken');
                            return JSON.stringify(data);
                        },
                        dataSrc: function (response) {
                            return response;
                        },
                        error: function (response) {
                            $("#pumpsReloadButton").removeAttr("disabled").find("[data-processing='true']").remove();
                            if (response.hasOwnProperty("responseJSON") && response["responseJSON"].hasOwnProperty("error")) {
                                if (ajaxRequestErrors.hasOwnProperty(response["responseJSON"]["error"])) {
                                    $("#pumpsAdminTable_wrapper").before(Alert.create("danger", ajaxRequestErrors[response["responseJSON"]["error"]]));
                                }
                            }
                            else {
                                $("#pumpsAdminTable_wrapper").before(Alert.create("danger", "Es konnten keine Daten geladen werden."));
                            }
                        }
                    },
                    drawCallback: function (settings) {
                        // checkboxen müssen IDs haben!
                        $("#pumpsAdminTable > tbody [type='checkbox']").bootstrapToggle();
                    },
                },
                logs: {
                    language: dataTablesLocalisation,
                    serverSide: true,
                    columns: [
                        {
                            name: 'id',
                            data: 'id',
                            visible: false,
                        },
                        {
                            name: 'timestamp',
                            data: 'timestamp',
                            width: '15%',
                            render: function (data, type, row) {
                                if (type === 'display' || type === 'filter') {
                                    let time = new Date(Number.parseInt(data));
                                    let date = time.toISOString();
                                    return date.substring(8, 10) + "." + date.substring(5, 7) + "." + date.substring(0, 4) + ", " + date.substring(11, 19);
                                }
                                return data;
                            },
                        },
                        {
                            name: 'type',
                            data: function (row, type, set, meta) {
                                return dataTableTranslationStrings['logs'][row['type']];
                            },
                            width: '8%',
                        },
                        {
                            name: 'message',
                            data: 'message',
                            width: '50%',
                            orderable: false,
                        },
                    ],
                    order: [1, 'asc'],
                    ajax: {
                        type: 'POST',
                        contentType: 'application/json',
                        data: function (data, settings) {
                            data['token'] = getCookie('authToken');
                            data["orderBy"] = [data["columns"][data["order"][0]["column"]]["name"], data["order"][0]["dir"]];
                            return JSON.stringify(data);
                        },
                        dataSrc: function (response) {
                            return response['data'];
                        },
                        error: function (response) {
                            $("#logsReloadButton").removeAttr("disabled").find("[data-processing='true']").remove();
                            if (response.hasOwnProperty("responseJSON") && response["responseJSON"].hasOwnProperty("error")) {
                                if (ajaxRequestErrors.hasOwnProperty(response["responseJSON"]["error"])) {
                                    $("#logsAdminTable_wrapper").before(Alert.create("danger", ajaxRequestErrors[response["responseJSON"]["error"]]));
                                }
                            }
                            else {
                                $("#logsAdminTable_wrapper").before(Alert.create("danger", "Es konnten keine Daten geladen werden."));
                            }
                        }
                    },
                    drawCallback: function (settings) {
                        $('#logsAdminTable').parent().addClass('table-container');
                    },
                },
            };
            const dataTableTranslationStrings = {
                logs: {
                    error: "<i class='fas fa-times-circle text-danger'></i> Fehler",
                    success: "<i class='fas fa-check-circle text-success'></i> Erfolg",
                    info: "<i class='fas fa-info-circle text-info'></i> Information",
                },
                pumps: {
                    //
                },
            };
            var apiURLRequester;
            var viewportWidth;
            var isLoadingCurrentChartData = false;
            var isLoadingHistoryChartData = false;
            var systemInfosTimer = null;
            var isLoadingSystemInfos = false;
            var picker = null;
            function switchAlert(element, type) {
                type = type.toLowerCase();
                element = $('#section-' + element)[0];
                if (['danger', 'warning', 'success'].includes(type) && !$(element).hasClass(type)) {
                    $(element).removeClass('danger warning success').addClass(type);
                }
            }
            function getCSSVar(val) {
                return getComputedStyle($(':root')[0]).getPropertyValue(val);
            }
            function getGradient(context, chartArea, data) {
                let gradient = context.createLinearGradient(0, chartArea.bottom, 0, chartArea.top);
                let steps = Object.getOwnPropertyNames(data);
                for (step of steps) {
                    gradient.addColorStop(step, data[step]);
                }
                return gradient;
            }
            function getHistoryChartData(sensor) {
                if (!isLoadingHistoryChartData) {
                    isLoadingHistoryChartData = true;
                    let interval = Number.parseInt($('#historyTimespan').val());
                    $('#historyTimespan').attr('disabled', 'disabled').after("<span class='spinner-border ms-2 text-primary kreiselchen' style='flex: 0 0 auto' data-processing='true'></span>");
                    $.post({
                        // daten werden alle 15 sekunden gemessen
                        url: window.apiURL + '/sensor/data_sensor',
                        data: JSON.stringify({
                            sensor: sensor,
                            time: interval
                        }),
                        processData: false,
                        contentType: 'application/json',
                        crossDomain: true,
                        timeout: 10000,
                    }).done(function (response) {
                        // 24 std. = (1440min / 15sek) * 60min = 5760 / 24sek = 240 label
                        // 12 std. = (720min / 15sek) * 60min = 2280 / 20sek = 144 label
                        // 6 std. = (360min / 15sek) * 60min = 1440 / 15sek = 96 label
                        // 3 std. = (180min / 15sek) * 60min = 720 / 15sek = 48 label
                        // 1 std. = (60min / 15sek) * 60min = 240 / 10sek = 24 label
                        let labels = [];
                        response["sensors"].reverse();
                        charts['history']['data']['labels'] = [];
                        let labelCount = Math.round(response["sensors"].length / charts["historyLabelInterval"][interval]);
                        let limits = Object.getOwnPropertyNames(response['limits']);
                        let indexMeasured = charts['history']['data']['datasets'].findIndex(key => key['stack'] === 'measured');
                        let indexMiddle = charts['history']['data']['datasets'].findIndex(key => key['stack'] === 'middle');
                        let indexHighest = charts['history']['data']['datasets'].findIndex(key => key['stack'] === 'highest');
                        let indexLowest = charts['history']['data']['datasets'].findIndex(key => key['stack'] === 'lowest');
                        if (indexMeasured >= 0) {
                            charts['history']['data']['datasets'][indexMeasured]['data'] = [];
                        }
                        if (indexMiddle >= 0) {
                            charts['history']['data']['datasets'][indexMiddle]['data'] = [];
                        }
                        for (let [iteration, sensorData] of response['sensors'].entries()) {
                            let wtf = Number.parseInt(sensorData['timestamp']);
                            if (iteration % charts["historyLabelInterval"][interval] === 0) {
                                let time = new Date(wtf);
                                let IsoDate = time.toISOString();
                                let date = IsoDate.substring(8, 10) + "." + IsoDate.substring(5, 7) + "." + IsoDate.substring(2, 4) + "@" + IsoDate.substring(11, 19);
                                //if (labels.length <= labelCount) {
                                    labels.push(date);
                                //}
                                charts['history']['data']['labels'].push(date);
                                if (indexMeasured >= 0) {
                                    charts['history']['data']['datasets'][indexMeasured]['data'].push({ x: date, y: sensorData[sensor] });
                                }
                                if (indexMiddle >= 0) {
                                    charts['history']['data']['datasets'][indexMiddle]['data'].push({ x: date, y: sensorData[sensor] });
                                }
                                /*
                                for (limit of limits) {
                                    let indexLimit = charts['history']['data']['datasets'].findIndex(key => key['stack'] === limit);
                                    if (indexLimit >= 0) {
                                        if (charts['history']['data']['datasets'][indexLimit]['data'].length >= labelCount) {
                                            charts['history']['data']['datasets'][indexLimit]['data'] = [];
                                        }
                                        else {
                                            charts['history']['data']['datasets'][indexLimit]['data'].push({ x: date, y: response['limits'][limit] });
                                        }
                                    }
                                }*/
                                if (indexHighest >= 0) {
                                    let timeHighest = new Date(Number.parseInt(response['minMax']['maximum']['timestamp']));
                                    let dateHighest = timeHighest.toISOString();
                                    $("#historyChartMaximumValue").html(response['minMax']['maximum']['value'] + " (" + dateHighest.substring(8, 10) + "." + dateHighest.substring(5, 7) + "." + dateHighest.substring(0, 4) + ", " + dateHighest.substring(11, 19) + ")");
                                    //charts['history']['data']['datasets'][indexHighest]['data'] = [{ x: dateHighest, y: response['minMax']['maximum']['value'] }];
                                }
                                if (indexLowest >= 0) {
                                    let timeLowest = new Date(Number.parseInt(response['minMax']['minimum']['timestamp']));
                                    let dateLowest = timeLowest.toISOString();
                                    $("#historyChartMinimumValue").html(response['minMax']['minimum']['value'] + " (" + dateLowest.substring(8, 10) + "." + dateLowest.substring(5, 7) + "." + dateLowest.substring(0, 4) + ", " + dateLowest.substring(11, 19) + ")");
                                    //charts['history']['data']['datasets'][indexLowest]['data'] = [{ x: dateLowest, y: response['minMax']['minimum']['value'] }];
                                    }
                                }
                                if (iteration === labelCount) {
                                    /*
                                    let lol = response["sensors"].findIndex(key => key['timestamp'] === wtf);
                                    console.log(response["sensors"][lol+15]);
                                    let time_ = new Date(Number.parseInt(response["sensors"][lol+15]['timestamp']));
                                    let date_ = time_.toISOString();
                                    labels.push(date_);
                                    charts['history']['data']['datasets'][indexMeasured]['data'].push({ x: formatDate2(date_), y: lol[sensor] });
                                    */
                                }
                            }
                        charts['history']['options']['scales']['x']['min'] = labels[0];
                        charts['history']['options']['scales']['x']['max'] = labels[labels.length -1];
                        charts['history'].update('none');
                    }).fail(function (response) {
                        $('#chartHistoryModal .modal-body').prepend(Alert.create('danger', response['status'] + ': ' + response['statusText']));
                    }).always(function () {
                        isLoadingHistoryChartData = false;
                        $('#historyTimespan').next("[data-processing='true']").remove();
                        $('#historyTimespan').removeAttr('disabled');
                    });
                }
            }
            function togglePump(pump) {
                $(pump).attr('disabled', 'disabled');
                let parent = $(pump).parentsUntil('td');
                if ($(parent).find("[data-processing='true']").length === 0) {
                    $(parent).after("<span data-processing='true' class='spinner-border spinner-border-sm align-middle ms-2 text-secondary kreiselchen'></span>");
                }
                let data = {
                    token: getCookie('authToken'),
                    pump: $(pump).attr('id'),
                    state: $(pump).val()
                };
                $.post({
                    url: 'history_charts_data.php',
                    data: JSON.stringify(data),
                    processData: false,
                    contentType: 'application/json',
                    crossDomain: true,
                    timeout: 10000
                }).done(function (response) {
                    $(parent).parent().find("[data-processing='true']").remove();
                }).fail(function (response) {
                    $('#pumpsAdminTable_wrapper').before(Alert.create('danger', response['status'] + ': ' + response['statusText']));
                    $('#pumpsAdminTable').DataTable().ajax.reload();
                }).always(function () {
                      $(pump).removeAttr('disabled');
                });
            }
            function disableMainModal(mainButton) {
                if ($('#body-overlay').length === 0) {
                    $('body').prepend("<div id='body-overlay' style='background-color: transparent'></div>");
                }
                if ($(mainButton).find("[data-processing='true']").length === 0) {
                    $(mainButton).prepend("<span class='spinner-border me-1 text-white kreiselchen align-text-bottom' data-processing='true'></span>");
                }
                $('#mainModal .modal-footer > button').attr('disabled', 'disabled');
                $("#mainModal .modal-header > [data-bs-dismiss='modal']").attr('disabled', 'disabled');
                $('#mainModal .modal-body > .alert').remove();
            }
            function enableMainModal(mainButton) {
                $(mainButton).find("[data-processing='true']").remove();
                $(mainButton).removeAttr('disabled');
                $('#body-overlay').remove();
                $("#mainModal .modal-footer > [data-bs-dismiss='modal']").removeAttr('disabled');
                $("#mainModal .modal-header > [data-bs-dismiss='modal']").removeAttr('disabled');
            }
            function showHistoryGalleryImage(wtf) {
                let img = $(wtf).find('img:first-of-type');
                let url = $(img).attr('src');
                let path = url.match(/\/([^\/\\]+?)(\.[^\.]+?)$/i);
                let data = {
                    name: 'showHistoryGalleryImage',
                    size: 'fullscreen',
                    title: {
                        text: path[1],
                    },
                    content: {
                        text: "<a href='" + url + "' target='_blank'><img src='" + url + "' class='mw-100'></a>",
                    },
                };
                Modal.create(data);
            }
            function register() {
                if ($('#mainModal').hasClass('show') && $('#mainModal').attr('data-name') === 'register') {
                    disableMainModal('#registerButton');
                    $.post({
                        url: window.apiURL + '/user/register',
                        data: JSON.stringify({
                            username: $('#registerUsername').val(),
                            password: $('#registerPassword').val(),
                        }),
                        processData: false,
                        contentType: 'application/json',
                        crossDomain: true,
                        timeout: 10000,
                    }).done(function (response) {
                        let user = $('#registerUsername').val();
                        let date = new Date();
                        date.setHours(date.getHours() + 168); // = 1 Woche
                        document.cookie = 'authToken=' + encodeURIComponent(response['token']) + '; expires=' + date.toUTCString() + '; path=/'; //SameSite=None; Secure"; geht nur bei HTTPS
                        document.cookie = 'username=' + encodeURIComponent(user) + '; expires=' + date.toUTCString() + '; path=/'; // SameSite=None; Secure"; geht nur bei HTTPS
                        $("a[href='#login']").addClass('d-none');
                        $("a[href='#register']").addClass('d-none');
                        $("a[href='#logout']").removeClass('d-none');
                        $('[data-current-user]').removeClass('d-none').html("<i class='fas fa-user-injured'></i> " + user);
                        $('#mainTabNav > li:last-of-type').removeClass('d-none');
                        bootstrap.Modal.getInstance($('#mainModal')[0]).hide();
                    }).fail(function (response) {
                        if (ajaxRequestErrors.hasOwnProperty(response['responseJSON']['error'])) {
                            $('#mainModal .modal-body').prepend(Alert.create('danger', ajaxRequestErrors[response['responseJSON']['error']]));
                        }
                        else {
                            $('#mainModal .modal-body').prepend(Alert.create('danger', response['status'] + ': ' + response['statusText']));
                        }
                    }).always(function () {
                        enableMainModal('#registerButton');
                    });
                }
            }
            function login() {
                if ($('#mainModal').hasClass('show') && $('#mainModal').attr('data-name') === 'login') {
                    disableMainModal('#loginButton');
                    $.post({
                        url: window.apiURL + '/user/login',
                        data: JSON.stringify({
                            username: $('#loginUsername').val(),
                            password: $('#loginPassword').val(),
                        }),
                        processData: false,
                        contentType: 'application/json',
                        crossDomain: true,
                        timeout: 10000,
                    }).done(function (response) {
                        let user = $('#loginUsername').val();
                        let date = new Date();
                        date.setHours(date.getHours() + 168); // = 1 Woche
                        document.cookie = 'authToken=' + encodeURIComponent(response['token']) + '; expires=' + date.toUTCString() + '; path=/'; //SameSite=None; Secure"; geht nur bei HTTPS
                        document.cookie = 'username=' + encodeURIComponent(user) + '; expires=' + date.toUTCString() + '; path=/'; // SameSite=None; Secure"; geht nur bei HTTPS
                        $("a[href='#login']").addClass('d-none');
                        $("a[href='#register']").addClass('d-none');
                        $("a[href='#logout']").removeClass('d-none');
                        $('[data-current-user]').removeClass('d-none').html("<i class='fas fa-user-injured'></i> " + user);
                        $('#mainTabNav > li:last-of-type').removeClass('d-none');
                        bootstrap.Modal.getInstance($('#mainModal')[0]).hide();
                    }).fail(function (response) {
                        if (ajaxRequestErrors.hasOwnProperty(response['responseJSON']['error'])) {
                            $('#mainModal .modal-body').prepend(Alert.create('danger', ajaxRequestErrors[response['responseJSON']['error']]));
                        }
                        else {
                            $('#mainModal .modal-body').prepend(Alert.create('danger', response['status'] + ': ' + response['statusText']));
                        }
                    }).always(function () {
                        enableMainModal('#loginButton');
                    });
                }
            }
            Number.prototype.duration = function () {
                let sec_num = parseInt(this, 10);
                let weeks = Math.floor(sec_num / 3600 / 24 / 7);
                let days = Math.floor((sec_num / 3600 / 24) % 7);
                let hours = Math.floor((sec_num / 3600) % 24);
                let minutes = Math.floor((sec_num / 60) % 60);
                let seconds = sec_num % 60;
                let duration = '';
                if (weeks >= 1) {
                    duration += weeks + (weeks >= 2 ? ' Wochen, ' : ' Woche, ');
                }
                if (days >= 1) {
                    duration += days + (days >= 2 ? ' Tage, ' : ' Tag, ');
                }
                if (hours >= 1) {
                    duration += hours + (hours >= 2 ? ' Stunden, ' : ' Stunde, ');
                }
                if (minutes >= 1) {
                    duration += minutes + (minutes >= 2 ? ' Minuten, ' : ' Minute, ');
                }
                if (seconds >= 1) {
                    duration += seconds + (seconds >= 2 ? ' Sekunden, ' : ' Sekunde, ');
                }
                return duration.substr(0, duration.length - 2);
            };
            function readjustTables() {
                let collapses = ['#collapse-plants-actions', '#collapse-user-actions', '#collapse-pump-actions', '#collapse-logs-actions'];
                let element = null;
                let tableName = null;
                for (collapse of collapses) {
                    element = $("a[href='" + collapse + "']");
                    tableName = $(element).attr('data-table');
                    if (DataTable.isDataTable(tableName) && $(element).attr('aria-expanded') === 'true') {
                        adminDataTables[tableName].columns.adjust().draw();
                    }
                }
            }
            function updateSystemInfos() {
                if ($('#mainModal').hasClass('show') && $('#mainModal').attr('data-name') === 'systemInfos' && !isLoadingSystemInfos) {
                    isLoadingSystemInfos = true;
                    $.get({
                        url: window.apiURL + '/device/informations',
                        crossDomain: true,
                        timeout: 10000,
                    }).done(function (response) {
                        let statsText = '';
                        statsText += "<tr><td class='align-top'>Betriebssystem</td><td>" + response['type'] + ' ' + response['release'] + '</td></tr>';
                        statsText += "<tr><td class='align-top'>Architektur</td><td>" + response['arch'] + '</td></tr>';
                        statsText += "<tr><td class='align-top'>Hostname</td><td>" + response['hostname'] + '</td></tr>';
                        statsText += "<tr><td class='align-top'>CPU</td><td>" + response['cpus'][0]['model'];

                        for (let [index, cpu] of response['cpus'].entries()) {
                            statsText += '<div>CPU #' + index + ":<div class='ps-3'>Takt: " + cpu['speed'] + 'MHz</div></div>';
                        }

                        let totalMemory = (response['totalmem'] / 1024 / 1024 / 1024).toFixed(2);
                        let totalMemoryFree = (response['freememory'] / 1024 / 1024 / 1024).toFixed(2);
                        statsText += "<tr><td class='align-top'>RAM (Insgesamt)</td><td>" + totalMemory + ' GB</td></tr>';
                        statsText += "<tr><td class='align-top'>RAM (Verwendet)</td><td>" + (totalMemory - totalMemoryFree).toFixed(2) + ' GB (~' + (((totalMemory - totalMemoryFree) / totalMemory) * 100).toFixed(2) + ' %) </td></tr>';
                        statsText += "<tr><td class='align-top'>Durchschnittslast (1 Minute)</td><td>" + response['loadavg'][0] + '</td></tr>';
                        statsText += "<tr><td class='align-top'>Durchschnittslast (5 Minuten)</td><td>" + response['loadavg'][1] + '</td></tr>';
                        statsText += "<tr><td class='align-top'>Durchschnittslast (15 Minuten)</td><td>" + response['loadavg'][2] + '</td></tr>';
                        statsText += "<tr><td class='align-top'>Laufzeit</td><td>" + response['uptime'].duration() + '</td></tr>';
                        statsText += "<tr><td class='align-top'>Backend Version</td><td>" + response['version'] + '</td></tr>';
                        $('#systemInfosTable').html(statsText);
                    }).fail(function (response) {
                        console.log(response);
                    })
                    .always(function () {
                        isLoadingSystemInfos = false;
                    });
                }
            }
            function achso(callback, args = null) {
                callback.apply(this, args);
            }
            class Modal {
                static create(data = {}) {
                    if ($('#mainModal').hasClass('show')) {
                        $('#mainModal').hide();
                    }
                    $('#mainModal > div:first-of-type').removeClass('modal-sm modal-lg modal-xl modal-fullscreen modal-dialog-scrollable modal-dialog-centered');
                    $('#mainModal').removeAttr('data-bs-backdrop data-bs-keyboard');
                    $('#mainModal .modal-header > h4').empty();
                    $('#mainModal .modal-body').empty();
                    $('#mainModal .modal-footer').empty();
                    if (data.hasOwnProperty('name')) {
                        $('#mainModal').attr('data-name', data['name']);
                        if (data.hasOwnProperty('size') && ['sm', 'lg', 'xl', 'fullscreen'].includes(data['size'])) {
                            $('#mainModal > div:first-of-type').addClass('modal-' + data['size']);
                        }
                        if (data.hasOwnProperty('static') && data['static']) {
                            $('#mainModal').attr({ 'data-bs-backdrop': 'static', 'data-bs-keyboard': 'false' });
                        }
                        if (data.hasOwnProperty('title')) {
                            console.log(data.title);
                            if (data['title'].hasOwnProperty('text') && !['undefined', '', undefined, null].includes(data['title']['text'])) {
                                $('#mainModal .modal-header > h4').html(data['title']['text']);
                            }
                        }
                        if (data.hasOwnProperty('content')) {
                            if (data['content'].hasOwnProperty('options')) {
                                if (data['content']['options'].hasOwnProperty('scroll') && data['content']['options']['scroll']) {
                                    $('#mainModal > div:first-of-type').addClass('modal-dialog-scrollable');
                                }
                            }
                            if (data['content'].hasOwnProperty('text') && !['undefined', '', undefined, null].includes(data['content']['text'])) {
                                $('#mainModal .modal-body').html(data['content']['text']);
                            }
                        }
                        if (data.hasOwnProperty('footer')) {
                            if (data['footer'].hasOwnProperty('buttons')) {
                                if (data['footer']['buttons'].hasOwnProperty('default')) {
                                    let defaultButtonText = '';
                                    let defaultButtonClass = '';
                                    let defaultButton = $("<button type='button' data-bs-dismiss='modal' class='btn'>");
                                    if ((data['footer']['buttons'].hasOwnProperty('display') && data['footer']['buttons']['display']) || !data['footer']['buttons'].hasOwnProperty('display')) {
                                        if (data['footer']['buttons']['default'].hasOwnProperty('text') && !['undefined', '', undefined, null].includes(data['footer']['buttons']['default']['text'])) {
                                            defaultButtonText = data['footer']['buttons']['default']['text'];
                                        } else {
                                            defaultButtonText = 'Schließen';
                                        }
                                    }
                                    if (data['footer']['buttons']['default'].hasOwnProperty('class') && !['undefined', '', undefined, null].includes(data['footer']['buttons']['default']['class'])) {
                                        defaultButtonClass = data['footer']['buttons']['default']['class'];
                                    } else {
                                        defaultButtonClass = 'btn-secondary';
                                    }
                                    $(defaultButton).addClass(defaultButtonClass).html(defaultButtonText);
                                    if (data['footer']['buttons']['default'].hasOwnProperty('attributes')) {
                                        let attributes = Object.getOwnPropertyNames(data['footer']['buttons']['default']['attributes']);
                                        for (let attribute of attributes) {
                                            $(defaultButton).attr(attribute, data['footer']['buttons']['default']['attributes'][attribute]);
                                        }
                                    }
                                    $('#mainModal .modal-footer').append(defaultButton);
                                } else {
                                    $('#mainModal .modal-footer').append("<button type='button' class='btn btn-secondary' data-bs-dismiss='modal'>Schließen</button>");
                                }
                                if (data['footer']['buttons'].hasOwnProperty('custom')) {
                                    let customButtons = data['footer']['buttons']['custom'];
                                    for (let customButton of customButtons) {
                                        if (customButton.hasOwnProperty('text') && !['undefined', '', undefined, null].includes(customButton['text']) /*&& customButton.hasOwnProperty("actions") && !["undefined", undefined, null].includes(customButton["actions"])*/) {
                                            let currentButton = $("<button type='button' class='btn'>" + customButton['text'] + '</button>');
                                            if (customButton.hasOwnProperty('class') && !['undefined', '', undefined, null].includes(customButton['class'])) {
                                                $(currentButton).addClass(customButton['class']);
                                            } else {
                                                $(currentButton).addClass('btn-primary');
                                            }
                                            let actions = Object.getOwnPropertyNames(customButton['actions']);
                                            for (let action of actions) {
                                                if (customButton['actions'][action].hasOwnProperty('args') && typeof customButton['actions'][action]['function'] === 'object') {
                                                    $(currentButton).on(action, function () {
                                                        achso(customButton['actions'][action]['function'], customButton['actions'][action]['args']);
                                                    });
                                                } else if (typeof customButton['actions'][action]['function'] === 'function') {
                                                    $(currentButton).on(action, function () {
                                                        achso(customButton['actions'][action]['function']);
                                                    });
                                                }
                                            }
                                            if (customButton.hasOwnProperty('attributes')) {
                                                let attributes = Object.getOwnPropertyNames(customButton['attributes']);
                                                for (let attribute of attributes) {
                                                    $(currentButton).attr(attribute, customButton['attributes'][attribute]);
                                                }
                                            }
                                            $('#mainModal .modal-footer').prepend(currentButton);
                                        }
                                    }
                                }
                            } else {
                                $('#mainModal .modal-footer').append("<button type='button' class='btn btn-secondary' data-bs-dismiss='modal'>Schließen</button>");
                            }
                        } else {
                            $('#mainModal .modal-footer').append("<button type='button' class='btn btn-secondary' data-bs-dismiss='modal'>Schließen</button>");
                        }
                        if (data.hasOwnProperty('events')) {
                            let eventNames = { hide: 'hide.bs.modal', hidden: 'hidden.bs.modal', show: 'show.bs.modal', shown: 'shown.bs.modal', hidePrevented: 'hidePrevented.bs.modal' };
                            let events_ = Object.getOwnPropertyNames(data['events']);
                            for (let event_ of events_) {
                                if (eventNames.hasOwnProperty(event_)) {
                                    if (data['events'][event_].hasOwnProperty('args') && typeof data['events'][event_]['function'] === 'object') {
                                        $('#mainModal').one(eventNames[event_], function () {
                                            achso(data['events'][event_]['function'], data['events'][event_]['args']);
                                        });
                                    } else if (typeof data['events'][event_]['function'] === 'function') {
                                        $('#mainModal').one(eventNames[event_], function () {
                                            achso(data['events'][event_]['function']);
                                        });
                                    }
                                }
                            }
                        }
                        new bootstrap.Modal($('#mainModal')).show();
                    } else {
                        alert('Fehler: Es muss ein gültiger Name für den Dialog angegeben werden.');
                    }
                }
            }
            class Alert {
                static icons = {
                    danger: 'fas fa-exclamation-circle',
                    primary: 'fas fa-info-circle',
                    warning: 'fas fa-exclamation-triangle',
                    success: 'fas fa-check-circle',
                };
                static types = ['primary', 'success', 'danger', 'warning'];
                static alerts = [];
                constructor(type, message, options = {}) {
                    // options = {class: "", id = "", closeable = true}
                    type = Alert.types.includes(type.toLowerCase()) ? type.toLowerCase() : 'primary';
                    let text = '';
                    if (Array.isArray(message)) {
                        text = "<ul class='m-0 p-0' style='list-style-position: inside'>";
                        for (let msg of message) {
                            text += '<li>' + msg + '</li>';
                        }
                        text += '</ul>';
                    } else {
                        text = message;
                    }
                    let id;
                    if (!options.hasOwnProperty('id') || ['undefined', undefined, null, ''].includes(options['id'])) {
                        id = 'alert_' + type + '_' + (Date.now() + Number.parseInt(Math.random().toString().split('.')[1]));
                        while (Alert.alerts.includes(id)) {
                            id = 'alert_' + type + '_' + (Date.now() + Number.parseInt(Math.random().toString().split('.')[1]));
                        }
                    } else {
                        if ($('#' + options['id']).length >= 1) {
                            alert('Die ID "' + options['id'] + '" ist bereits einem Element zugeordnet.');
                            return;
                        }
                        id = options['id'];
                    }
                    let element;
                    let closeable = (options.hasOwnProperty('closeable') && options['closeable']) || !options.hasOwnProperty('closeable') ? true : false;
                    let classes = !options.hasOwnProperty('class') || ['undefined', undefined, null, ''].includes(options['class']) ? true : false;
                    element = '<div class="alert alert-' + type + ' alertBoxContainer' + (closeable ? ' alert-dismissible' : '') + (classes ? ' ' + options['class'] : '') + '" id="' + id + '">';
                    element += '<div class="alertBoxIcon ' + type + '">';
                    element += '<i class="' + Alert.icons[type] + '"></i>';
                    element += '</div><div class="alertBoxText d-flex align-items-center">';
                    if (closeable) {
                        element += '<button type="button" class="btn-close" data-bs-dismiss="alert"></button>';
                    }
                    element += text + '</div></div>';
                    Alert.alerts.push(id);
                    this.id = id;
                    this.type = type;
                    this.message = text;
                    this.options = options;
                    this.element = $(element).one('close.bs.alert', function () {
                        Alert.destroy($(this).attr('id'));
                    });
                }
                destroy() {
                    Alert.alerts.splice(Alert.alerts.indexOf(this.id), 1);
                    $('#' + this.id).remove();
                }
                static create(type, message, options = {}) {
                    type = Alert.types.includes(type.toLowerCase()) ? type.toLowerCase() : 'primary';
                    let text = '';
                    if (Array.isArray(message)) {
                        text = "<ul class='m-0 p-0' style='list-style-position: inside'>";
                        for (let msg of message) {
                            text += '<li>' + msg + '</li>';
                        }
                        text += '</ul>';
                    } else {
                        text = message;
                    }
                    let id;
                    if (!options.hasOwnProperty('id') || ['undefined', undefined, null, ''].includes(options['id'])) {
                        id = 'alert_' + type + '_' + (Date.now() + Number.parseInt(Math.random().toString().split('.')[1]));
                        while (Alert.alerts.includes(id)) {
                            id = 'alert_' + type + '_' + (Date.now() + Number.parseInt(Math.random().toString().split('.')[1]));
                        }
                    } else {
                        if ($('#' + options['id']).length >= 1) {
                            alert('Die ID "' + options['id'] + '" ist bereits einem Element zugeordnet.');
                            return;
                        }
                        id = options['id'];
                    }
                    let element;
                    let closeable = (options.hasOwnProperty('closeable') && options['closeable']) || !options.hasOwnProperty('closeable') ? true : false;
                    let classes = options.hasOwnProperty('class') && !['undefined', undefined, null, ''].includes(options['class']) ? true : false;
                    element = '<div class="alert alert-' + type + ' alertBoxContainer' + (closeable ? ' alert-dismissible' : '') + (classes ? ' ' + options['class'] : '') + '" id="' + id + '">';
                    element += '<div class="alertBoxIcon ' + type + '">';
                    element += '<i class="' + Alert.icons[type] + '"></i>';
                    element += '</div><div class="alertBoxText d-flex align-items-center">';
                    if (closeable) {
                        element += '<button type="button" class="btn-close" data-bs-dismiss="alert"></button>';
                    }
                    element += text + '</div></div>';
                    Alert.alerts.push(id);
                    return $(element).one('close.bs.alert', { id: id }, function (event) {
                        Alert.destroy(event['data']['id']);
                    });
                }
                static destroy(id) {
                    Alert.alerts.splice(Alert.alerts.indexOf(id), 1);
                    $('#' + id).remove();
                }
            }
            function getGalleryItems() {
                $('#getGalleryItemsButton').attr('disabled', 'disabled');
                $('#historyGalleryTimespanSelect').attr('disabled', 'disabled');
                if ($('#getGalleryItemsButton').find("[data-processing='true']").length === 0) {
                    $('#getGalleryItemsButton').prepend("<span data-processing='true' class='spinner-border spinner-border-sm align-middle ms-2 text-secondary kreiselchen'></span>");
                }
                let startDate = picker.getStartDate();
                let endDate = picker.getEndDate();
                if (startDate == null || endDate == null) {
                    startDate = new Date();
                    endDate = new Date();
                    startDate.setDate(1);
                    startDate.setHours(0, 0, 0);
                    endDate.setMonth(endDate.getMonth() + 1);
                    endDate.setDate(0);
                    endDate.setHours(23, 59, 59);
                } else {
                    startDate.setHours(0, 0, 0);
                    endDate.setHours(0, 0, 0);
                }
                let data = {
                    startTime: startDate.getTime(), // Zeitspanne; 0 = alles
                    endTime: endDate.getTime(),
                };
                $.post({
                    url: window.apiURL + '/plant/pictures',
                    data: JSON.stringify(data),
                    processData: false,
                    contentType: 'application/json',
                    crossDomain: true,
                    timeout: 10000,
                }).done(function (response) {
                    let images = '';
                    for (image of response) {
                        let time = new Date(Number.parseInt(image['creationTime']));
                        let date = time.toISOString();
                        let filename = image['filename'].match(/\/([^\/\\]+?)(\.[^\.]+?)$/i);
                        images += "<div class='historyGalleryItem d-flex flex-column p-2 justify-content-between' onclick='showHistoryGalleryImage(this)'><img src='" + image['filename'] + "' class='mw-100 mh-100 m-auto'>";
                        images += "<article><span class='text-secondary'>" + filename[1] + '</span><br>' + date.substring(8, 10) + "." + date.substring(5, 7) + "." + date.substring(0, 4) + ", " + date.substring(11, 19) + '</article></div>';
                    }
                    if (images.length >= 1) {
                        $('#historyGalleryPanel').html(images);
                    } else {
                        $('#historyGallery').prepend(Alert.create('primary', 'Für den angegebenen Zeitraum wurden keine Bilder gefunden.'));
                    }
                }).fail(function (response) {
                    $('#historyGallery').prepend(Alert.create('danger', response['status'] + ': ' + response['statusText']));
                }).always(function () {
                    $('#getGalleryItemsButton').removeAttr('disabled').find("[data-processing='true']").remove();
                    $('#historyGalleryTimespanSelect').removeAttr('disabled');
                });
            }
            function editPlant(wtf) {
                let plant = Number.parseInt(wtf);
                /*
                if (Number.isSafeInteger(plant)) {
                    let index = plantProperties.findIndex(key => key["id"] === plant);
                    if (index >= 0) {
                        if (isPlantEditingActive) {
                            let prompt = new Promise(function(resolve) {
                                resolve(confirmReplacePlantEditing(index));
                            });
                            prompt.then(function(value) {
                                $("#savechartOptions").attr("data-plant-id", wtf);
                                let tab = $("a[href='#plantsAdminOptionContainer']")[0];
                                $(tab).html("Bearbeitung");
                                $("#savechartOptions").html("<i class='fas fa-save'></i> Speichern");
                                $("#discardPlantButton").html("<i class='fas fa-times'></i> Abbrechen");
                                fillPlantInputs(wtf);
                                new bootstrap.Tab(tab).show();
                                bootstrap.Modal.getInstance($("#mainModal")[0]).hide();
                            });
                        }
                        else {
                            isPlantEditingActive = true;
                            $("#savechartOptions").attr("data-plant-id", wtf);
                            let tab = $("a[href='#plantsAdminOptionContainer']")[0];
                            $(tab).html("Bearbeitung");
                            $("#savechartOptions").html("<i class='fas fa-save'></i> Speichern");
                            $("#discardPlantButton").html("<i class='fas fa-times'></i> Abbrechen");
                            fillPlantInputs(wtf);
                            new bootstrap.Tab(tab).show();
                        }
                    }
                }
                */
            }
            /*
            function fillPlantInputs(wtf = null) {
                let selectedPlant = Number.parseInt(wtf);
                let index = plantProperties.findIndex(key => key["id"] === selectedPlant);
                if (index >= 0) {
                    if (isPlantEditingActive) {
                        $("#chartOptionDescriptionInput").val(plantProperties[index]["name"]);
                        if ($("#editPlantAlert").length === 0) {
                            $("#plantsAdminOptionContainer").prepend(Alert.create("primary", "Zurzeit ist die Bearbeitung der Pflanze &quot;" + plantProperties[index]["name"] + "&quot; (ID: " + plantProperties[index]["id"] + ") aktiv.", {id: "editPlantAlert"}));
                        }
                        else {
                            $("#editPlantAlert > .alertBoxText").html("Zurzeit ist die Bearbeitung der Pflanze &quot;" + plantProperties[index]["name"] + "&quot; (ID: " + plantProperties[index]["id"] + ") aktiv.");
                        }
                    }
                    let properties = Object.getOwnPropertyNames(plantProperties[index]["properties"]);
                    for (property of properties) {
                        let propertyName = property[0].toUpperCase() + property.substring(1, property.length);
                        let values = Object.getOwnPropertyNames(plantProperties[index]["properties"][property]);
                        for (value of values) {
                            let inputName = value[0].toUpperCase() + value.substring(1, value.length);
                            let inputElement = "#chartOption" + propertyName + inputName + "Input";
                            $(inputElement).val(plantProperties[index]["properties"][property][value]);
                        }
                    }
                }
            }
            */
            function confirmation(options = {}, resolve) {
                let data = {
                    name: 'confirmation',
                    title: {
                        text: options.hasOwnProperty('title') ? options['title'] : 'Bestätigung',
                    },
                    content: {
                        text: options.hasOwnProperty('content') ? options['content'] : 'Soll diese Aktion wirklich ausgeführt werden?',
                    },
                    footer: {
                        buttons: {
                            default: {
                                text: 'Nein',
                                class: 'btn-primary',
                            },
                            custom: [
                                {
                                    text: 'Ja',
                                    class: 'btn-danger',
                                    attributes: {
                                        id: 'confirmationButton',
                                    },
                                    actions: {
                                        click: {
                                            function: function () {
                                                resolve(true);
                                            },
                                        },
                                    },
                                },
                            ],
                        },
                    },
                };
                Modal.create(data);
            }
            function confirmPlantDeletion(plant) {
                let index = plantProperties.findIndex((key) => key['id'] === plant);
                if (index >= 0) {
                    let prompt = new Promise(function (resolve) {
                        confirmation(
                            {
                                title: 'Pflanze entfernen bestätigen',
                                content: 'Soll die Pflanze &quot;' + plantProperties[index]['name'] + '&quot; (ID: ' + plant + ') wirklich entfernt werden?',
                            },
                            resolve
                        );
                    });
                    prompt.then(function (value) {
                        if ($('#body-overlay').length == 0) {
                            $('body').prepend("<div id='body-overlay' style='background-color: transparent'></div>");
                        }
                        if ($('#confirmationButton').find("[data-processing='true']").length === 0) {
                            $('#confirmationButton').prepend("<span class='spinner-border me-1 text-white kreiselchen align-text-bottom' data-processing='true'></span>");
                        }
                        $('#mainModal .modal-footer > button').attr('disabled', 'disabled');
                        $("#mainModal .modal-header > [data-bs-dismiss='modal']").attr('disabled', 'disabled');
                        $('#mainModal .modal-body > .alert').remove();
                        let data = {
                            plant: plant,
                            token: getCookie('authToken'),
                        };
                        $.post({
                            url: '',
                            data: JSON.stringify(data),
                            processData: false,
                            contentType: 'application/json',
                            crossDomain: true,
                            timeout: 10000,
                        }).done(function (response) {
                                bootstrap.Modal.getInstance($('#mainModal')[0]).hide();
                        }).fail(function (response) {
                            $('#mainModal .modal-body').prepend(Alert.create('danger', response['status'] + ': ' + response['statusText']));
                        }).always(function () {
                            $('#confirmationButton').find("[data-processing='true']").remove();
                            $('#body-overlay').remove();
                            $('#mainModal .modal-footer > button').removeAttr('disabled');
                            $("#mainModal .modal-header > [data-bs-dismiss='modal']").removeAttr('disabled');
                        });
                    });
                }
            }
            function getCookie(cname) {
                let name = cname + '=';
                let ca = document.cookie.split(';');
                for (let i = 0; i < ca.length; i++) {
                    let c = ca[i];
                    while (c.charAt(0) === ' ') {
                        c = c.substring(1);
                    }
                    if (c.indexOf(name) === 0) {
                        return decodeURIComponent(c.substring(name.length, c.length));
                    }
                }
                return '';
            }
            $(window).on('load', function () {
                apiURLRequester.done(function(response) {
                    Object.defineProperty(window, "apiURL", {
                        value: "http://192.168.20.31:3005/api",
                        configurable: false,
                        writable: false
                    });
                }).fail(function(response) {
                    Object.defineProperty(window, "apiURL", {
                        //value: "http://10.20.45.5:3005/api",
                        value: "http://hydropoc.api.jongmans.net/api",
                        configurable: false,
                        writable: false
                    });
                }).always(function() {
                    viewportWidth = visualViewport['width'];
                    $('#body-overlay').empty();
                    $('#body-overlay').css('opacity', 0).on('transitionend', function () {
                        $(this).remove();
                        $('body').removeClass('overflow-hidden');
                    }).on('resize', function () {
                        if (visualViewport['width'] !== viewportWidth) {
                            viewportWidth = visualViewport['width'];
                        }
                    });
                    viewportWidth = visualViewport['width'];
                    $('#body-overlay').empty();
                    $('#body-overlay').css('opacity', 0).on('transitionend', function () {
                        $(this).remove();
                        $('body').removeClass('overflow-hidden');
                    }).on('resize', function () {
                        if (visualViewport['width'] !== viewportWidth) {
                            viewportWidth = visualViewport['width'];
                        }
                    });
                });
            });
            $(document).on('DOMContentLoaded', function () {
                apiURLRequester = $.get({
                    url: "http://192.168.20.31:3005",
                        crossDomain: true,
                        timeout: 3000,
                        data: JSON.stringify({data: "lol"})
                });
                if (getCookie('authToken').length >= 1 && getCookie('username').length >= 1) {
                    $("a[href='#login']").addClass('d-none');
                    $("a[href='#register']").addClass('d-none');
                    $("a[href='#logout']").removeClass('d-none');
                    $('[data-current-user]').removeClass('d-none').html("<i class='fas fa-user-injured'></i> " + getCookie('username'));
                    $('#mainTabNav > li:last-of-type').removeClass('d-none');
                }
                picker = new Litepicker({
                    element: $('#historyGalleryTimespanSelect')[0],
                    lang: 'de-de',
                    maxDays: 31,
                    singleMode: false,
                    tooltipText: { one: 'Tag', other: 'Tage' },
                    resetButton: true,
                });
                $("a[href='#systemInfos']").click(function () {
                    let content = "<table class='table-sm w-100'><thead>";
                    content += "<tr><th class='w-40'>Eigenschaft</th><th>Wert</th></tr>";
                    content += "</thead><tbody id='systemInfosTable'></tbody></table>";
                    let data = {
                        name: 'systemInfos',
                        size: 'lg',
                        events: {
                            hide: {
                                function: function (a) {
                                    if (systemInfosTimer !== null) {
                                        clearInterval(systemInfosTimer);
                                        systemInfosTimer = null;
                                    }
                                }
                            },
                            shown: {
                                function: function (o) {
                                    updateSystemInfos();
                                    systemInfosTimer = setInterval(updateSystemInfos, 5000);
                                }
                            }
                        },
                        title: {
                            text: 'Systeminformationen',
                        },
                        content: {
                            text: content,
                            options: {
                                scroll: true,
                            }
                        }
                    };
                    Modal.create(data);
                });
                $("a[href='#staff']").click(function () {
                    let content = "<table class='table-borderless'><thead></thead><tbody><tr><td class='align-text-top pe-3'>Projektleitung</td><td>Luca Israel<br>Jessica Gerken<br>Nils Harder<br>Fabian Beckmann<br>Darlien Rienits</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Konstruktion</td><td>Nils Berger<br>Kevin Gerken<br>Thees Brünjes<br>Abdul Al Akhdar</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Materialbeschaffung</td><td>Joris Dröge<br>Henrik Jarz<br>Nilds Harder<br>Tammo Karsten<br><s>Bim Töttger</s> Tim Böttger<br>Ali Daham</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Backend-Entwicklung</td><td>Paul Jongmanns<br>Fabian Beckmann</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Frontend-Entwicklung</td><td>Milan Kovacevic<br>Christian Sander<br>Fabian Rose</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Datenbankentwicklung</td><td>Lars Friedrich<br>Kevin Müller<br>Jan Breninek<br>Deon Gulbinat</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Elektronik</td><td>Matties Oldenburg<br>Tristan Muschalla<br>Marvin Bentley<br>Calvin Stelljes<br>Sandro Wriggers</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Statistik</td><td>Kevin Müller<br>Milan Kovacevic<br>René Schäfer<br>Emanuel Kass<br>Jan Breninek<br>Deon Gulbinat</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Dokumentation</td><td>Jessica Gerken</td></tr>";
                    content += '</tbody></table>';
                    let data = {
                        name: 'staff',
                        title: {
                            text: 'Mitwirkende',
                        },
                        content: {
                            options: {
                                scroll: true,
                            },
                            text: content
                        }
                    };
                    Modal.create(data);
                });
                $("a[href='#about']").click(function () {
                    let content = "<img src='img/logo_large.png' id='hydroPocLogo'><p>&quot;HydroPoc&quot;, ein hydroponisches System, ist ein Ganzjahresschulprojekt von der gesamten Klasse der IN20 an der BSDGG.</p>";
                    content += "<h4 class='mb-1'>Anschrift</h4><p>Berufliche Schule für Dienstleistung, Gewerbe und Gestaltung<br>Georg-Büchner-Str. 13<br>27574 Bremerhaven</p>";
                    content += "<h4 class='mb-1'>Kontakt</h4><p>Telefon: (0471) 30 94 650<br>Web: <a href='https://www.bsdgg.de' target='_blank'>https://www.bsdgg.de</a></p>";
                    let data = {
                        size: 'lg',
                        name: 'about',
                        events: {
                            hide: {
                                function: function () {
                                    $('#hydroPocLogo').off('click animationend');
                                }
                            }
                        },
                        title: {
                            text: 'Über'
                        },
                        content: {
                            text: content
                        }
                    };
                    Modal.create(data);
                    $('#hydroPocLogo').on('click', function () {
                        $(this).addClass('contract');
                    }).on('animationend', function (wtf) {
                        if (wtf['originalEvent']['animationName'] === 'contract') {
                            $(this).removeClass('contract').addClass('boing');
                        } else {
                            $(this).removeClass('boing');
                            this.offsetWidth;
                        }
                    });
                });
                $('#savechartOptions').click(function () {
                    $('#savechartOptionsSubmit').click();
                });
                $('#chartOptionsForm').submit(function () {
                    if ($('#savechartOptions').find("[data-processing='true']").length === 0) {
                        $('#savechartOptions').attr('disabled', 'disabled').prepend("<span data-processing='true' class='spinner-border spinner-border-sm align-middle ms-2 text-secondary kreiselchen'></span>");
                    }
                    let data = {
                        token: getCookie('authToken'),
                    };
                    /*et inputs = $("#chartOptionsFormContainer input");
                    for (input of inputs) {
                        data[$(input).attr("id").slice(8, -5)] = $(input).val();
                    }*/
                    $.post({
                        url: window.apiURL + '/plant/',
                        data: JSON.stringify(data),
                        processData: false,
                        contentType: 'application/json',
                        crossDomain: true,
                        timeout: 10000,
                    }).done(function (response) {}).fail(function (response) {
                        $('#chartOptionMenu').before(Alert.create('danger', response['status'] + ': ' + response['statusText'], { class: 'mt-3 position-relative' }));
                        scrollTo(0, $('#collapse-chart-actions > .card-body > .alert').last().offset()['top'] - 10);
                    }).always(function () {
                        $('#savechartOptions').find("[data-processing='true']").remove();
                        $('#savechartOptions').removeAttr('disabled');
                    });
                    return false;
                });
                $('#historyGalleryTimespanForm').submit(function () {
                    getGalleryItems();
                    return false;
                });
                $("a[href='#register']").on('click', function () {
                    let content = "<form enctype='text/plain' method='post' action='/' id='registerForm' class='w-100'><input type='submit' class='d-none' id='registerSubmit'><label for='registerUsername' class='form-label'>Benutzername:</label>";
                    content += "<input type='text' class='form-control' minlength='4' id='registerUsername' placeholder='Benutzername eingeben' required></div>";
                    content += "<div class='mt-3'><label for='registerPassword' class='form-label'>Passwort:</label>";
                    content += "<input type='password' class='form-control' minlength='6' id='registerPassword' placeholder='Passwort eingeben' required></div>";
                    content += "<div class='mt-3'><label for='registerConfirmPassword' class='form-label'>Passwort bestätigen:</label>";
                    content += "<input type='password' class='form-control' minlength='6' id='registerConfirmPassword' placeholder='Passwort bestätigen' required></div>";
                    let data = {
                        name: 'register',
                        events: {
                            show: {
                                function: function () {
                                    $('#registerForm').submit(function () {
                                        register();
                                        return false;
                                    });
                                    $('#registerPassword').on('input', function () {
                                        this.setCustomValidity('');
                                        this.checkValidity();
                                    }).on('invalid', function () {
                                        let minLength = Number.parseInt($(this).attr("minlength"));
                                        let currentLength = $(this).val().length;
                                        if ($(this).val().localeCompare($('#registerConfirmPassword').val()) !== 0) {
                                            this.setCustomValidity('Bitte geben Sie exakt das gleiche Passwort ein.');
                                        }
                                        else if (currentLength < minLength) {
                                            this.setCustomValidity('Bitte geben Sie mindestens noch ' + (minLength - currentLength) + ' Zeichen ein.');
                                        }
                                        else {
                                            this.setCustomValidity('Bitte füllen Sie dieses Feld aus.');
                                        }
                                    });
                                    $('#registerConfirmPassword').on('input', function () {
                                        this.setCustomValidity('');
                                        this.checkValidity();
                                    }).on('invalid', function () {
                                        let minLength = Number.parseInt($(this).attr("minlength"));
                                        let currentLength = $(this).val().length;
                                        if ($(this).val().localeCompare($('#registerPassword').val()) !== 0) {
                                            this.setCustomValidity('Bitte geben Sie exakt das gleiche Passwort ein.');
                                        }
                                        else if (currentLength < minLength) {
                                            this.setCustomValidity('Bitte geben Sie mindestens noch ' + (minLength - currentLength) + ' Zeichen ein.');
                                        }
                                        else {
                                            this.setCustomValidity('Bitte füllen Sie dieses Feld aus.');
                                        }
                                    });
                                }
                            },
                            hidden: {
                                function: function () {
                                    $('#registerForm').off('submit');
                                    $('#registerPassword').off('input invalid');
                                }
                            }
                        },
                        title: {
                            text: 'Registrieren',
                        },
                        content: {
                            text: content,
                        },
                        footer: {
                            buttons: {
                                default: {
                                    text: 'Abbrechen',
                                    class: 'btn-danger',
                                },
                                custom: [
                                    {
                                        text: 'Registrieren',
                                        class: 'btn-primary',
                                        attributes: {
                                            id: 'registerButton',
                                        },
                                        actions: {
                                            click: {
                                                function: function () {
                                                    $('#registerSubmit').click();
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    };
                    Modal.create(data);
                });
                $("a[href='#login']").on('click', function () {
                    let content = "<form enctype='text/plain' method='post' action='/' id='loginForm' class='w-100'><input type='submit' class='d-none' id='loginSubmit'><label for='loginUsername' class='form-label'>Benutzername:</label>";
                    content += "<input type='text' class='form-control' id='loginUsername' placeholder='Benutzername eingeben' required></div>";
                    content += "<div class='mt-3'><label for='loginPassword' class='form-label'>Passwort:</label>";
                    content += "<input type='password' class='form-control' id='loginPassword' placeholder='Passwort eingeben' required></div>";
                    content += "<a href='#' class='mt-2'>Ich habe mein Passwort vergessen!</a></form>";
                    let data = {
                        name: 'login',
                        events: {
                            shown: {
                                function: function () {
                                    $('#loginForm').submit(function () {
                                        login();
                                        return false;
                                    });
                                }
                            },
                            hidden: {
                                function: function () {
                                    $('#loginForm').off('submit');
                                }
                            }
                        },
                        title: {
                            text: 'Anmelden',
                        },
                        content: {
                            text: content,
                        },
                        footer: {
                            buttons: {
                                default: {
                                    text: 'Abbrechen',
                                    class: 'btn-danger',
                                },
                                custom: [
                                    {
                                        text: 'Anmelden',
                                        class: 'btn-primary',
                                        attributes: {
                                            id: 'loginButton',
                                        },
                                        actions: {
                                            click: {
                                                function: function () {
                                                    $('#loginSubmit').click();
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    };
                    Modal.create(data);
                });
                $("a[href='#logout']").on('click', function () {
                    document.cookie = 'authToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/';
                    document.cookie = 'username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/';
                    $("a[href='#login']").removeClass('d-none');
                    $("a[href='#register']").removeClass('d-none');
                    $("a[href='#logout']").addClass('d-none');
                    $('[data-current-user]').addClass('d-none').html('');
                    $('#mainTabNav > li:last-of-type').addClass('d-none');
                });
                $('.chart-history-button').click(function () {
                    $('#chartHistoryElementTitle').html($(this).attr('data-chart-title'));
                    $('#chartHistoryModal').attr('data-chart', $(this).attr('data-chart'));
                    new bootstrap.Modal($('#chartHistoryModal')[0]).show();
                });
                let date = new Date();
                $('footer').html('&copy; ' + '2021-' + date.getFullYear() + ' BSDGG/IN20');
                $('#user-actions-accordion').on('shown.bs.collapse', function () {
                    if (!DataTable.isDataTable('#userAccountsAdminTable')) {
                        options = {};
                        Object.assign(options, dataTablesAdminOptions['userAccounts']);
                        options["ajax"]["url"] = apiURL + '/user/list';
                        adminDataTables['userAccounts'] = $('#userAccountsAdminTable').DataTable(options);
                    }
                });
                $('#pump-actions-accordion').on('shown.bs.collapse', function () {
                    if (!DataTable.isDataTable('#pumpsAdminTable')) {
                        adminDataTables['pumps'] = $('#pumpsAdminTable').DataTable(dataTablesAdminOptions['pumps']);
                    }
                });
                $('#collapse-logs-actions').on('shown.bs.collapse', function () {
                    if (!DataTable.isDataTable('#logsAdminTable')) {
                        let options = {};
                        Object.assign(options, dataTablesAdminOptions['logs']);
                        options["ajax"]["url"] = apiURL + '/device/logs';
                        adminDataTables['logs'] = $('#logsAdminTable').DataTable(options);
                    }
                });
                $('#collapse-plants-actions').on('shown.bs.collapse', function (element) {
                    if ($(element['target']).attr('data-bs-parent') === '#plants-accordion') {
                        if (!DataTable.isDataTable('#plantsAdminTable')) {
                            let options = {};
                            Object.assign(options, dataTablesAdminOptions['plants']);
                            options["ajax"]["url"] = apiURL + '/device/logs';
                            adminDataTables['plants'] = $('#plantsAdminTable').DataTable(options);
                        }
                    }
                });
                // DataTables-Layout neu berechnen, wenn sich die Bildschirmbreite ändert, wenn Administrationsseite nicht aktiv war
                $("a[href='#administration']").on('shown.bs.tab', function () {
                    if (visualViewport['width'] != viewportWidth) {
                        readjustTables();
                    }
                });
                $('#chartHistoryModal').on('show.bs.modal', function () {
                    let sensor = $(this).attr('data-chart');
                    if (!['undefined', '', undefined, null].includes(sensor)) {
                        charts['history']['options']['scales']['y']['min'] = charts['scales'][sensor][0];
                        charts['history']['options']['scales']['y']['max'] = charts['scales'][sensor][1];
                        getHistoryChartData(sensor);
                    }
                });
                charts['current']['co2_level'] = new Chart($('#co2-chart-current')[0].getContext('2d'), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    pointStyle: 'rect',
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                },
                            },
                        },
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                    callback: function (val, index) {
                                        return index % 4 === 0 ? charts['current']['co2_level']['data']['labels'][index] : '';
                                    },
                                },
                            },
                            y: {
                                min: charts['scales']['co2_level'][0],
                                max: charts['scales']['co2_level'][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                },
                            },
                        },
                    },
                    type: 'line',
                    data: {
                        datasets: [
                            {
                                label: 'Aktueller Wert',
                                stack: 'current',
                                borderColor: getCSSVar('--chart-current-border'),
                                backgroundColor: 'rgba(0, 0, 0, 0.75)',
                                borderWidth: 1,
                            },
                            {
                                label: 'Mittelwert',
                                stack: 'middle',
                                borderColor: getCSSVar('--chart-middle-border'),
                                backgroundColor: 'rgba(0, 255, 0, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Sollwert',
                                stack: 'setpoint',
                                borderColor: getCSSVar('--chart-setpoint-border'),
                                backgroundColor: 'rgba(253, 126, 20, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Eingriffsgrenze',
                                stack: 'upperControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Warngrenze',
                                stack: 'upperWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Eingriffsgrenze',
                                stack: 'lowerControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Warngrenze',
                                stack: 'lowerWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Pumpenaktivität #1',
                                stack: 'pump-1',
                                borderColor: getCSSVar('--chart-activity-1-border'),
                                backgroundColor: 'rgba(112, 146, 190, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                            {
                                label: 'Pumpenaktivität #2',
                                stack: 'pump-2',
                                borderColor: getCSSVar('--chart-activity-2-border'),
                                backgroundColor: 'rgba(142, 192, 109, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                        ],
                    },
                });
                charts['current']['temperature_water'] = new Chart($('#temperature-water-chart-current')[0].getContext('2d'), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: 'rect',
                                },
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                boxPadding: 3,
                            },
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10,
                            },
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                    callback: function (val, index) {
                                        return index % 4 === 0 ? charts['current']['temperature_water']['data']['labels'][index] : '';
                                    },
                                },
                            },
                            y: {
                                min: charts['scales']['temperature_water'][0],
                                max: charts['scales']['temperature_water'][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                },
                            },
                        },
                    },
                    type: 'line',
                    data: {
                        datasets: [
                            {
                                label: 'Aktueller Wert',
                                stack: 'current',
                                borderColor: getCSSVar('--chart-current-border'),
                                backgroundColor: 'rgba(0, 0, 0, 0.75)',
                                borderWidth: 1,
                            },
                            {
                                label: 'Mittelwert',
                                stack: 'middle',
                                borderColor: getCSSVar('--chart-middle-border'),
                                backgroundColor: 'rgba(0, 255, 0, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Sollwert',
                                stack: 'setpoint',
                                borderColor: getCSSVar('--chart-setpoint-border'),
                                backgroundColor: 'rgba(253, 126, 20, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Eingriffsgrenze',
                                stack: 'upperControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Warngrenze',
                                stack: 'upperWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Eingriffsgrenze',
                                stack: 'lowerControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Warngrenze',
                                stack: 'lowerWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Pumpenaktivität #1',
                                stack: 'pump-1',
                                borderColor: getCSSVar('--chart-activity-1-border'),
                                backgroundColor: 'rgba(112, 146, 190, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                            {
                                label: 'Pumpenaktivität #2',
                                stack: 'pump-2',
                                borderColor: getCSSVar('--chart-activity-2-border'),
                                backgroundColor: 'rgba(142, 192, 109, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                        ],
                    },
                });
                charts['current']['temperature_air'] = new Chart($('#temperature-air-chart-current')[0].getContext('2d'), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: 'rect',
                                },
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                boxPadding: 3,
                            },
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10,
                            },
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                    callback: function (val, index) {
                                        return index % 4 === 0 ? charts['current']['temperature_air']['data']['labels'][index] : '';
                                    },
                                },
                            },
                            y: {
                                min: charts['scales']['temperature_air'][0],
                                max: charts['scales']['temperature_air'][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                },
                            },
                        },
                    },
                    type: 'line',
                    data: {
                        datasets: [
                            {
                                label: 'Aktueller Wert',
                                stack: 'current',
                                borderColor: getCSSVar('--chart-current-border'),
                                backgroundColor: 'rgba(0, 0, 0, 0.75)',
                                borderWidth: 1,
                            },
                            {
                                label: 'Mittelwert',
                                stack: 'middle',
                                borderColor: getCSSVar('--chart-middle-border'),
                                backgroundColor: 'rgba(0, 255, 0, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Sollwert',
                                stack: 'setpoint',
                                borderColor: getCSSVar('--chart-setpoint-border'),
                                backgroundColor: 'rgba(253, 126, 20, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Eingriffsgrenze',
                                stack: 'upperControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Warngrenze',
                                stack: 'upperWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Eingriffsgrenze',
                                stack: 'lowerControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Warngrenze',
                                stack: 'lowerWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Pumpenaktivität #1',
                                stack: 'pump-1',
                                borderColor: getCSSVar('--chart-activity-1-border'),
                                backgroundColor: 'rgba(112, 146, 190, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                            {
                                label: 'Pumpenaktivität #2',
                                stack: 'pump-2',
                                borderColor: getCSSVar('--chart-activity-2-border'),
                                backgroundColor: 'rgba(142, 192, 109, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                        ],
                    },
                });
                charts['current']['swimmer_1'] = new Chart($('#swimmer-1-chart-current')[0].getContext('2d'), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: 'rect',
                                },
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                boxPadding: 3,
                            },
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10,
                            },
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                    callback: function (val, index) {
                                        return index % 4 === 0 ? charts['current']['swimmer_1']['data']['labels'][index] : '';
                                    },
                                },
                            },
                            y: {
                                min: charts['scales']['swimmer_1'][0],
                                max: charts['scales']['swimmer_1'][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                },
                            },
                        },
                    },
                    type: 'line',
                    data: {
                        datasets: [
                            {
                                label: 'Aktueller Wert',
                                stack: 'current',
                                borderColor: getCSSVar('--chart-current-border'),
                                backgroundColor: 'rgba(0, 0, 0, 0.75)',
                                borderWidth: 1,
                            },
                            {
                                label: 'Mittelwert',
                                stack: 'middle',
                                borderColor: getCSSVar('--chart-middle-border'),
                                backgroundColor: 'rgba(0, 255, 0, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Sollwert',
                                stack: 'setpoint',
                                borderColor: getCSSVar('--chart-setpoint-border'),
                                backgroundColor: 'rgba(253, 126, 20, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Eingriffsgrenze',
                                stack: 'upperControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Warngrenze',
                                stack: 'upperWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Eingriffsgrenze',
                                stack: 'lowerControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Warngrenze',
                                stack: 'lowerWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Pumpenaktivität #1',
                                stack: 'pump-1',
                                borderColor: getCSSVar('--chart-activity-1-border'),
                                backgroundColor: 'rgba(112, 146, 190, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                            {
                                label: 'Pumpenaktivität #2',
                                stack: 'pump-2',
                                borderColor: getCSSVar('--chart-activity-2-border'),
                                backgroundColor: 'rgba(142, 192, 109, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                        ],
                    },
                });
                charts['current']['ec_value'] = new Chart($('#ec-chart-current')[0].getContext('2d'), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: 'rect',
                                },
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                boxPadding: 3,
                            },
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10,
                            },
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                    callback: function (val, index) {
                                        return index % 4 === 0 ? charts['current']['ec_value']['data']['labels'][index] : '';
                                    },
                                },
                            },
                            y: {
                                min: charts['scales']['ec_value'][0],
                                max: charts['scales']['ec_value'][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                },
                            },
                        },
                    },
                    type: 'line',
                    data: {
                        datasets: [
                            {
                                label: 'Aktueller Wert',
                                stack: 'current',
                                borderColor: getCSSVar('--chart-current-border'),
                                backgroundColor: 'rgba(0, 0, 0, 0.75)',
                                borderWidth: 1,
                            },
                            {
                                label: 'Mittelwert',
                                stack: 'middle',
                                borderColor: getCSSVar('--chart-middle-border'),
                                backgroundColor: 'rgba(0, 255, 0, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Sollwert',
                                stack: 'setpoint',
                                borderColor: getCSSVar('--chart-setpoint-border'),
                                backgroundColor: 'rgba(253, 126, 20, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Eingriffsgrenze',
                                stack: 'upperControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Warngrenze',
                                stack: 'upperWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Eingriffsgrenze',
                                stack: 'lowerControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Warngrenze',
                                stack: 'lowerWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Pumpenaktivität #1',
                                stack: 'pump-1',
                                borderColor: getCSSVar('--chart-activity-1-border'),
                                backgroundColor: 'rgba(112, 146, 190, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                            {
                                label: 'Pumpenaktivität #2',
                                stack: 'pump-2',
                                borderColor: getCSSVar('--chart-activity-2-border'),
                                backgroundColor: 'rgba(142, 192, 109, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                        ],
                    },
                });
                charts['current']['humidity'] = new Chart($('#humidity-chart-current')[0].getContext('2d'), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: 'rect',
                                },
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                boxPadding: 3,
                            },
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10,
                            },
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                    callback: function (val, index) {
                                        return index % 4 === 0 ? charts['current']['humidity']['data']['labels'][index] : '';
                                    },
                                },
                            },
                            y: {
                                min: charts['scales']['humidity'][0],
                                max: charts['scales']['humidity'][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                },
                            },
                        },
                    },
                    type: 'line',
                    data: {
                        datasets: [
                            {
                                label: 'Aktueller Wert',
                                stack: 'current',
                                borderColor: getCSSVar('--chart-current-border'),
                                backgroundColor: 'rgba(0, 0, 0, 0.75)',
                                borderWidth: 1,
                            },
                            {
                                label: 'Mittelwert',
                                stack: 'middle',
                                borderColor: getCSSVar('--chart-middle-border'),
                                backgroundColor: 'rgba(0, 255, 0, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Sollwert',
                                stack: 'setpoint',
                                borderColor: getCSSVar('--chart-setpoint-border'),
                                backgroundColor: 'rgba(253, 126, 20, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Eingriffsgrenze',
                                stack: 'upperControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Warngrenze',
                                stack: 'upperWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Eingriffsgrenze',
                                stack: 'lowerControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Warngrenze',
                                stack: 'lowerWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Pumpenaktivität #1',
                                stack: 'pump-1',
                                borderColor: getCSSVar('--chart-activity-1-border'),
                                backgroundColor: 'rgba(112, 146, 190, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                            {
                                label: 'Pumpenaktivität #2',
                                stack: 'pump-2',
                                borderColor: getCSSVar('--chart-activity-2-border'),
                                backgroundColor: 'rgba(142, 192, 109, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                        ],
                    },
                });
                charts['current']['ph_value'] = new Chart($('#ph-chart-current')[0].getContext('2d'), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: 'rect',
                                },
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                boxPadding: 3,
                            },
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10,
                            },
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                    callback: function (val, index) {
                                        return index % 4 === 0 ? charts['current']['ph_value']['data']['labels'][index] : '';
                                    },
                                },
                            },
                            y: {
                                min: charts['scales']['ph_value'][0],
                                max: charts['scales']['ph_value'][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                },
                            },
                        },
                    },
                    type: 'line',
                    data: {
                        datasets: [
                            {
                                label: 'Aktueller Wert',
                                stack: 'current',
                                borderColor: getCSSVar('--chart-current-border'),
                                backgroundColor: 'rgba(0, 0, 0, 0.75)',
                                borderWidth: 1,
                            },
                            {
                                label: 'Mittelwert',
                                stack: 'middle',
                                borderColor: getCSSVar('--chart-middle-border'),
                                backgroundColor: 'rgba(0, 255, 0, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Sollwert',
                                stack: 'setpoint',
                                borderColor: getCSSVar('--chart-setpoint-border'),
                                backgroundColor: 'rgba(253, 126, 20, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Eingriffsgrenze',
                                stack: 'upperControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Warngrenze',
                                stack: 'upperWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Eingriffsgrenze',
                                stack: 'lowerControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Warngrenze',
                                stack: 'lowerWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Pumpenaktivität #1',
                                stack: 'pump-1',
                                borderColor: getCSSVar('--chart-activity-1-border'),
                                backgroundColor: 'rgba(112, 146, 190, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                            {
                                label: 'Pumpenaktivität #2',
                                stack: 'pump-2',
                                borderColor: getCSSVar('--chart-activity-2-border'),
                                backgroundColor: 'rgba(142, 192, 109, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                        ],
                    },
                });
                charts['current']['swimmer_2'] = new Chart($('#swimmer-2-chart-current')[0].getContext('2d'), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: 'rect',
                                },
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                boxPadding: 3,
                            },
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10,
                            },
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                    callback: function (val, index) {
                                        return index % 4 === 0 ? charts['current']['swimmer_2']['data']['labels'][index] : '';
                                    },
                                },
                            },
                            y: {
                                min: charts['scales']['swimmer_2'][0],
                                max: charts['scales']['swimmer_2'][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                },
                            },
                        },
                    },
                    type: 'line',
                    data: {
                        datasets: [
                            {
                                label: 'Aktueller Wert',
                                stack: 'current',
                                borderColor: getCSSVar('--chart-current-border'),
                                backgroundColor: 'rgba(0, 0, 0, 0.75)',
                                borderWidth: 1,
                            },
                            {
                                label: 'Mittelwert',
                                stack: 'middle',
                                borderColor: getCSSVar('--chart-middle-border'),
                                backgroundColor: 'rgba(0, 255, 0, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Sollwert',
                                stack: 'setpoint',
                                borderColor: getCSSVar('--chart-setpoint-border'),
                                backgroundColor: 'rgba(253, 126, 20, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Eingriffsgrenze',
                                stack: 'upperControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Warngrenze',
                                stack: 'upperWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Eingriffsgrenze',
                                stack: 'lowerControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Warngrenze',
                                stack: 'lowerWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Pumpenaktivität #1',
                                stack: 'pump-1',
                                borderColor: getCSSVar('--chart-activity-2-border'),
                                backgroundColor: 'rgba(142, 192, 109, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                            {
                                label: 'Pumpenaktivität #2',
                                stack: 'pump-2',
                                borderColor: getCSSVar('--chart-activity-1-border'),
                                backgroundColor: 'rgba(112, 146, 190, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                        ],
                    },
                });
                charts['current']['swimmer_3'] = new Chart($('#swimmer-3-chart-current')[0].getContext('2d'), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: 'rect',
                                },
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                boxPadding: 3,
                            },
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10,
                            },
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                    callback: function (val, index) {
                                        return index % 4 === 0 ? charts['current']['swimmer_3']['data']['labels'][index] : '';
                                    },
                                },
                            },
                            y: {
                                min: charts['scales']['swimmer_3'][0],
                                max: charts['scales']['swimmer_3'][1],
                            },
                        },
                    },
                    type: 'line',
                    data: {
                        datasets: [
                            {
                                label: 'Aktueller Wert',
                                stack: 'current',
                                borderColor: getCSSVar('--chart-current-border'),
                                backgroundColor: 'rgba(0, 0, 0, 0.75)',
                                borderWidth: 1,
                            },
                            {
                                label: 'Mittelwert',
                                stack: 'middle',
                                borderColor: getCSSVar('--chart-middle-border'),
                                backgroundColor: 'rgba(0, 255, 0, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Sollwert',
                                stack: 'setpoint',
                                borderColor: getCSSVar('--chart-setpoint-border'),
                                backgroundColor: 'rgba(253, 126, 20, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Eingriffsgrenze',
                                stack: 'upperControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Warngrenze',
                                stack: 'upperWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Eingriffsgrenze',
                                stack: 'lowerControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Warngrenze',
                                stack: 'lowerWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Pumpenaktivität #1',
                                stack: 'pump-1',
                                borderColor: getCSSVar('--chart-activity-1-border'),
                                backgroundColor: 'rgba(112, 146, 190, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                            {
                                label: 'Pumpenaktivität #2',
                                stack: 'pump-2',
                                borderColor: getCSSVar('--chart-activity-2-border'),
                                backgroundColor: 'rgba(142, 192, 109, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'line',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(112, 146, 190, 0.5)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                        ],
                    },
                });
                charts['history'] = new Chart($('#history-chart')[0].getContext('2d'), {
                    type: 'line',
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: 'rect',
                                    font: {
                                        size: 14,
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                },
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                },
                                boxPadding: 3,
                            },
                        },
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                    callback: function (val, index) {
                                        return index % 4 === 0 ? charts['history']['data']['labels'][index] : '';
                                    },
                                },
                            },
                            y: {
                                min: 0,
                                max: 100,
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'",
                                    },
                                },
                            },
                        },
                    },
                    data: {
                        datasets: [
                            {
                                label: 'Messwert',
                                stack: 'measured',
                                borderColor: 'rgb(0, 0, 0)',
                                backgroundColor: 'rgba(0, 0, 0, 0.75)',
                                borderWidth: 1,
                                pointStyle: 'circle',
                                fill: {
                                    target: 'start',
                                    above: function (context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, { 0: 'rgba(0, 0, 0, 0.3)', 1: 'rgba(255, 255, 255, 0.5)' });
                                    },
                                },
                            },
                            {
                                label: 'Mittelwert',
                                stack: 'middle',
                                borderColor: 'rgb(0, 255, 0)',
                                backgroundColor: 'rgba(0, 255, 0, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Höchstwert',
                                stack: 'highest',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'circle',
                            },
                            {
                                label: 'Tiefstwert',
                                stack: 'lowest',
                                borderColor: 'rgb(72, 61, 139)',
                                backgroundColor: 'rgba(72, 61, 139, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'circle',
                            },
                            {
                                label: 'Sollwert',
                                stack: 'setpoint',
                                borderColor: getCSSVar('--chart-setpoint-border'),
                                backgroundColor: 'rgba(253, 126, 20, 0.75)',
                                borderWidth: 2,
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Eingriffsgrenze',
                                stack: 'upperControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Obere Warngrenze',
                                stack: 'upperWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Eingriffsgrenze',
                                stack: 'lowerControlLimit',
                                borderColor: getCSSVar('--chart-control-limit-border'),
                                backgroundColor: 'rgba(220, 53, 69, 0.75)',
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: 'line',
                            },
                            {
                                label: 'Untere Warngrenze',
                                stack: 'lowerWarningLimit',
                                borderColor: getCSSVar('--chart-warning-limit-border'),
                                backgroundColor: 'rgba(255, 127, 39, 0.75)',
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: 'line',
                            },
                        ],
                    },
                });
                $("[data-bs-toggle='collapse']").click(function () {
                    $(this)
                        .children('i:last-of-type')
                        .css('transform', $(this).attr('aria-expanded') === 'true' ? 'rotate(180deg)' : 'rotate(0deg)');
                });
                $('#historyTimespan').change(function () {
                    let sensor = $('#chartHistoryModal').attr('data-chart');
                    if (!['undefined', '', undefined, null].includes(sensor)) {
                        getHistoryChartData(sensor);
                    }
                });
                /*
                $('#historyGalleryTimespanSelect').change(function () {
                    let that = this;
                    $('#historyGallery').find('.alert').remove();
                    $(this).attr('disabled', 'disabled').after("<span class='spinner-border ms-2 text-primary kreiselchen' style='flex: 0 0 auto' data-processing='true'></span>");
                    let data = {
                        token: getCookie('authToken'),
                        history: $(this).val(),
                    };
                    $.post({
                        url: 'history_charts_data.php',
                        data: JSON.stringify(data),
                        processData: false,
                        contentType: 'application/json',
                        crossDomain: true,
                        timeout: 10000,
                    })
                        .done(function (response) {})
                        .fail(function (response) {
                            $('#historyGallery').prepend(Alert.create('danger', response['status'] + ': ' + response['statusText']));
                        })
                        .always(function () {
                            $(that).removeAttr('disabled');
                            $('#historyGallery').find("[data-processing='true']").remove();
                        });
                });*/
                setInterval(function () {
                    if (!isLoadingCurrentChartData) {
                        isLoadingCurrentChartData = true;
                        $.post({
                            url: window.apiURL + '/sensor/data',
                            data: JSON.stringify({ amount: 13 }),
                            processData: false,
                            contentType: 'application/json',
                            crossDomain: true,
                            timeout: 10000,
                        }).done(function (response) {
                            response["sensors"].reverse();
                            let types = Object.getOwnPropertyNames(response['limits']);
                            let labels = [];
                            let indexCurrent = -1;
                            for (let [iteration, sensor] of response['sensors'].entries()) {
                                let date = new Date(Number.parseInt(sensor['timestamp']));
                                if (labels.length <= 13) {
                                    labels.push(date.toLocaleTimeString());
                                }
                                else {
                                    labels.reverse();
                                }
                                for (type of types) {
                                    if (!['id', 'timestamp'].includes(type) && charts['current'].hasOwnProperty(type)) {
                                        if (charts['current'][type]['data']['labels'].length >= 13) {
                                            charts['current'][type]['data']['labels'] = [];
                                        }
                                        charts['current'][type]['data']['labels'].push(date.toLocaleTimeString());
                                        indexCurrent = charts['current'][type]['data']['datasets'].findIndex(key => key['stack'] === 'current');
                                        let indexMiddle = charts['current'][type]['data']['datasets'].findIndex(key => key['stack'] === 'middle');
                                        if (indexCurrent >= 0) {
                                            if (charts['current'][type]['data']['datasets'][indexCurrent]['data'].length >= 13) {
                                                charts['current'][type]['data']['datasets'][indexCurrent]['data'] = [];
                                            }
                                            charts['current'][type]['data']['datasets'][indexCurrent]['data'].push({ x: date.toLocaleTimeString(), y: sensor[type] });
                                            for (pump of response['pumpactivity']) {
                                                if (pump['status']) {
                                                    let indexPump = charts['current'][type]['data']['datasets'].findIndex(key => key['stack'] === 'pump-' + pump['id'].toString());
                                                    if (indexPump >= 0) {
                                                        if (charts['current'][type]['data']['datasets'][indexPump]['data'].length >= 13) {
                                                            charts['current'][type]['data']['datasets'][indexPump]['data'] = [];
                                                        }
                                                        charts['current'][type]['data']['datasets'][indexPump]['data'].push({ x: date.toLocaleTimeString(), y: sensor[type] });
                                                    }
                                                }
                                            }
                                        }
                                        if (indexMiddle >= 0) {
                                            if (charts['current'][type]['data']['datasets'][indexMiddle]['data'].length >= 13) {
                                                charts['current'][type]['data']['datasets'][indexMiddle]['data'] = [];
                                            }
                                            charts['current'][type]['data']['datasets'][indexMiddle]['data'].push({ x: date.toLocaleTimeString(), y: sensor[type] });
                                        }
                                        let limits = Object.getOwnPropertyNames(response['limits'][type]);
                                        for (limit of limits) {
                                            let indexLimit = charts['current'][type]['data']['datasets'].findIndex(key => key['stack'] === limit);
                                            if (indexLimit >= 0) {
                                                if (charts['current'][type]['data']['datasets'][indexLimit]['data'].length >= 13) {
                                                    charts['current'][type]['data']['datasets'][indexLimit]['data'] = [];
                                                }
                                                charts['current'][type]['data']['datasets'][indexLimit]['data'].push({ x: date.toLocaleTimeString(), y: response['limits'][type][limit] });
                                            }
                                        }
                                        if (iteration === 12) {
                                            charts['current'][type]['options']['scales']['x']['min'] = labels[0];
                                            charts['current'][type]['options']['scales']['x']['max'] = labels[labels.length -1];
                                            charts['current'][type].update('none'); // Sehr rechenintensiv bei zeitgleicher Aktualisierung aller Diagramme
                                            let lastCurrentValue = charts['current'][type]['data']['datasets'][indexCurrent]['data'][labels.length -1]['y'];
                                            if (lastCurrentValue > response['limits'][type]['upperWarningLimit'] && lastCurrentValue < response['limits'][type]['upperControlLimit']) {
                                                switchAlert(type, 'warning');
                                            } else if (lastCurrentValue > response['limits'][type]['upperControlLimit']) {
                                                switchAlert(type, 'danger');
                                            } else if (lastCurrentValue < response['limits'][type]['lowerWarningLimit'] && lastCurrentValue > response['limits'][type]['lowerControlLimit']) {
                                                switchAlert(type, 'warning');
                                            } else if (lastCurrentValue < response['limits'][type]['lowerControlLimit']) {
                                                switchAlert(type, 'danger');
                                            } else {
                                                $(type).removeClass('danger warning success');
                                            }
                                            $('#section-' + type + '> div:last-of-type > canvas').css('visibility', 'visible');
                                            $('#section-' + type + '> div:last-of-type > .chart-overlay ').css('display', 'none');
                                        }
                                    }
                                }
                            }
                        }).fail(function (response) {
                            $('#overview > .legendContainer').first().after(Alert.create('danger', response['status'] + ': ' + response['statusText'], { class: "mt-3" }));
                        }).always(function () {
                            isLoadingCurrentChartData = false;
                        });
                    }
                }, 5000);
                /*setInterval(function() {
                    // "current" gilt für das Diagramm der letzten Minute, "history" ist für das Verlaufsdiagramm
                    if (!isLoadingCurrentChartData) {
                        isLoadingCurrentChartData = true;
                        $.post("current_charts_data.php", {
                            labels: JSON.stringify(charts["current"]["co2"]["data"]["labels"]),
                            actuators: JSON.stringify(actuators)
                        }).done(function(response) {
                            let data = JSON.parse(response);
                            let items = Object.keys(data);
                            // item = Sensor, z.B. co2
                            for (item of items) {
                                if (charts["current"].hasOwnProperty(item)) {
                                    // chart z.B. "current"
                                    Object.assign(charts["current"][item]["data"]["labels"], data[item]["labels"]);
                                    let charts_ = Object.keys(data[item]["data"]); // current, setpoint, mean
                                    for (chart of charts_) {
                                        let index = charts["current"][item]["data"]["datasets"].findIndex(key => key.stack === chart);
                                        if (index >= 0 && data[item]["data"][chart] !== null) {

                                            // Aktorenaktionen
                                            if (chart == "actuator" && data[item]["data"]["actuator"]["enabled"] == 1) {
                                                currentIndex = charts["current"][item]["data"]["datasets"].findIndex(key => key.stack === "current");
                                                if (charts["current"][item]["data"]["datasets"][index]["data"].length >= 13) {
                                                    charts["current"][item]["data"]["datasets"][index]["data"].shift();
                                                }
                                                let lastXPosition = charts["current"][item]["data"]["datasets"][currentIndex]["data"].length -1;
                                                let lastXValue = charts["current"][item]["data"]["datasets"][currentIndex]["data"][lastXPosition]["x"];
                                                if (lastXValue == data[item]["data"]["actuator"]["data"]["x"]) {
                                                    // Letztes Element löschen, damit nicht zwei gleiche X-Werte angezeigt werden
                                                    charts["current"][item]["data"]["datasets"][currentIndex]["data"].splice(lastXPosition, 1);
                                                }
                                                // Damit Objekte wirklich zugewiesen werden, statt als Referenz!
                                                Object.assign(actuators[item], data[item]["data"]["actuator"]);
                                                delete actuators[item]["data"];
                                                if (data[item]["data"]["actuator"]["count"] == 0) {
                                                    actuators[item]["enabled"] = 0;
                                                }
                                                charts["current"][item]["data"]["datasets"][index]["data"].push(data[item]["data"]["actuator"]["data"]);
                                                charts["current"][item]["data"]["datasets"][currentIndex]["data"].push(data[item]["data"]["actuator"]["data"]);
                                            }
                                            else {
                                                if (charts["current"][item]["data"]["datasets"][index]["data"].length >= 13) {
                                                    charts["current"][item]["data"]["datasets"][index]["data"].shift();
                                                }
                                                charts["current"][item]["data"]["datasets"][index]["data"].push(data[item]["data"][chart]);
                                                charts["current"][item]["options"]["scales"]["x"]["min"] = data[item]["labels"][0];
                                                charts["current"][item]["options"]["scales"]["x"]["max"] = data[item]["labels"][data[item]["labels"].length -1];
                                                // Wenn Wert kleiner gleich Warnwert
                                                if ((Number.parseInt(data[item]["data"]["current"]["y"]) <= Number.parseInt(data[item]["data"]["lowerWarningLimit"]["y"]) && Number.parseInt(data[item]["data"][chart]["y"]) > Number.parseInt(data[item]["data"]["lowerControlLimit"]["y"])) || (Number.parseInt(data[item]["data"]["current"]["y"]) >= Number.parseInt(data[item]["data"]["upperWarningLimit"]["y"]) && Number.parseInt(data[item]["data"][chart]["y"]) < Number.parseInt(data[item]["data"]["upperControlLimit"]["y"]))) {
                                                    switchAlert(item, "warning");
                                                }
                                                else if ((Number.parseInt(data[item]["data"]["current"]["y"]) >= Number.parseInt(data[item]["data"]["upperControlLimit"]["y"]) && Number.parseInt(data[item]["data"]["current"]["y"]) > Number.parseInt(data[item]["data"]["upperWarningLimit"]["y"])) || (Number.parseInt(data[item]["data"]["current"]["y"]) <= Number.parseInt(data[item]["data"]["lowerControlLimit"]["y"]) && Number.parseInt(data[item]["data"][chart]["y"]) < Number.parseInt(data[item]["data"]["lowerWarningLimit"]["y"]))) {
                                                    switchAlert(item, "danger");
                                                    console.log("joo");
                                                }
                                                else {
                                                    switchAlert(item, "success");
                                                }
                                            }
                                        }
                                    }
                                    charts["current"][item].update("none"); // Sehr rechenintensiv bei zeitgleicher Aktualisierung aller Diagramme
                                    $("#section-" + item + "> div:last-of-type > canvas").css("visibility", "visible");
                                    $("#section-" + item + "> div:last-of-type > .chart-overlay ").css("display", "none");
                                }
                            }
                        }).always(function() {
                            isLoadingCurrentChartData = false;
                        });
                    }
                }, 5000);*/
                if (window.location.hash) {
                    let hash = window.location.hash;
                    let hashString = hash.substr(1);
                    if (hashString.length >= 1) {
                        if (!getCookie("authToken").length >= 1 && hashString !== "login") {
                            $("a[href='" + hash + "']").first().click();
                        }
                    }
                }
            });
        </script>
        <style>
            @font-face {
                font-family: 'Font Awesome 5 Brands';
                font-style: normal;
                font-weight: 400;
                font-display: block;
                src: url('font/free-fa-brands-400.woff') format('woff');
            }
            @font-face {
                font-family: 'Font Awesome 5 Free';
                font-style: normal;
                font-weight: 400;
                font-display: block;
                src: url('font/free-fa-regular-400.woff') format('woff');
            }
            @font-face {
                font-family: 'Font Awesome 5 Pro';
                font-style: normal;
                font-weight: 400;
                font-display: block;
                src: url('font/free-fa-regular-400.woff') format('woff');
            }
            @font-face {
                font-family: 'Font Awesome 5 Free';
                font-style: normal;
                font-weight: 900;
                font-display: block;
                src: url('font/free-fa-solid-900.woff') format('woff');
            }
            @font-face {
                font-family: 'Font Awe0some 5 Pro';
                font-style: normal;
                font-weight: 900;
                font-display: block;
                src: url('fonts/free-fa-solid-900.woff') format('woff');
            }
            :root {
                --chart-setpoint-border: orange;
                --chart-current-border: black;
                --chart-middle-border: green;
                --chart-warning-limit-border: rgb(255, 115, 0);
                --chart-control-limit-border: rgb(220, 53, 69);
                --chart-activity-1-border: rgb(112, 146, 190);
                --chart-activity-2-border: rgb(91, 166, 136);
                --alert-color-warning: #cd853f;
                --alert-background-warning: #f7e8cd;
                --alert-color-danger: #dc143c;
                --alert-background-danger: #ffe4e1;
                --alert-color-success: #228b22;
                --alert-background-success: #c0edc0;
            }
            body {
                display: grid;
                grid-gap: 0;
                grid-template-rows: auto 1fr 71px;
                overflow-x: hidden;
                min-height: 100vh;
                background-color: #f4f2e0;
                align-content: flex-start;
                background-image: url('img/moo.png');
                background-repeat: repeat;
                background-blend-mode: color;
            }
            #body-overlay {
                position: absolute;
                z-index: 9999;
                width: 100%;
                height: 100%;
                opacity: 1;
                background-color: #ffffff;
                transition: opacity 1s;
                display: flex;
                align-content: center;
                align-items: center;
                justify-content: center;
            }
            main {
                grid-column: 1 / 3;
                grid-row: 2 / 2;
                display: flex;
                align-items: flex-start;
                justify-content: center;
                padding: 0 5%;
            }
            main > div.row:first-of-type {
                flex: 0 1 100%;
            }
            header {
                grid-column: 1 / 3;
                grid-row: 1 / 1;
                display: flex;
                flex-direction: column;
                align-self: flex-start;
                background-image: linear-gradient(90deg, #32887c, #458084, #32887c);
                border-top: 1px solid #76a5a8;
                border-bottom: 1px solid #76a5a8;
                height: 50px;
                color: #fff;
                justify-content: center;
            }
            #logo {
                background-image: url('img/logo.png');
                background-size: 114px 32px;
                background-repeat: no-repeat;
                width: 114px;
                height: 32px;
                filter: drop-shadow(0 1px black);
            }
            footer {
                height: 50px;
                color: white;
                grid-column: 1 / 3;
                grid-row: 3 / 3;
                align-self: flex-end;
                background-image: linear-gradient(90deg, #32887c, #458084, #32887c);
                border-top: 1px solid #76a5a8;
                border-bottom: 1px solid #76a5a8;
                text-shadow: 0 1px 0 black;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            [data-bs-toggle='collapse'] > i {
                transition: transform 250ms;
            }
            #overviewPanel {
                display: grid;
                /* Höhe */
                grid-auto-rows: minmax(350px, auto);
                grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
                /* Breite */
                grid-gap: 10px;
                margin-top: 10px;
                align-content: flex-start;
                justify-content: space-between;
            }
            #historyGalleryPanel {
                display: grid;
                /* Höhe */
                grid-auto-rows: minmax(250px, auto);
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                /* Breite */
                grid-gap: 10px;
                align-content: flex-start;
                justify-content: unset;
            }
            .historyGalleryItem {
                border: 2px solid var(--bs-gray-300, #dee2e6);
                transition: border 200ms ease-in-out 0s;
                border-radius: 5px;
            }
            .historyGalleryItem:hover {
                cursor: pointer;
                border: 2px solid var(--bs-gray-500, #adb5bd);
            }
            div.lol {
                border: 2px solid var(--bs-gray-300, #dee2e6);
            }
            div.lol div:first-of-type {
                flex: 0 0 28px;
            }
            div.lol > div:first-of-type > span:first-of-type {
                font-weight: bold;
                font-size: 1rem;
                vertical-align: middle;
                color: var(--bs-gray-600, #6c757d);
            }
            canvas[id$='-chart-current'] {
                visibility: hidden;
            }
            .chart-overlay > h2,
            #body-overlay > h1 {
                color: var(--bs-gray-500, #adb5bd);
                margin: 0;
            }
            .chart-overlay {
                position: absolute;
                z-index: 2;
                width: 100%;
                height: 100%;
                align-items: center;
                align-content: center;
                justify-content: center;
                display: flex;
            }
            div.lol.warning {
                background-color: var(--alert-background-warning);
                border: 2px dashed var(--alert-color-warning);
                animation: background-flashing-warning 3s linear 0s infinite;
            }
            div.lol.danger {
                background-color: var(--alert-background-danger);
                border: 2px dashed var(--alert-color-danger);
                animation: background-flashing-danger 1s linear 0s infinite;
            }
            .tab-content:not(.tab-content-simple) {
                background-color: #fbfbfb;
                border-bottom-left-radius: 5px;
                border-bottom-right-radius: 5px;
                border-top-right-radius: 5px;
                box-shadow: 0 1px 4px 0px var(--bs-gray-600, #6c757d);
            }
            .nav-tabs {
                border-bottom-width: 0 !important;
            }
            .nav-tabs > .nav-item > .nav-link:focus-visible,
            .nav-pills > .nav-item > .nav-link:focus-visible,
            .navbar-nav > .nav-item > .nav-link:focus-visible {
                outline-style: none;
            }
            .nav-tabs > .nav-item {
                position: relative;
                z-index: 2;
            }
            /* langer block unter erstem tab */
            .nav-tabs > .nav-item:first-of-type > .nav-link.active::after {
                content: '';
                position: absolute;
                width: 100%;
                height: 10px;
                left: -1px;
                bottom: -10px;
                z-index: 10;
                background-color: #fbfbfb;
                border-left: 1px solid var(--bs-gray-300, #dee2e6);
            }
            /* kleine blöcke VOR zwischen erstem und letztem tab */
            .nav-tabs > .nav-item:not(:first-of-type)::before {
                content: '';
                position: absolute;
                width: 10px;
                height: 10px;
                left: -5px;
                bottom: -11px;
                z-index: 11;
                background-color: #fbfbfb;
            }
            /* langer block unter nicht erstem tab */
            .nav-tabs > .nav-item:not(:first-of-type) > .nav-link.active::after {
                content: '';
                position: absolute;
                width: 100%;
                height: 10px;
                left: -1px;
                bottom: -10px;
                z-index: 10;
                background-color: #fbfbfb;
            }
            /* kleiner block HINTER letztem tab */
            .nav-tabs > .nav-item:last-of-type::after {
                content: '';
                position: absolute;
                width: 10px;
                height: 10px;
                right: -5px;
                bottom: -11px;
                z-index: 11;
                background-color: #fbfbfb;
            }
            .nav-tabs > .nav-item > .nav-link.active {
                box-shadow: 0 2px 5px 0px #00000057;
                background-color: #fbfbfb;
                border-bottom-color: #fbfbfb;
                position: relative;
            }
            .nav-tabs > .nav-item > .nav-link.disabled {
                border: 1px solid var(--bs-gray-200, #e9ecef) !important;
            }
            .nav-tabs > .nav-item > a.nav-link:not(.disabled, .active):hover,
            .nav-tabs > .nav-item > a.nav-link:not(.disabled, .active):active,
            .nav-tabs > .nav-item > a.nav-link:not(.disabled, .active):focus {
                border: 1px solid var(--bs-gray-300, #dee2e6) !important;
                border-bottom: 1px solid transparent !important;
            }
            nav {
                flex: 1 0 100%;
            }
            #first-navbar > li:not(:last-of-type) {
                margin-right: 0.25rem;
            }
            #second-navbar > li:not(:first-of-type, :last-of-type) {
                margin-right: 0.25rem;
            }
            #navigation > ul > li > a:not(.disabled),
            #navigation > ul > li > a:not(.disabled):visited {
                color: white;
            }
            #navigation > ul > li > a,
            #navigation .navbar-text {
                text-shadow: 0 1px 0 black;
            }
            #navigation > ul > li > a:not(.disabled):hover,
            #navigation > ul > li > a:not(.disabled):active,
            #navigation > ul > li > a.active {
                color: black !important;
                background-color: #f6ffff;
                box-shadow: 0 1px 1px 0px rgba(0, 0, 0, 0.5);
                text-shadow: 0 0 0 transparent;
            }
            .card-header {
                padding: 0 !important;
            }
            hr {
                opacity: 1 !important;
            }
            table {
                border-spacing: 0;
                border-radius: 2px;
                border-collapse: separate !important;
                overflow: hidden;
            }
            table:not(.table-borderless) > thead > tr > th:first-of-type {
                border-top-left-radius: 2px;
            }
            table:not(.table-borderless) > thead > tr > th:last-of-type {
                border-top-right-radius: 2px;
            }
            table:not(.table-borderless) > thead > tr > th:not(.TintengefrorenerTiefenfrisch) {
                border-left: 1px solid var(--bs-gray-300, #dee2e6) !important;
            }
            table:not(.table-borderless) > thead > tr > th {
                border-top: 1px solid var(--bs-gray-300, #dee2e6) !important;
                border-bottom: 2px solid var(--bs-gray-300, #dee2e6) !important;
                background-color: #f7f7f7 !important;
            }
            table:not(.table-borderless) > thead > tr > th:last-of-type {
                border-right: 1px solid var(--bs-gray-300, #dee2e6) !important;
            }
            table.dataTable:not(.table-borderless) > thead > tr > th:last-of-type {
                border-right: 1px solid var(--bs-gray-300, #dee2e6) !important;
            }
            table.dataTable:not(.table-borderless) > tbody > tr > td:not(.fritz) {
                border-left: 1px solid var(--bs-gray-300, #dee2e6) !important;
            }
            table.dataTable:not(.table-borderless) > tbody > tr:last-of-type > td {
                border-bottom: 1px solid var(--bs-gray-300, #dee2e6) !important;
            }
            table.dataTable:not(.table-borderless) > tbody > tr:last-of-type > td:first-of-type {
                border-bottom-left-radius: 2px;
            }
            table.dataTable:not(.table-borderless) > tbody > tr:last-of-type > td:last-of-type {
                border-bottom-right-radius: 2px;
            }
            /* Normale Tabllen */
            table:not(.table-borderless, .dataTable) > tbody > tr > td:last-of-type {
                border-right: 1px solid var(--bs-gray-300, #dee2e6);
            }
            table:not(.table-borderless, .dataTable) > tbody > tr > td {
                border-bottom: 1px solid var(--bs-gray-300, #dee2e6);
                border-left: 1px solid var(--bs-gray-300, #dee2e6);
            }
            #hydroPocLogo {
                width: 287px;
                height: 80px;
            }
            .contract {
                animation: contract 1s ease-in-out 0s 1;
            }
            .boing {
                animation: boing 1s ease-in-out 0s 1;
            }
            @keyframes contract {
                0% {
                    width: 287px;
                }
                100% {
                    width: 50px;
                }
            }
            @keyframes boing {
                0% {
                    width: 50px;
                }
                20% {
                    width: 287px;
                }
                40% {
                    width: 277px;
                }
                60% {
                    width: 287px;
                }
                80% {
                    width: 282px;
                }
                100% {
                    width: 287px;
                }
            }
            @keyframes flashing {
                0% {
                    opacity: 0;
                }
                50% {
                    opacity: 1;
                }
                100% {
                    opacity: 0;
                }
            }
            @keyframes background-flashing-danger {
                0% {
                    background-color: #ffffff;
                }
                50% {
                    background-color: var(--alert-background-danger);
                }
                100% {
                    background-color: #ffffff;
                }
            }
            @keyframes background-flashing-warning {
                0% {
                    background-color: #ffffff;
                }
                50% {
                    background-color: var(--alert-background-warning);
                }
                100% {
                    background-color: #ffffff;
                }
            }
            table.dataTable > thead .sorting::before,
            table.dataTable > thead .sorting_asc::before,
            table.dataTable > thead .sorting_desc::before,
            table.dataTable > thead .sorting_asc_disabled::before,
            table.dataTable > thead .sorting_desc_disabled::before,
            table.dataTable > thead .sorting::after,
            table.dataTable > thead .sorting_asc::after,
            table.dataTable > thead .sorting_desc::after,
            table.dataTable > thead .sorting_asc_disabled::after,
            table.dataTable > thead .sorting_desc_disabled::after {
                content: '' !important;
                right: auto !important;
            }
            table.dataTable thead .sorting::after {
                position: absolute;
                width: 100%;
                height: 100%;
                right: 5px !important;
                top: 0 !important;
                opacity: 0.5 !important;
                background-repeat: no-repeat;
                background-position-x: right;
                background-position-y: center;
                background-size: 16px 16px;
                background-image: url('img/iconmonstr-sort-2.svg');
            }
            table.dataTable thead .sorting_desc::after {
                background-image: url('img/iconmonstr-sort-3.svg') !important;
            }
            table.dataTable thead .sorting_asc::after {
                background-image: url('img/iconmonstr-sort-4.svg') !important;
            }
            div.dataTables_scrollHeadInner {
                padding-right: 0 !important;
                width: 100% !important;
            }
            table.dataTable > thead > tr > th {
                box-sizing: border-box;
            }
            table.dataTable:not(.table-borderless) > tbody > tr > td:only-of-type {
                border-right: 1px solid var(--bs-gray-300, #dee2e6);
            }
            div.dataTables_scrollBody {
                height: unset;
            }
            div.dataTables_wrapper > .row:last-of-type {
                margin-top: 24px;
            }
            table > tbody > tr {
                vertical-align: middle;
            }
            .table-responsive {
                max-height: 400px;
            }
            /* Vorladen von Sortierungssymbolen in Tabellen */
            body::after {
                position: absolute;
                width: 0;
                height: 0;
                z-index: -1;
                overflow: hidden;
                content: url('img/iconmonstr-sort-2.svg') url('img/iconmonstr-sort-3.svg') url('img/iconmonstr-sort-4.svg');
            }
            .chart-history-button {
                right: 15px;
                position: absolute;
                z-index: 3;
            }
            .kreiselchen {
                width: 1.25rem;
                height: 1.25rem;
            }
            .bg-gray-200 {
                background-color: var(--bs-gray-200, #e9ecef);
                font-weight: 600;
            }
            div.dataTables_wrapper > div.row:last-of-type {
                margin-top: 1rem !important;
            }
            a[data-bs-toggle='pill']:hover {
                background-color: rgba(var(--bs-primary-rgb), 0.1);
            }
            #chartOptionContainer {
                overflow-y: scroll;
                max-height: 400px;
            }
            #chartOptionContainer h5 {
                font-weight: 600;
            }
            .accordion-flush > .accordion-item > .accordion-header > .accordion-button:focus,
            .accordion-flush .accordion-button:not(.collapsed) {
                box-shadow: unset;
                color: black;
            }
            .accordion-flush > .accordion-item:last-of-type > .accordion-header > .accordion-button:not(.collapsed) {
                border-bottom: 1px solid var(--bs-gray-300, #dee2e6);
            }
            .accordion-flush > .accordion-item:first-of-type > .accordion-header > .accordion-button:not(.collapsed) {
                border-top: 1px solid var(--bs-gray-300, #dee2e6);
            }
            .accordion-flush > .accordion-item > .accordion-header > .accordion-button {
                background-color: var(--bs-gray-100, #f8f9fa);
                border-left: 1px solid var(--bs-gray-300, #dee2e6);
                border-right: 1px solid var(--bs-gray-300, #dee2e6);
            }
            .accordion-flush > .accordion-item:last-of-type > .accordion-header > .accordion-button.collapsed {
                overflow: hidden;
                border-bottom-left-radius: 5px;
                border-bottom-right-radius: 5px;
                border-bottom: 1px solid var(--bs-gray-300, #dee2e6);
            }
            .accordion-flush > .accordion-item:last-of-type > .accordion-header > .accordion-button {
                border-bottom-left-radius: 0;
                border-bottom-right-radius: 0;
            }
            .accordion-flush > .accordion-item:last-of-type .accordion-collapse.collapse.show > .accordion-body,
            .accordion-flush > .accordion-item:last-of-type .accordion-collapse.collapsing > .accordion-body {
                border-bottom-left-radius: 5px;
                border-bottom-right-radius: 5px;
                border-bottom: 1px solid var(--bs-gray-300, #dee2e6);
            }
            .accordion-flush > .accordion-item > .accordion-collapse > .accordion-body {
                border-left: 1px solid var(--bs-gray-300, #dee2e6);
                border-right: 1px solid var(--bs-gray-300, #dee2e6);
            }
            .accordion-flush > .accordion-item:first-of-type > .accordion-header > .accordion-button {
                overflow: hidden;
                border-top-left-radius: 5px;
                border-top-right-radius: 5px;
                border-top: 1px solid var(--bs-gray-300, #dee2e6);
            }
            .accordion-flush > .accordion-item:not(:first-of-type, :last-of-type) .accordion-collapse.collapse.show > .accordion-body,
            .accordion-flush > .accordion-item:not(:first-of-type, :last-of-type) .accordion-collapse.collapsing > .accordion-body {
                border-top: 1px solid var(--bs-gray-300, #dee2e6);
            }
            .accordion-flush > .accordion-item:first-of-type .accordion-collapse.collapse.show > .accordion-body,
            .accordion-flush > .accordion-item:first-of-type .accordion-collapse.collapsing > .accordion-body {
                border-top: 1px solid var(--bs-gray-300, #dee2e6);
            }
            #mobile-navbar > ul.dropdown-menu:first-of-type {
                box-shadow: 0 0 5px 1px #0000008a;
            }
            ul.nav-pills .nav-link.disabled {
                background-color: var(--bs-gray-100, #f8f9fa) !important;
            }

            table.dataTable.dtr-inline.collapsed > tbody > tr > td.child,
            table.dataTable.dtr-inline.collapsed > tbody > tr > th.child,
            table.dataTable.dtr-inline.collapsed > tbody > tr > td.dataTables_empty {
                cursor: default !important;
            }
            table.dataTable.dtr-inline.collapsed > tbody > tr > td.child:before,
            table.dataTable.dtr-inline.collapsed > tbody > tr > th.child:before,
            table.dataTable.dtr-inline.collapsed > tbody > tr > td.dataTables_empty:before {
                display: none !important;
            }
            table.dataTable.dtr-inline.collapsed > tbody > tr > td.dtr-details,
            table.dataTable.dtr-inline.collapsed > tbody > tr > th.dtr-details {
                position: relative;
                cursor: pointer;
            }
            table.dataTable.dtr-column > tbody > tr > td.dtr-details,
            table.dataTable.dtr-column > tbody > tr > th.dtr-details,
            table.dataTable.dtr-column > tbody > tr > td.control,
            table.dataTable.dtr-column > tbody > tr > th.control {
                position: relative;
                cursor: pointer;
            }
            table.dataTable:not(.table-borderless) > tbody > tr > td:only-of-type,
            table.dataTable:not(.table-borderless) > tbody > tr > td:last-of-type {
                border-right: 1px solid var(--bs-gray-300, #dee2e6);
            }
            .alert-primary.alertBoxContainer {
                border-color: #b1cbf5;
            }
            .alert-warning.alertBoxContainer {
                border-color: #ebde9f;
            }
            .alert-danger.alertBoxContainer {
                border-color: #e5babe;
            }
            .alert-success.alertBoxContainer {
                border-color: #b9dac1;
            }
            .alertBoxIcon {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 0.714rem 0.357rem;
                align-self: stretch;
            }
            .alertBoxIcon.primary {
                background-color: #b1cbf5;
                color: #437b95;
            }
            .alertBoxIcon.danger {
                background-color: #e5babe;
                color: #911;
            }
            .alertBoxIcon.success {
                background-color: #b9dac1;
                color: #508d50;
            }
            .alertBoxIcon.warning {
                background-color: #ebde9f;
                color: #918130;
            }
            .alertBoxIcon > i {
                font-size: 1.5625rem;
            }
            .alertBoxText {
                padding: 0.5rem;
                margin: 0.5rem;
                width: 100%;
            }
            .alertBoxContainer {
                display: flex;
                align-items: center;
                padding: 0;
                position: relative;
            }
            .alertBoxText button.close {
                margin: 0 0 auto auto;
            }
            .alertBoxText ul {
                list-style-position: inside;
                margin: 0;
                padding: 0;
            }
            #section-legend {
                gap: 8px;
            }
            .legendContainer div.legendIcon {
                position: relative;
                top: 2px;
                width: 16px;
                height: 16px;
            }
            .legendContainer {
                border: 2px solid var(--bs-gray-300, #dee2e6);
            }
            .knorke {
                margin-left: 0.25rem;
            }
            #history-chart {
                max-height: 60vh;
            }
            @media only screen and (max-width: 600px) {
                .alert > i {
                    vertical-align: baseline !important;
                }
                main {
                    padding: 0 2%;
                }
                #overviewPanel {
                    grid-auto-rows: minmax(300px, auto);
                    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                }
                #historyGalleryPanel {
                    grid-auto-rows: minmax(300px, auto);
                    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                }
                /*
                .historyGalleryItem > div:first-of-type > div:first-of-type {
                    max-width: 300px;
                }
                */
                table.dataTable thead > tr > th {
                    font-weight: 600;
                }
                #first-navbar,
                #second-navbar {
                    display: none;
                }
                #mobile-navbar {
                    display: block;
                    margin: auto 20px auto auto;
                }
                #chartOptionMenu {
                    flex-direction: column;
                }
                #chartOptionNavigation {
                    width: 100%;
                }
                #chartOptionsFormContainer label, #historyChartTimespanColumn > label {
                    padding-left: 0;
                }
                #chartOptionsFormContainer input[type='text'], #historyChartTimespanColumn > select {
                    width: 100%;
                }
                /*
                #chartOptionContainer *:not(input, label) {
                    padding-left: 0;
                    margin-left: 0;
                }*/
                #chartOptionContainer {
                    width: 100%;
                    margin-top: 1rem;
                    border: 1px solid var(--bs-gray-300, #dee2e6);
                    border-radius: 4px;
                } /*
                .formContainer, .legendContainer {
                    flex-direction: column;
                }*/
                .formContainer {
                    flex-direction: column;
                }
                .formContainer > label + select:not(:last-child),
                .formContainer > label + input:not(:last-child),
                .formContainer > button:not(:last-child) {
                    margin-bottom: 0.5rem;
                }
                table.dataTable:not(.table-borderless) > tbody > tr:first-of-type > td:first-of-type {
                    border-top-left-radius: 1px;
                    border-top-right-radius: 1px;
                    overflow: hidden;
                }
                .accordion-flush > .accordion-item > .accordion-collapse > .accordion-body > div.row > div.col-md-8:not(:first-of-type, :last-of-type) {
                    margin-top: 0.5rem;
                }
                .accordion-flush > .accordion-item > .accordion-collapse > .accordion-body > div.row > div.col-md-4 {
                    margin: auto auto 0 auto;
                }
                *:not(h1, h2, h3, h4, h5, h6, .alertBoxIcon > i, h1 > span, h2 > span, h3 > span, h4 > span, h5 > span, h6 > span, h1 > i, h2 > i, h3 > i, h4 > i, h5 > i, h6 > i) {
                    font-size: 14px !important;
                }
                .dataTables_filter {
                    margin-top: 0.5rem;
                }
                .table-container {
                    width: 0;
                    flex: 1 0 auto;
                    overflow-y: auto;
                }
                .legendContainer {
                    margin-top: 0;
                }
                #historyChartMinMaxColumn {
                    text-align: center;
                }
            }
            /* Small devices (portrait tablets and large phones, 600px and up) */
            @media only screen and (min-width: 600px) {
                .alert > i {
                    vertical-align: baseline !important;
                }
                main {
                    padding: 0 2%;
                }
                #overviewPanel {
                    grid-auto-rows: minmax(300px, auto);
                    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                }
                #historyGalleryPanel {
                    grid-auto-rows: minmax(300px, auto);
                    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                }
                /*
                .historyGalleryItem > div:first-of-type > div:first-of-type {
                    max-width: 300px;
                }
                */
                table.dataTable thead > tr > th {
                    font-weight: 600;
                }
                #first-navbar,
                #second-navbar {
                    display: none;
                }
                #mobile-navbar {
                    display: block;
                    margin: auto 20px auto auto;
                }
                #chartOptionMenu {
                    flex-direction: column;
                }
                #chartOptionsFormContainer input[type='text'], #historyChartTimespanColumn > select {
                    width: 100%;
                }
                #chartOptionNavigation {
                    width: 100%;
                }
                #chartOptionContainer {
                    width: 100%;
                    margin-top: 1rem;
                    border: 1px solid var(--bs-gray-300, #dee2e6);
                    border-radius: 4px;
                }
                .formContainer {
                    flex-direction: column;
                }
                .formContainer > label + select:not(:last-child),
                .formContainer > label + input:not(:last-child),
                .formContainer > button:not(:last-child) {
                    margin-bottom: 0.5rem;
                }
                table.dataTable:not(.table-borderless) > tbody > tr:first-of-type > td:first-of-type {
                    border-top-left-radius: 1px;
                    border-top-right-radius: 1px;
                    overflow: hidden;
                }
                .accordion-flush > .accordion-item > .accordion-collapse > .accordion-body > div.row > div.col-md-8:not(:first-of-type, :last-of-type) {
                    margin-top: 0.5rem;
                }
                .accordion-flush > .accordion-item > .accordion-collapse > .accordion-body > div.row > div.col-md-4 {
                    margin: auto auto 0 auto;
                }
                *:not(h1, h2, h3, h4, h5, h6, .alertBoxIcon > i, h1 > span, h2 > span, h3 > span, h4 > span, h5 > span, h6 > span, h1 > i, h2 > i, h3 > i, h4 > i, h5 > i, h6 > i) {
                    font-size: 14px !important;
                }
                .dataTables_filter {
                    margin-top: 0.5rem;
                }
                .table-container {
                    width: 0;
                    flex: 1 0 auto;
                    overflow-y: auto;
                }
                .legendContainer {
                    margin-top: 0;
                }
                #historyChartMinMaxColumn {
                    text-align: center;
                }
            }
            /* Medium devices (landscape tablets, 768px and up) */
            @media only screen and (min-width: 768px) {
                #first-navbar,
                #second-navbar {
                    display: flex;
                }
                #chartOptionMenu {
                    flex-direction: column;
                }
                #chartOptionsFormContainer label, #historyChartTimespanColumn > label {
                    padding-left: 0;
                }
                #mobile-navbar {
                    display: none;
                }
                *:not(h1, h2, h3, h4, h5, h6, .alertBoxIcon > i, h1 > span, h2 > span, h3 > span, h4 > span, h5 > span, h6 > span, h1 > i, h2 > i, h3 > i, h4 > i, h5 > i, h6 > i) {
                    font-size: 14px !important;
                }
                .formContainer > label + select:not(:last-child),
                .formContainer > button:not(:last-child) {
                    margin-bottom: 0.5rem;
                }
                .legendContainer {
                    margin-top: 0;
                }
                .legendContainer .legendItem {
                    width: auto;
                }
                #chartOptionsFormContainer input[type='text'], #historyChartTimespanColumn > select {
                    width: auto;
                }
                #historyChartMinMaxColumn {
                    text-align: center;
                }
            }
            /* Large devices (laptops/desktops, 992px and up) */
            @media only screen and (min-width: 992px) {
                #first-navbar,
                #second-navbar {
                    display: flex;
                }
                #chartOptionMenu {
                    flex-direction: row;
                }
                #chartOptionNavigation {
                    width: auto;
                }
                #chartOptionContainer {
                    width: auto;
                    margin-top: 0;
                    margin-left: 0.5rem;
                    flex: 1 0;
                }
                .legendContainer .legendItem {
                    width: auto;
                }
                .formContainer {
                    flex-direction: row;
                    align-content: center;
                    align-items: center;
                }
                .formContainer > * {
                    margin-top: 0;
                    margin-bottom: 0 !important;
                }
                .formContainer label:not(:first-of-type) {
                    margin-left: 1rem;
                }
                .formContainer button:not(:only-child) {
                    margin-left: 0.5rem;
                }
                .legendContainer {
                    margin-top: 0;
                }
                #mobile-navbar {
                    display: none;
                }
                *:not(h1, h2, h3, h4, h5, h6, .alertBoxIcon > i, h1 > span, h2 > span, h3 > span, h4 > span, h5 > span, h6 > span, h1 > i, h2 > i, h3 > i, h4 > i, h5 > i, h6 > i) {
                    font-size: 16px !important;
                }
                .legendContainer > label {
                    margin-top: 0;
                }
                #chartOptionsFormContainer input[type='text'], #historyChartTimespanColumn > select {
                    width: auto;
                }
                #historyChartMinMaxColumn {
                    text-align: center;
                }
            }
            /* Extra large devices (large laptops and desktops, 1200px and up) */
            @media only screen and (min-width: 1200px) {
                #first-navbar,
                #second-navbar {
                    display: flex;
                }
                #chartOptionMenu {
                    flex-direction: row;
                }
                #mobile-navbar {
                    display: none;
                }
                *:not(h1, h2, h3, h4, h5, h6, .alertBoxIcon > i, h1 > span, h2 > span, h3 > span, h4 > span, h5 > span, h6 > span, h1 > i, h2 > i, h3 > i, h4 > i, h5 > i, h6 > i) {
                    font-size: 16px !important;
                }
                .formContainer > * {
                    margin-top: 0;
                    margin-bottom: 0;
                }
                .formContainer label:not(:first-of-type) {
                    margin-left: 1rem;
                }
                .formContainer button:not(:only-child) {
                    margin-left: 0.5rem;
                }
                .legendContainer .legendItem {
                    width: auto;
                }
                #chartOptionsFormContainer input[type='text'], #historyChartTimespanColumn > select {
                    width: auto;
                }
                #historyChartMinMaxColumn {
                    text-align: center;
                }
            }
            @media only screen and (min-width: 1285px) {
                #chartOptionsFormContainer input[type='text'], #historyChartTimespanColumn > select {
                    display: inline-block;
                }
                #historyChartMinMaxColumn {
                    text-align: right;
                }
            }
        </style>
    </head>
    <body class="m-0 p-0 overflow-hidden">
        <div id="body-overlay">
            <div class="spinner-border mr-2" style="border-width: 5px; color: var(--bs-gray-500)"></div>
        </div>
        <header>
            <nav class="navbar navbar-expand-sm p-0" id="navigation">
                <a class="navbar-brand ms-3 mb-0" href="#">
                    <div id="logo"></div>
                </a>
                <ul class="navbar-nav" id="first-navbar">
                    <li class="nav-item">
                        <a class="nav-link rounded-3" href="#systemInfos"><i class="fas fa-hdd"></i> Systeminformationen</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link rounded-3" href="#staff"><i class="fas fa-users"></i> Mitwirkende</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link rounded-3" href="#about"><i class="fas fa-info-circle"></i> Über</a>
                    </li>
                </ul>
                <ul class="navbar-nav mt-auto me-2 mb-auto ms-auto" id="second-navbar">
                    <span class="navbar-text me-2" data-current-user="current-user"></span>
                    <li class="nav-item">
                        <a class="nav-link rounded-3" href="#login"><i class="fas fa-sign-in-alt"></i> Anmelden</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link rounded-3" href="#register"><i class="fas fa-asterisk"></i> Registrieren</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link rounded-3 d-none" href="#logout"><i class="fas fa-sign-out-alt"></i> Abmelden</a>
                    </li>
                </ul>
                <div class="dropdown" id="mobile-navbar">
                    <button type="button" class="btn btn-outline-light dropdown-toggle" data-bs-toggle="dropdown" style="box-shadow: 0 0 1px 0 black">
                        <i class="fas fa-bars"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" id="mobile-navbar-dropdown">
                        <li>
                            <a class="dropdown-item" href="#systemInfos"><i class="fas fa-hdd"></i> Systeminformationen</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="#staff"><i class="fas fa-users"></i> Mitwirkende</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="#about"><i class="fas fa-info-circle"></i> Über</a>
                        </li>
                        <li><div class="dropdown-divider"></div></li>
                        <li><span class="dropdown-item-text d-none text-secondary" data-current-user="current-user"></span></li>
                        <li>
                            <a class="dropdown-item" href="#login"><i class="fas fa-sign-in-alt"></i> Anmelden</a>
                        </li>
                        <li>
                            <a class="dropdown-item d-none" href="#logout"><i class="fas fa-sign-out-alt"></i> Abmelden</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="#register"><i class="fas fa-asterisk"></i> Registrieren</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
        <main>
            <div class="row justify-content-center">
                <div class="mt-4 p-0" id="panel">
                    <ul class="nav nav-tabs" id="mainTabNav">
                        <li class="nav-item">
                            <a class="nav-link active" data-bs-toggle="tab" href="#overview">Übersicht</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#historyGallery">Bildergalerie</a>
                        </li>
                        <li class="nav-item d-none">
                            <a class="nav-link" data-bs-toggle="tab" href="#administration">Einstellungen</a>
                        </li>
                    </ul>
                    <div class="tab-content p-3 border">
                        <div class="tab-pane active" id="overview">
                            <div class="d-flex legendContainer rounded-3 p-2">
                                <label class="me-2">Legende:</label>
                                <div id="section-legend" class="flex-wrap d-flex">
                                    <div class="legendItem">
                                        <div style="background-color: black" class="d-inline-block legendIcon"></div>
                                        <span class="ms-1">Messwert</span>
                                    </div>
                                    <div class="legendItem">
                                        <div style="background-color: var(--chart-setpoint-border)" class="d-inline-block legendIcon"></div>
                                        <span class="ms-1">Sollwert</span>
                                    </div>
                                    <div class="legendItem">
                                        <div style="background-color: var(--chart-middle-border)" class="d-inline-block legendIcon"></div>
                                        <span class="ms-1">Mittelwert</span>
                                    </div>
                                    <div class="legendItem">
                                        <div style="background-color: var(--chart-activity-1-border)" class="d-inline-block legendIcon"></div>
                                        <span class="ms-1">Pumpenaktivität 1</span>
                                    </div>
                                    <div class="legendItem">
                                        <div style="background-color: var(--chart-activity-2-border)" class="d-inline-block legendIcon"></div>
                                        <span class="ms-1">Pumpenaktivität 2</span>
                                    </div>
                                    <div class="legendItem">
                                        <div style="border: 2px dashed rgb(220, 53, 69)" class="d-inline-block legendIcon"></div>
                                        <span class="ms-1">Eingriffsgrenze</span>
                                    </div>
                                    <div class="legendItem">
                                        <div style="border: 1px dashed rgb(255, 115, 0)" class="d-inline-block legendIcon"></div>
                                        <span class="ms-1">Warngrenze</span>
                                    </div>
                                </div>
                            </div>
                            <div id="overviewPanel">
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-co2_level">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Co²-Gehalt (ppm)</span>
                                        <button class="btn btn-xs btn-secondary chart-history-button" data-chart="co2_level" data-chart-title="Co²-Gehalt"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="co2-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-temperature_water">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Wassertemperatur (°C)</span>
                                        <button class="btn btn-xs btn-secondary chart-history-button" data-chart="temperature_water" data-chart-title="Wassertemperatur"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="temperature-water-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-temperature_air">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Lufttemperatur (°C)</span>
                                        <button class="btn btn-xs btn-secondary chart-history-button" data-chart="temperature_air" data-chart-title="Lufttemperatur"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="temperature-air-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-humidity">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Luftfeuchtigkeit (%)</span>
                                        <button class="btn btn-xs btn-secondary chart-history-button" data-chart="humidity" data-chart-title="Luftfeuchtigkeit"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="humidity-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-ph_value">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>pH-Wert</span>
                                        <button class="btn btn-xs btn-secondary chart-history-button" data-chart="ph_value" data-chart-title="pH-Wert"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="ph-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-ec_value">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Elektrischer Leitwert (G)</span>
                                        <button class="btn btn-xs btn-secondary chart-history-button" data-chart="ec_value" data-chart-title="Elektrischer Leitwert"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="ec-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-swimmer_1">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Wasserstand #1 (L)</span>
                                        <button class="btn btn-xs btn-secondary chart-history-button" data-chart="swimmer_1" data-chart-title="Wasserstand #1"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="swimmer-1-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-swimmer_2">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Wasserstand #2 (L)</span>
                                        <button class="btn btn-xs btn-secondary chart-history-button" data-chart="swimmer_2" data-chart-title="Wasserstand #2"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="swimmer-2-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-swimmer_3">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Wasserstand #3 (L)</span>
                                        <button class="btn btn-xs btn-secondary chart-history-button" data-chart="swimmer_3" data-chart-title="Wasserstand #3"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="swimmer-3-chart-current"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="administration">
                            <div id="plants-accordion" class="mb-3">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-plants-actions" data-table="plants">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-seedling"></i> Pflanzen</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-plants-actions" class="collapse hide" data-bs-parent="#plants-accordion">
                                        <div class="card-body">
                                            <table class="table table-sm w-100 mt-3" id="plantsAdminTable">
                                                <thead>
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>Name</th>
                                                        <th>Eigenschaften</th>
                                                        <th>Optionen</th>
                                                    </tr>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="chart-actions-accordion" class="mb-3">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-chart-actions" data-table="pumps">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-chart-line"></i> Diagramme</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-chart-actions" class="collapse hide" data-bs-parent="#chart-actions-accordion">
                                        <div class="card-body">
                                            <div class="d-flex" id="chartOptionMenu">
                                                <div id="chartOptionNavigation" class="list-group col-md-2 position-relative align-self-start">
                                                    <a class="list-group-item list-group-item-action" href="#chartOptionCo2ConcentrationSection">Co²-Gehalt</a>
                                                    <a class="list-group-item list-group-item-action" href="#chartOptionAirTemperatureSection">Lufttemperatur</a>
                                                    <a class="list-group-item list-group-item-action" href="#chartOptionWaterTemperatureSection">Wassertemperatur</a>
                                                    <a class="list-group-item list-group-item-action" href="#chartOptionHumiditySection">Luftfeuchtigkeit</a>
                                                    <a class="list-group-item list-group-item-action" href="#chartOptionPhSection">pH-Wert</a>
                                                    <a class="list-group-item list-group-item-action" href="#chartOptionEcSection">Elektrischer Leitwert</a>
                                                    <a class="list-group-item list-group-item-action" href="#chartOptionWaterLevel1Section">Wasserstand #1</a>
                                                    <a class="list-group-item list-group-item-action" href="#chartOptionWaterLevel2Section">Wasserstand #2</a>
                                                    <a class="list-group-item list-group-item-action" href="#chartOptionWaterLevel3Section">Wasserstand #3</a>
                                                </div>
                                                <div data-bs-spy="scroll" data-bs-target="#chartOptionNavigation" data-bs-offset="0" class="col-md-10 position-relative" id="chartOptionContainer">
                                                    <div id="chartOptionsFormContainer" class="p-3">
                                                        <form enctype="text/plain" method="post" action="/" id="chartOptionsForm" class="w-100">
                                                            <input type="submit" class="d-none" id="savechartOptionsSubmit">
                                                            <div class="row">
                                                                <h5 id="chartOptionCo2ConcentrationTemperatureSection" class="col-md-12">Co²-Gehalt</h5>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionCo2ConcentrationSetpointInput" class="col-form-label col-md-6">Sollwert:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionCo2ConcentrationSetpointInput" aria-label="Sollwert für Co²-Gehalt" aria-describedby="chartOptionCo2ConcentrationSetpointInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionCo2ConcentrationUpperControlLimitInput" class="col-form-label col-md-6">Obere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionCo2ConcentrationUpperControlLimitInput" aria-label="Obere Eingriffsgrenze für Co²-Gehalt" aria-describedby="chartOptionCo2ConcentrationUpperControlLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionCo2ConcentrationLowerControlLimitInput" class="col-form-label col-md-6">Untere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionCo2ConcentrationLowerControlLimitInput" aria-label="Untere Eingriffsgrenze für Co²-Gehalt" aria-describedby="chartOptionCo2ConcentrationLowerControlLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionCo2ConcentrationUpperWarningLimitInput" class="col-form-label col-md-6">Obere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionCo2ConcentrationUpperWarningLimitInput" aria-label="Obere Warngrenze für Co²-Gehalt" aria-describedby="chartOptionCo2ConcentrationUpperWarningLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionCo2ConcentrationLowerWarningLimitInput" class="col-form-label col-md-6" >Untere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionCo2ConcentrationLowerWarningLimitInput" aria-label="Untere Warngrenze für Co²-Gehalt" aria-describedby="chartOptionCo2ConcentrationLowerWarningLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <h5 id="chartOptionAirTemperatureSection" class="mt-4 col-md-12">Lufttemperatur</h5>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionAirTemperatureSetpointInput" class="col-form-label col-md-6">Sollwert:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionAirTemperatureSetpointInput" aria-label="Sollwert für Lufttemperatur" aria-describedby="chartOptionAirTemperatureSetpointInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionAirTemperatureUpperControlLimitInput" class="col-form-label col-md-6">Obere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionAirTemperatureUpperControlLimitInput" aria-label="Obere Eingriffsgrenze für Lufttemperatur" aria-describedby="chartOptionAirTemperatureUpperControlLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionAirTemperatureLowerControlLimitInput" class="col-form-label col-md-6">Untere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionAirTemperatureLowerControlLimitInput" aria-label="Untere Eingriffsgrenze für Lufttemperatur" aria-describedby="chartOptionAirTemperatureLowerControlLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionAirTemperatureUpperWarningLimitInput" class="col-form-label col-md-6">Obere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionAirTemperatureUpperWarningLimitInput" aria-label="Obere Warngrenze für Lufttemperatur" aria-describedby="chartOptionAirTemperatureUpperWarningLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionAirTemperatureLowerWarningLimitInput" class="col-form-label col-md-6" >Untere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionAirTemperatureLowerWarningLimitInput" aria-label="Untere Warngrenze für Lufttemperatur" aria-describedby="chartOptionAirTemperatureLowerWarningLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <h5 id="chartOptionWaterTemperatureSection" class="mt-4 col-md-12">Wassertemperatur</h5>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterTemperatureSetpointInput" class="col-form-label col-md-6">Sollwert:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterTemperatureSetpointInput" aria-label="Sollwert für Temperatur" aria-describedby="chartOptionWaterTemperatureSetpointInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterTemperatureUpperControlLimitInput" class="col-form-label col-md-6">Obere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterTemperatureUpperControlLimitInput" aria-label="Obere Eingriffsgrenze für Temperatur" aria-describedby="chartOptionWaterTemperatureUpperControlLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterTemperatureLowerControlLimitInput" class="col-form-label col-md-6">Untere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterTemperatureLowerControlLimitInput" aria-label="Untere Eingriffsgrenze für Temperatur" aria-describedby="chartOptionWaterTemperatureLowerControlLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterTemperatureUpperWarningLimitInput" class="col-form-label col-md-6">Obere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterTemperatureUpperWarningLimitInput" aria-label="Obere Warngrenze für Temperatur" aria-describedby="chartOptionWaterTemperatureUpperWarningLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterTemperatureLowerWarningLimitInput" class="col-form-label col-md-6" >Untere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterTemperatureLowerWarningLimitInput" aria-label="Untere Warngrenze für Temperatur" aria-describedby="chartOptionWaterTemperatureLowerWarningLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                            <h5 id="chartOptionHumiditySection" class="mt-4 col-md-12">Luftfeuchtigkeit</h5>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionHumiditySetpointInput" class="col-form-label col-md-6">Sollwert:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionHumiditySetpointInput" aria-label="Sollwert für Luftfeuchtigkeit" aria-describedby="chartOptionHumiditySetpointInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionHumidityUpperControlLimitInput" class="col-form-label col-md-6">Obere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionHumidityUpperControlLimitInput" aria-label="Obere Eingriffsgrenze für Luftfeuchtigkeit" aria-describedby="chartOptionHumidityUpperControlLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionHumidityLowerControlLimitInput" class="col-form-label col-md-6">Untere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionHumidityLowerControlLimitInput" aria-label="Untere Eingriffsgrenze für Luftfeuchtigkeit" aria-describedby="chartOptionHumidityLowerControlLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionHumidityUpperWarningLimitInput" class="col-form-label col-md-6">Obere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionHumidityUpperWarningLimitInput" aria-label="Obere Warngrenze für Luftfeuchtigkeit" aria-describedby="chartOptionHumidityUpperWarningLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionHumidityLowerWarningLimitInput" class="col-form-label col-md-6" >Untere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionHumidityLowerWarningLimitInput" aria-label="Untere Warngrenze für Luftfeuchtigkeit" aria-describedby="chartOptionHumidityLowerWarningLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <h5 id="chartOptionPhSection" class="mt-4 col-md-12">pH-Wert</h5>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionPhSetpointInput" class="col-form-label col-md-6">Sollwert:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionPhSetpointInput" aria-label="Sollwert für Temperatur" aria-describedby="chartOptionPhSetpointInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionPhUpperControlLimitInput" class="col-form-label col-md-6">Obere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionPhUpperControlLimitInput" aria-label="Obere Eingriffsgrenze für Temperatur" aria-describedby="chartOptionPhUpperControlLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionPhLowerControlLimitInput" class="col-form-label col-md-6">Untere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionPhLowerControlLimitInput" aria-label="Untere Eingriffsgrenze für Temperatur" aria-describedby="chartOptionPhLowerControlLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionPhUpperWarningLimitInput" class="col-form-label col-md-6">Obere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionPhUpperWarningLimitInput" aria-label="Obere Warngrenze für Temperatur" aria-describedby="chartOptionPhUpperWarningLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionPhLowerWarningLimitInput" class="col-form-label col-md-6" >Untere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionPhLowerWarningLimitInput" aria-label="Untere Warngrenze für Temperatur" aria-describedby="chartOptionPhLowerWarningLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <h5 id="chartOptionEcSection" class="mt-4 col-md-12">Elektrischer Leitwert</h5>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionEcSetpointInput" class="col-form-label col-md-6">Sollwert:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionEcSetpointInput" aria-label="Sollwert für elektrischen Leitwert" aria-describedby="chartOptionEcSetpointInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionEcUpperControlLimitInput" class="col-form-label col-md-6">Obere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionEcUpperControlLimitInput" aria-label="Obere Eingriffsgrenze für elektrischen Leitwert" aria-describedby="chartOptionEcUpperControlLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionEcLowerControlLimitInput" class="col-form-label col-md-6">Untere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionEcLowerControlLimitInput" aria-label="Untere Eingriffsgrenze für elektrischen Leitwert" aria-describedby="chartOptionEcLowerControlLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionEcUpperWarningLimitInput" class="col-form-label col-md-6">Obere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionEcUpperWarningLimitInput" aria-label="Obere Warngrenze für elektrischen Leitwert" aria-describedby="chartOptionEcUpperWarningLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionEcLowerWarningLimitInput" class="col-form-label col-md-6" >Untere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionEcLowerWarningLimitInput" aria-label="Untere Warngrenze für elektrischen Leitwert" aria-describedby="chartOptionEcLowerWarningLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <h5 id="chartOptionWaterLevel1Section" class="mt-4 col-md-12">Wasserstand #1</h5>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel1SetpointInput" class="col-form-label col-md-6">Sollwert:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel1SetpointInput" aria-label="Sollwert für Wasserstand #1" aria-describedby="chartOptionWaterLevel1SetpointInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel1UpperControlLimitInput" class="col-form-label col-md-6">Obere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel1UpperControlLimitInput" aria-label="Obere Eingriffsgrenze für Wasserstand #1" aria-describedby="chartOptionWaterLevel1UpperControlLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel1LowerControlLimitInput" class="col-form-label col-md-6">Untere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel1LowerControlLimitInput" aria-label="Untere Eingriffsgrenze für Wasserstand #1" aria-describedby="chartOptionWaterLevel1LowerControlLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel1UpperWarningLimitInput" class="col-form-label col-md-6">Obere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel1UpperWarningLimitInput" aria-label="Obere Warngrenze für Wasserstand #1" aria-describedby="chartOptionWaterLevel1UpperWarningLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel1LowerWarningLimitInput" class="col-form-label col-md-6" >Untere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel1LowerWarningLimitInput" aria-label="Untere Warngrenze für Wasserstand #1" aria-describedby="chartOptionWaterLevel1LowerWarningLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <h5 id="chartOptionWaterLevel2Section" class="mt-4 col-md-12">Wasserstand #2</h5>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel2SetpointInput" class="col-form-label col-md-6">Sollwert:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel2SetpointInput" aria-label="Sollwert für Wasserstand #2" aria-describedby="chartOptionWaterLevel2SetpointInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel2UpperControlLimitInput" class="col-form-label col-md-6">Obere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel2UpperControlLimitInput" aria-label="Obere Eingriffsgrenze für Wasserstand #2" aria-describedby="chartOptionWaterLevel2UpperControlLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel2LowerControlLimitInput" class="col-form-label col-md-6">Untere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel2LowerControlLimitInput" aria-label="Untere Eingriffsgrenze für Wasserstand #2" aria-describedby="chartOptionWaterLevel2LowerControlLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel2UpperWarningLimitInput" class="col-form-label col-md-6">Obere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel2UpperWarningLimitInput" aria-label="Obere Warngrenze für Wasserstand #2" aria-describedby="chartOptionWaterLevel2UpperWarningLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel2LowerWarningLimitInput" class="col-form-label col-md-6" >Untere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel2LowerWarningLimitInput" aria-label="Untere Warngrenze für Wasserstand #2" aria-describedby="chartOptionWaterLevel2LowerWarningLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <h5 id="chartOptionWaterLevel3Section" class="mt-4 col-md-12">Wasserstand #3</h5>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel3SetpointInput" class="col-form-label col-md-6">Sollwert:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel3SetpointInput" aria-label="Sollwert für Wasserstand #3" aria-describedby="chartOptionWaterLevel3SetpointInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel3UpperControlLimitInput" class="col-form-label col-md-6">Obere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel3UpperControlLimitInput" aria-label="Obere Eingriffsgrenze für Wasserstand #3" aria-describedby="chartOptionWaterLevel3UpperControlLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel3LowerControlLimitInput" class="col-form-label col-md-6">Untere Eingriffsgrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel3LowerControlLimitInput" aria-label="Untere Eingriffsgrenze für Wasserstand #3" aria-describedby="chartOptionWaterLevel3LowerControlLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel3UpperWarningLimitInput" class="col-form-label col-md-6">Obere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel3UpperWarningLimitInput" aria-label="Obere Warngrenze für Wasserstand #3" aria-describedby="chartOptionWaterLevel3UpperWarningLimitInput" pattern="\d">
                                                                </div>
                                                                <div class="mt-2 col-md-6">
                                                                    <label for="chartOptionWaterLevel3LowerWarningLimitInput" class="col-form-label col-md-6" >Untere Warngrenze:</label>
                                                                    <input required type="text" class="form-control col-md-6" id="chartOptionWaterLevel3LowerWarningLimitInput" aria-label="Untere Warngrenze für Wasserstand #3" aria-describedby="chartOptionWaterLevel3LowerWarningLimitInput" pattern="\d">
                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mt-4 d-flex formContainer justify-content-end" style="gap: 5px">
                                                <button type="button" class="btn btn-success" id="savechartOptions">Speichern</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--<div id="pump-actions-accordion" class="mb-3">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-pump-actions" data-table="pumps">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-fan"></i> Pumpensteuerung</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-pump-actions" class="collapse hide" data-bs-parent="#pump-actions-accordion">
                                        <div class="card-body">
                                            <table class="table table-sm w-100 mt-3" id="pumpsAdminTable">
                                            <thead>
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Leistung</th>
                                                    <th>?</th>
                                                    <th>?</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>-->
                            <div id="user-actions-accordion" class="mb-3">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-user-actions" data-table="userAccounts">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-user-circle"></i> Benutzerkonten</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-user-actions" class="collapse hide" data-bs-parent="#actuator-user-accordion">
                                        <div class="card-body">
                                            <table class="table table-sm w-100 mt-3" id="userAccountsAdminTable">
                                                <thead>
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>Benutzername</th>
                                                        <th>Letzte Anmeldung</th>
                                                    </tr>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="logs-accordion">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-logs-actions" data-table="logs">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-scroll"></i> Logs</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-logs-actions" class="collapse hide" data-bs-parent="#logs-accordion">
                                        <div class="card-body">
                                            <table class="table table-sm w-100 mt-3" id="logsAdminTable">
                                                <thead>
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>Zeitpunkt</th>
                                                        <th>Kategorie</th>
                                                        <th>Nachricht</th>
                                                    </tr>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="historyGallery">
                            <form enctype="text/plain" method="post" action="/" class="formContainer mb-3 w-100 d-flex" id="historyGalleryTimespanForm">
                                <label for="historyGalleryTimespanSelect" class="col-form-label me-2">Zeitraum:</label>
                                <input type="text" id="historyGalleryTimespanSelect" class="form-control w-auto d-inline-block" />
                                <button type="submit" class="btn btn-primary align-baseline" id="getGalleryItemsButton">Anzeigen</button>
                            </form>
                            <div id="historyGalleryPanel" class="mt-3"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <footer></footer>
        <div class="modal fade" id="chartHistoryModal">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Verlauf von <span id="chartHistoryElementTitle"></span></h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row mb-3">
                            <div class="col-md-3" id="historyChartTimespanColumn">
                                <label for="historyTimespan" class="form-check-label">Zeitraum:</label>
                                <select id="historyTimespan" class="form-select">
                                    <option value="3600" selected="selected">Letzte Stunde</option>
                                    <option value="10800">Letzte 3 Stunden</option>
                                    <option value="21600">Letzte 6 Stunden</option>
                                    <option value="43200">Letzte 12 Stunden</option>
                                    <option value="86400">Letzte 24 Stunden</option>
                                </select>
                            </div>
                            <div class="col-md-3 offset-md-6" id="historyChartMinMaxColumn">
                                <i class="fas fa-angle-up text-danger"></i> <span id="historyChartMaximumValue"></span><br>
                                <i class="fas fa-angle-down text-primary"></i> <span id="historyChartMinimumValue"></span>
                            </div>
                        </div>
                        <canvas id="history-chart"></canvas>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Schließen</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="mainModal">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Dieser Titel gehört ersetzt!</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body"></div>
                    <div class="modal-footer"></div>
                </div>
            </div>
        </div>
    </body>
</html>
