<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="utf-8">
        <title>Hydropoc</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="verdammt">
        <meta name="keywords" content="lol,wtf">
        <meta name="copyright" content="IN20">
        <link rel="icon" href="img/favicon.ico" type="image/x-icon">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/fontawesome.css">
        <link rel="stylesheet" href="css/dataTables.bootstrap5.min.css">
        <link rel="stylesheet" href="css/bootstrap4-toggle.min.css">
        <script src="js/jquery-3.6.0.min.js"></script>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script src="js/datatables.min.js"></script>
        <script src="js/dataTables.bootstrap5.min.js"></script>
        <script src="js/chart.min.js"></script>
        <script src="js/bootstrap4-toggle.min.js"></script>
        <script src="js/litepicker.js"></script>
        <script>
            Chart.register("filler");
            const apiURL = "http://api.hydropoc.jongmans.net/api";
            const charts = {
                current: {
                    temperature_water: {},
                    temperature_air: {},
                    humidity: {},
                    ph_value: {},
                    swimmer_1: {},
                    swimmer_2: {},
                    swimmer_3: {},
                    co2_level: {},
                    ec_value: {}
                },
                history: {},
                scales: {
                    temperature_water: [0, 100],
                    temperature_air: [0, 100],
                    humidity: [0, 100],
                    ph_value: [0, 14],
                    swimmer_1: [0, 100],
                    swimmer_2: [0, 100],
                    swimmer_3: [0, 100],
                    co2_level: [0, 1000],
                    ec_value: [0, 100]
                }
            };
            const dataTablesLocalisation = {
                sEmptyTable: "Keine Daten vorhanden",
                sInfo: "_START_ bis _END_ von _TOTAL_ Einträgen",
                sInfoEmpty: "0 bis 0 von 0 Einträgen",
                sInfoFiltered: "(gefiltert aus _MAX_ Einträgen)",
                sInfoPostFix: "",
                sInfoThousands: ".",
                sLengthMenu: "_MENU_ Einträge anzeigen",
                sLoadingRecords: "Wird geladen...",
                sProcessing: "Bitte warten...",
                sSearch: "Suchen:",
                sZeroRecords: "Keine Einträge vorhanden.",
                oPaginate: {
                    sFirst: "Erste",
                    sPrevious: "Zurück",
                    sNext: "Nächste",
                    sLast: "Letzte"
                },
                oAria: {
                    sSortAscending: ": aktivieren, um Spalte aufsteigend zu sortieren",
                    sSortDescending: ": aktivieren, um Spalte absteigend zu sortieren"
                }
            }
            const adminDataTables = {};
            const dataTablesAdminOptions = {
                plants: {
                    order: [0, "asc"],
                    language: dataTablesLocalisation,
                    lengthMenu: [5, 10, 25, 50],
                    columns: [
                        {
                            name: "id",
                            data: "id"
                        },
                        {
                            name: "name",
                            data: function(row, type, set, meta) {
                                let index = plantProperties.findIndex(key => key["id"] === row["id"]);
                                return (index >= 0 ? plantProperties[index]["name"]: "(Unbekannte ID: " + row["id"] + ")");
                            }
                        },
                        {
                            name: "properties",
                            data: function(row, type, set, meta) {
                                let content = "";
                                let index = plantProperties.findIndex(key => key["id"] === row["id"]);
                                if (index >= 0) {
                                    content += "<div class='accordion accordion-flush' id='accordionPlantsAdminTableProperties-" + row["id"] + "'>";
                                    let properties = Object.getOwnPropertyNames(plantPropertyNames);
                                    for (property of properties) {
                                        content += "<div class='accordion-item'>";
                                        content += "<h2 class='accordion-header' id='flushPlantsAdminTable" + property + "PropertyHeader-" + row["id"] + "'>";
                                        content += "<button class='accordion-button collapsed p-2' type='button' data-bs-toggle='collapse' data-bs-target='#flush-collapsePlantsAdminTable" + property + "Property-" + row["id"] + "' aria-expanded='false' aria-controls='plantsAdminTable" + property + "Property-" + row["id"] + "'>";
                                        content += plantPropertyNames[property] + "</button></h2>";
                                        content += "<div id='flush-collapsePlantsAdminTable" + property + "Property-" + row["id"] + "' class='accordion-collapse collapse' aria-labelledby='flushPlantsAdminTable" + property + "PropertyHeader-" + row["id"] + "' data-bs-parent='#accordionPlantsAdminTableProperties-" + row["id"] + "'>";
                                        content += "<div class='accordion-body p-2'><div class='row'><div class='col-md-8'>Sollwert:</div><div class='col-md-4'>" + (index >= 0 ? plantProperties[index]["properties"][property]["setpoint"] : "(Keine Daten vorhanden)") + "</div>";
                                        content += "<div class='col-md-8'>Obere Eingriffsgrenze:</div><div class='col-md-4'>" + (index >= 0 ? plantProperties[index]["properties"][property]["upperControlLimit"] : "(Keine Daten vorhanden)") + "</div>";
                                        content += "<div class='col-md-8'>Untere Eingriffsgrenze:</div><div class='col-md-4'>" + (index >= 0 ? plantProperties[index]["properties"][property]["lowerControlLimit"] : "(Keine Daten vorhanden)") + "</div>";
                                        content += "<div class='col-md-8'>Obere Warngrenze:</div><div class='col-md-4'>" + (index >= 0 ? plantProperties[index]["properties"][property]["upperWarningLimit"] : "(Keine Daten vorhanden)") + "</div>";
                                        content += "<div class='col-md-8'>Untere Warngrenze:</div><div class='col-md-4'>" + (index >= 0 ? plantProperties[index]["properties"][property]["lowerWarningLimit"] : "(Keine Daten vorhanden)") + "</div>";
                                        content += "</div></div></div></div>";
                                    }
                                    content += "</div>";
                                }
                                else {
                                    content = "(Keine Daten vorhanden)";
                                }
                                return content;
                            },
                            width: "50%"
                        },
                        {
                            name: "options",
                            data: function(row, type, set, meta) {
                                let buttons = "<div class='d-flex flex-wrap' style='gap: 5px'>";
                                let index = plantProperties.findIndex(key => key["id"] === row["id"]);
                                if (index >= 0) {
                                    buttons += "<button type='button' class='btn btn-sm btn-primary' style='width: 32px' onclick='editPlant(" + row["id"] + ")'><i class='fas fa-pen'></i></button><button type='button' class='btn btn-sm btn-danger' style='width: 32px' onclick='confirmPlantDeletion(" + row["id"] + ")'><i class='fas fa-times'></i></button>";
                                }
                                else {
                                    buttons += "<button type='button' class='btn btn-sm btn-primary disabled' disabled='disabled' style='width: 32px'><i class='fas fa-pen'></i></button><button type='button' class='btn btn-sm btn-danger disabled' disabled='disabled' style='width: 32px'><i class='fas fa-times'></i></button>";
                                }
                                buttons += "</div>";
                                return buttons;
                            }
                        }
                    ],
                    ajax: {
                        url: "dataTables_test.php",
                        type: 'GET',
                        data: {
                            type: "plantdetails"
                        },
                        dataSrc: function(response) {
                            Object.assign(plantProperties, response["data"]);
                            return response["data"];
                        }
                    },
                    drawCallback: function(settings) {
                        $("#plantsAdminTable").parent().addClass("table-container");
                    }
                },
                userAccounts: {
                    order: [0, "asc"],
                    language: dataTablesLocalisation,
                    columns: [
                        {
                            name: "id",
                            data: "id"
                        },
                        {
                            name: "username",
                            data: "username"
                        },
                        {
                            name: "creation_date",
                            data: "creation_date",
                            render: function(data, type, row) {
                                if (type === "display" || type === "filter") {
                                    let date = new Date(Number.parseInt(data));
                                    return ("00" + date.getDate().toString()).substr(-2, 2) + "." + ("00" + (date.getMonth() +1).toString()).substr(-2, 2) + "." + date.getFullYear() + ", " + ("00" + (date.getHours().toString())).substr(-2, 2) + ":" + ("00" + (date.getMinutes().toString())).substr(-2, 2) + ":" + ("00" + (date.getSeconds().toString())).substr(-2, 2);
                                }
                                return data;
                            }
                        },
                        {
                            name: "permission_level",
                            data: "permission_level"
                        }
                    ],
                    ajax: {
                        url: apiURL + "/user/userlist",
                        type: "POST",
                        contentType: "application/json",
                        data: function(data, settings) {
                            data["authentification"] = getCookie("authToken");
                            return JSON.stringify(data);
                        },
                        dataSrc: function(response) {
                            return response;
                        }
                    },
                    drawCallback: function(settings) {
                        $("#userAccountsAdminTable").parent().addClass("table-container");
                    }
                },
                plantPrograms: {
                    order: [0, "asc"],
                    language: dataTablesLocalisation,
                    columns: [
                        {
                            name: "id",
                            data: "id"
                        },
                        {  
                            name: "plantID",
                            data: "plantID",
                            visible: false
                        },
                        {
                            name: "name",
                            data: "name"
                        },
                        {
                            name: "description",
                            data: "description"
                        },
                        {
                            name: "options",
                            data: function(row, type, set, meta) {
                                let buttons = "<div class='d-flex flex-wrap' style='gap: 5px'>";
                                let index = plantPrograms.findIndex(key => key["id"] === row["id"]);
                                if (index >= 0) {
                                    buttons += "<button type='button' class='btn btn-sm btn-primary' style='width: 32px' onclick='editPlantProgram(" + row["id"] + ")'><i class='fas fa-pen'></i></button><button type='button' class='btn btn-sm btn-danger' style='width: 32px' onclick='confirmPlantProgramDeletion(" + row["id"] + ")'><i class='fas fa-times'></i></button>";
                                }
                                else {
                                    buttons += "<button type='button' class='btn btn-sm btn-primary disabled' disabled='disabled' style='width: 32px'><i class='fas fa-pen'></i></button><button type='button' class='btn btn-sm btn-danger disabled' disabled='disabled' style='width: 32px'><i class='fas fa-times'></i></button>";
                                }
                                buttons += "</div>";
                                return buttons;
                            }
                        }
                    ],
                    ajax: {
                        url: "dataTables_test.php",
                        type: "POST",
                        contentType: "application/json",
                        data: function(data, settings) {
                            data["type"] = "plantPrograms"; // Test
                            data["authentification"] = getCookie("authToken");
                            return JSON.stringify(data);
                        },
                        dataSrc: function(response) {
                            return response;
                        }
                    },
                    drawCallback: function(settings) {
                        $("#plantProgramsAdminTable").parent().addClass("table-container");
                    }
                },
                pumps: {
                    order: [0, "asc"],
                    language: dataTablesLocalisation,
                    columns: [
                        {
                            name: "name",
                            data: "name"
                        },
                        {
                            name: "power",
                            data: "power"
                        },
                        {
                            name: "rpm",
                            data: "rpm"
                        },
                        {
                            name: "status",
                            data: "status"
                        }
                    ],
                    ajax: {
                        url: "dataTables_test.php",
                        type: "POST",
                        contentType: "application/json",
                        data: function(data, settings) {
                            data["type"] = "pumps"; // Test
                            data["authentification"] = getCookie("authToken");
                            return JSON.stringify(data);
                        },
                        dataSrc: function(response) {
                            return response;
                        }
                    },
                    drawCallback: function(settings) {
                        // checkboxen müssen IDs haben!
                        $("#pumpsAdminTable > tbody [type='checkbox']").bootstrapToggle();
                    }
                },
                logs: {
                    language: dataTablesLocalisation,
                    serverSide: true,
                    columns: [
                        {
                            name: "id",
                            data: "id",
                            visible: false
                        },
                        {
                            name: "timestamp",
                            data: "timestamp",
                            width: "15%",
                            render: function(data, type, row) {
                                if (type === "display" || type === "filter") {
                                    let date = new Date(Math.trunc(Number.parseInt(data) /1000));
                                    return ("00" + date.getDate().toString()).substr(-2, 2) + "." + ("00" + (date.getMonth() +1).toString()).substr(-2, 2) + "." + date.getFullYear() + ", " + ("00" + (date.getHours().toString())).substr(-2, 2) + ":" + ("00" + (date.getMinutes().toString())).substr(-2, 2) + ":" + ("00" + (date.getSeconds().toString())).substr(-2, 2);
                                }
                                return data;
                            }
                        },
                        {
                            name: "type",
                            data: function(row, type, set, meta) {
                                return dataTableTranslationStrings["logs"][row["type"]];
                            },
                            width: "8%"
                        },
                        {
                            name: "message",
                            data: "message",
                            width: "50%",
                            orderable: false
                        }
                    ],
                    order: [1, "asc"],
                    ajax: {
                        url: apiURL + "/device/logs",
                        type: "POST",
                        contentType: "application/json",
                        data: function(data, settings) {
                            //data["type"] = $("#logsAdminCategorySelection").val();
                            data["authentification"] = getCookie("authToken");
                            console.log(data.order);
                            return JSON.stringify(data);
                        },
                        dataSrc: function(response) {
                            return response["data"];
                        }
                    },
                    drawCallback: function(settings) {
                        $("#logsAdminTable").parent().addClass("table-container");
                    }
                }
            };
            const dataTableTranslationStrings = {
                logs: {
                    error: "Fehler",
                    success: "Erfolg",
                    info: "Information"
                },
                pumps: {
                    //
                }
            };
            /*
            const plantPrograms = [];
            const plantProperties = [];
            const userAccounts = [];
            const pumps = [];
            const statusCodes = {
                0: "Unbekannter Fehler aufgetreten.",
                400: "Die Anfrage ist fehlerhaft.",
                401: "",
                403: "Der Zugriff auf die angeforderte Ressource ist nicht erlaubt.",
                404: "Die angeforderte Ressource wurde nicht gefunden.",
            }
            */
            //var viewportWidth = visualViewport["width"];
            var isLoadingCurrentChartData = false;
            var isLoadingHistoryChartData = false;
            var systemInfosTimer = null;
            var isLoadingSystemInfos = false;
            var picker = null;
            function switchAlert(element, type) {
                type = type.toLowerCase();
                element = $("#section-" + element)[0];
                if (["danger", "warning", "success"].includes(type) && !$(element).hasClass(type)) {
                    $(element).removeClass("danger warning success").addClass(type);
                }
            }
            function getCSSVar(val) {
                return getComputedStyle($(":root")[0]).getPropertyValue(val);
            }
            function getGradient(context, chartArea, data) {
                let gradient = context.createLinearGradient(0, chartArea.bottom, 0, chartArea.top);
                let steps = Object.getOwnPropertyNames(data);
                for (step of steps) {
                    gradient.addColorStop(step, data[step]);
                }
                return gradient;
            }
            function togglePump(pump) {
                $(pump).attr("disabled", "disabled");
                let parent = $(pump).parentsUntil("td");
                if ($(parent).find("[data-processing='true']").length === 0) {
                    $(parent).after("<span data-processing='true' class='spinner-border spinner-border-sm align-middle ms-2 text-secondary'></span>");
                }
                let data = {
                    authentification: getCookie("authToken"),
                    pump: $(pump).attr("id"),
                    state: $(pump).val()
                }
                $.post({
                    url: "history_charts_data.php",
                    data: JSON.stringify(data),
                    processData: false,
                    contentType: "application/json",
                    crossDomain: true,
                    timeout: 10000
                }).done(function(response) {
                    $(pump).removeAttr("disabled");
                    $(parent).parent().find("[data-processing='true']").remove();
                }).fail(function(response) {
                    $("#pumpsAdminTable_wrapper").before(Alert.create("danger", response["status"] + ": " + response["statusText"]));
                    $("#pumpsAdminTable").DataTable().ajax.reload();
                }).always(function() {
                });
            }
            function disableMainModal(mainButton) {
                if ($("#body-overlay").length == 0) {
                    $("body").prepend("<div id='body-overlay' style='background-color: transparent'></div>");
                }
                if ($(mainButton).find("[data-processing='true']").length === 0) {
                    $(mainButton).prepend("<span class='spinner-border me-1 text-white kreiselchen align-text-bottom' data-processing='true'></span>");
                }
                $("#mainModal .modal-footer > button").attr("disabled", "disabled");
                $("#mainModal .modal-header > [data-bs-dismiss='modal']").attr("disabled", "disabled");
                $("#mainModal .modal-body > .alert").remove();
            }
            function enableMainModal(mainButton) {
                $(mainButton).find("[data-processing='true']").remove();
                $(mainButton).removeAttr("disabled");
                $("#body-overlay").remove();
                $("#mainModal .modal-footer > [data-bs-dismiss='modal']").removeAttr("disabled");
                $("#mainModal .modal-header > [data-bs-dismiss='modal']").removeAttr("disabled");
            }
            function showHistoryGalleryImage(wtf) {
                let img = $(wtf).find("img:first-of-type");
                let url = $(img).attr("src");
                let path = url.match(/([^\.\/\\]+)(\.[^\.]+)?$/i);
                let data = {
                    name: "showHistoryGalleryImage",
                    size: "fullscreen",
                    title: {
                        text: (path !== null && path.length >= 1 ? path[0] : "(Unbekannte Datei)")
                    },
                    content: {
                        text: "<img src='" + url + "' class='mw-100'>"
                    }
                };
                Modal.create(data);
            }
            function login() {
                if ($("#mainModal").hasClass("show") && $("#mainModal").attr("data-name") === "login") {
                    disableMainModal("#loginButton");
                    $.post({
                        url: apiURL + "/user/login",
                        data: JSON.stringify({
                            email: $("#mail").val(),
                            password: $("#password").val()
                        }),
                        processData: false,
                        contentType: "application/json",
                        crossDomain: true,
                        timeout: 10000
                    }).done(function(response) {
                        let date = new Date();
                        date.setHours(date.getHours() + 168); // = 1 Woche
                        document.cookie = "authToken=" + encodeURIComponent(response["authentification"]) + "; expires=" + date.toUTCString() + "; path=/"; //SameSite=None; Secure"; geht nur bei HTTPS
                        document.cookie = "username=" + encodeURIComponent(response["username"]) + "; expires=" + date.toUTCString() + "; path=/"; // SameSite=None; Secure"; geht nur bei HTTPS
                        if (getCookie("authToken").length >= 1 && getCookie("username").length >= 1) {
                            $("a[href='#login']").addClass("d-none");
                            $("a[href='#logout']").removeClass("d-none");
                            $("[data-current-user]").removeClass("d-none").html("<i class='fas fa-user-injured'></i> " + response["username"]);
                            $("#mainTabNav > li:last-of-type").removeClass("d-none");
                            bootstrap.Modal.getInstance($("#mainModal")[0]).hide();
                        }
                        else {
                            //
                        }
                    }).fail(function(response) {
                        $("#mainModal .modal-body").prepend(Alert.create("danger", (Number.parseInt(response["status"]) === 401 ? "Ungültige Anmeldedaten" : response["status"] + ": " + response["statusText"])));
                    }).always(function() {
                        enableMainModal("#loginButton");
                    });
                }
            }
            // Zurzeit nicht in Verwendung
            function toggleFormState(element, wtf) {
                if ($(element).prop("checked")) {
                    $(wtf).attr("disabled", "disabled");
                }
                else {
                    $(wtf).removeAttr("disabled");
                }
            }
            function showPlantProgramCreationModal(wtf = null) {
                //
            }
            Number.prototype.duration = function() {
                let sec_num = parseInt(this, 10);
                let weeks = Math.floor((sec_num / 3600 / 24) / 7);
                let days = Math.floor((sec_num / 3600 / 24) % 7);
                let hours = Math.floor((sec_num / 3600) % 24);
                let minutes = Math.floor((sec_num / 60) % 60);
                let seconds = sec_num % 60;
                let duration = "";
                if (weeks >= 1) {
                    duration += weeks + (weeks >= 2 ? " Wochen, " : " Woche, ");
                }
                if (days >= 1) {
                    duration += days + (days >= 2 ? " Tage, " : " Tag, ");
                }
                if (hours >= 1) {
                    duration += hours + (hours >= 2 ? " Stunden, " : " Stunde, ");
                }
                if (minutes >= 1) {
                    duration += minutes + (minutes >= 2 ? " Minuten, " : " Minute, ");
                }
                if (seconds >= 1) {
                    duration += seconds + (seconds >= 2 ? " Sekunden, " : " Sekunde, ");
                }
                return duration.substr(0, duration.length -2);
            }
            function readjustTables() {
                let collapses = ["#collapse-plants-actions", "#collapse-plants-programs-actions", "#collapse-user-actions", "#collapse-pump-actions", "#collapse-logs-actions"];
                let element = null;
                let tableName = null;
                for (collapse of collapses) {
                    element = $("a[href='" + collapse + "']");
                    tableName = $(element).attr("data-table");
                    if (DataTable.isDataTable(tableName) && $(element).attr("aria-expanded") === "true") {
                        adminDataTables[tableName].columns.adjust().draw();
                    }
                }
            }
            function updateSystemInfos() {
                if ($("#mainModal").hasClass("show") && $("#mainModal").attr("data-name") === "systemInfos" && !isLoadingSystemInfos) {
                    isLoadingSystemInfos = true;
                    $.get({
                        url: apiURL + "/device/environment",
                        crossDomain: true,
                        timeout: 10000
                    }).done(function(response) {
                        let statsText = "";
                        if (response.hasOwnProperty("osname")) {
                            statsText += "<tr><td class='align-top'>Betriebssystem</td><td>" + response["osname"] + "</td></tr>";
                        }
                        if (response.hasOwnProperty("arch")) {
                            statsText += "<tr><td class='align-top'>Architektur</td><td>" + response["arch"] + "</td></tr>";
                        }
                        if (response.hasOwnProperty("cpus")) {
                            statsText += "<tr><td class='align-top'>CPU</td><td>" + response["cpus"][0]["model"];
                            for (let [index, cpu] of response["cpus"].entries()) {
                                statsText += "<div>CPU #" + index + ":<div class='ps-3'>Takt: " + cpu["speed"] + "MHz</div></div>";
                            }
                            statsText += "</td></tr>";
                        }
                        if (response.hasOwnProperty("memory") && response.hasOwnProperty("totalmemory")) {
                            statsText += "<tr><td class='align-top'>Speicher</td><td>" + Math.floor((response["memory"] / 1024) / 1024) + " MB/" + Math.floor((response["totalmemory"] / 1024) / 1024) + " MB (~" + Math.floor(((response["memory"] / response["totalmemory"]) *100)) + " %)</td></tr>";
                        }
                        if (response.hasOwnProperty("hostname")) {
                            statsText += "<tr><td class='align-top'>Host</td><td>" + response["hostname"] + "</td></tr>";
                        }
                        if (response.hasOwnProperty("uptime")) {
                            statsText += "<tr><td class='align-top'>Laufzeit</td><td>" + response["uptime"].duration() + "</td></tr>";
                        }
                        $("#systemInfosTable").html(statsText);
                    }).fail(function(response) {
                        console.log(response);
                    }).always(function() {
                        isLoadingSystemInfos = false;
                    });
                }
            }
            // Wird verwendet, um Funktionen innerhalb von Objekten auszuführen
            function achso(callback, args = null) {
                callback.apply(this, args);
            }
            class Modal {
                /*
                data: {
                     size?: sm|default|lg|xl|fullscreen,
                    static?: bool,
                    name: string,
                    events?: {
                        hide: {
                                function: function() { },
                                args?: []
                            }
                        }
                    },
                    title: {
                        text: string
                    },
                    content: {
                        text: string
                        options?: {
                            scroll?: bool,
                            align?: left|center|right
                        }
                    },
                    footer?: {
                        buttons?: {
                            default?: {
                                text: string,
                                class?: string,
                                display?: bool,
                                attributes?: {
                                    attribute: value
                                }
                            }
                            // Eigene
                            custom?: [
                                {
                                    text: string,
                                    class?: string,
                                    attributes?: {},
                                    actions: {
                                        click: {
                                                function: (string|function() {}),
                                                args?: []
                                            }
                                        }
                                    }
                                }]
                            }
                        }
                    }
                }
                */
                static create(data = {}) {
                    if ($("#mainModal").hasClass("show")) {
                        $("#mainModal").hide();
                    }
                    $("#mainModal > div:first-of-type").removeClass("modal-sm modal-lg modal-xl modal-fullscreen modal-dialog-scrollable modal-dialog-centered");
                    $("#mainModal").removeAttr("data-bs-backdrop data-bs-keyboard");
                    $("#mainModal .modal-header > h4").empty();
                    $("#mainModal .modal-body").empty();
                    $("#mainModal .modal-footer").empty();
                    if (data.hasOwnProperty("name")) {
                        $("#mainModal").attr("data-name", data["name"]);
                        if (data.hasOwnProperty("size") && ["sm", "lg", "xl", "fullscreen"].includes(data["size"])) {
                            $("#mainModal > div:first-of-type").addClass("modal-" + data["size"]);
                        }
                        if (data.hasOwnProperty("static") && data["static"]) {
                            $("#mainModal").attr({"data-bs-backdrop":"static", "data-bs-keyboard":"false"});
                        }
                        if (data.hasOwnProperty("title")) {
                            console.log(data.title);
                            if (data["title"].hasOwnProperty("text") && !["undefined", "", undefined, null].includes(data["title"]["text"])) {
                                $("#mainModal .modal-header > h4").html(data["title"]["text"]);
                            }
                        }
                        if (data.hasOwnProperty("content")) {
                            if (data["content"].hasOwnProperty("options")) {
                                if (data["content"]["options"].hasOwnProperty("scroll") && data["content"]["options"]["scroll"]) {
                                    $("#mainModal > div:first-of-type").addClass("modal-dialog-scrollable");
                                }
                            }
                            if (data["content"].hasOwnProperty("text") && !["undefined", "", undefined, null].includes(data["content"]["text"])) {
                                $("#mainModal .modal-body").html(data["content"]["text"]);
                            }
                        }
                        if (data.hasOwnProperty("footer")) {
                            if (data["footer"].hasOwnProperty("buttons")) {
                                if (data["footer"]["buttons"].hasOwnProperty("default")) {
                                    let defaultButtonText = "";
                                    let defaultButtonClass = "";
                                    let defaultButton = $("<button type='button' data-bs-dismiss='modal' class='btn'>");
                                    if ((data["footer"]["buttons"].hasOwnProperty("display") && data["footer"]["buttons"]["display"]) || !data["footer"]["buttons"].hasOwnProperty("display")) {
                                        if (data["footer"]["buttons"]["default"].hasOwnProperty("text") && !["undefined", "", undefined, null].includes(data["footer"]["buttons"]["default"]["text"])) {
                                            defaultButtonText = data["footer"]["buttons"]["default"]["text"];
                                        }
                                        else {
                                            defaultButtonText = "Schließen";
                                        }
                                    }
                                    if (data["footer"]["buttons"]["default"].hasOwnProperty("class") && !["undefined", "", undefined, null].includes(data["footer"]["buttons"]["default"]["class"])) {
                                        defaultButtonClass = data["footer"]["buttons"]["default"]["class"];
                                    }
                                    else {
                                        defaultButtonClass = "btn-secondary";
                                    }
                                    $(defaultButton).addClass(defaultButtonClass).html(defaultButtonText);
                                    if (data["footer"]["buttons"]["default"].hasOwnProperty("attributes")) {
                                        let attributes = Object.getOwnPropertyNames(data["footer"]["buttons"]["default"]["attributes"]);
                                        for (let attribute of attributes) {
                                            $(defaultButton).attr(attribute, data["footer"]["buttons"]["default"]["attributes"][attribute]);
                                        }
                                    }
                                    $("#mainModal .modal-footer").append(defaultButton);
                                }
                                else {
                                    $("#mainModal .modal-footer").append("<button type='button' class='btn btn-secondary' data-bs-dismiss='modal'>Schließen</button>");
                                }
                                if (data["footer"]["buttons"].hasOwnProperty("custom")) {
                                    let customButtons = data["footer"]["buttons"]["custom"];
                                    for (let customButton of customButtons) {
                                        if (customButton.hasOwnProperty("text") && !["undefined", "", undefined, null].includes(customButton["text"]) /*&& customButton.hasOwnProperty("actions") && !["undefined", undefined, null].includes(customButton["actions"])*/) {
                                            let currentButton = $("<button type='button' class='btn'>" + customButton["text"] + "</button>");
                                            if (customButton.hasOwnProperty("class") && !["undefined", "", undefined, null].includes(customButton["class"])) {
                                                $(currentButton).addClass(customButton["class"]);
                                            }
                                            else {
                                                $(currentButton).addClass("btn-primary");
                                            }
                                            let actions = Object.getOwnPropertyNames(customButton["actions"]);
                                            for (let action of actions) {
                                                if (customButton["actions"][action].hasOwnProperty("args") && typeof(customButton["actions"][action]["function"]) === "object") {
                                                    $(currentButton).on(action, function() {
                                                        achso(customButton["actions"][action]["function"], customButton["actions"][action]["args"]);
                                                    });
                                                }
                                                else if (typeof(customButton["actions"][action]["function"]) === "function") {
                                                    $(currentButton).on(action, function() {
                                                        achso(customButton["actions"][action]["function"]);
                                                    });
                                                }
                                            }
                                            if (customButton.hasOwnProperty("attributes")) {
                                                let attributes = Object.getOwnPropertyNames(customButton["attributes"]);
                                                for (let attribute of attributes) {
                                                    $(currentButton).attr(attribute, customButton["attributes"][attribute]);
                                                }
                                            }
                                            $("#mainModal .modal-footer").prepend(currentButton);
                                        }
                                    }
                                }
                            }
                            else {
                                $("#mainModal .modal-footer").append("<button type='button' class='btn btn-secondary' data-bs-dismiss='modal'>Schließen</button>");
                            }
                        }
                        else {
                            $("#mainModal .modal-footer").append("<button type='button' class='btn btn-secondary' data-bs-dismiss='modal'>Schließen</button>");
                        }
                        if (data.hasOwnProperty("events")) {
                            let eventNames = {hide: "hide.bs.modal", hidden: "hidden.bs.modal", show: "show.bs.modal", shown: "shown.bs.modal", hidePrevented: "hidePrevented.bs.modal"};
                            let events_ = Object.getOwnPropertyNames(data["events"]);
                            for (let event_ of events_) {
                                if (eventNames.hasOwnProperty(event_)) {
                                    if (data["events"][event_].hasOwnProperty("args") && typeof(data["events"][event_]["function"]) === "object") {
                                        $("#mainModal").one(eventNames[event_], function() {
                                            achso(data["events"][event_]["function"], data["events"][event_]["args"]);
                                        });
                                    }
                                    else if (typeof(data["events"][event_]["function"]) === "function") {
                                        $("#mainModal").one(eventNames[event_], function() {
                                            achso(data["events"][event_]["function"]);
                                        });
                                    }
                                }
                            }
                        }
                        new bootstrap.Modal($("#mainModal")).show();
                    }
                    else {
                        alert("Fehler: Es muss ein gültiger Name für den Dialog angegeben werden.");
                    }
                }
            }
            class Alert {
                static icons = {
                    danger: "fas fa-exclamation-circle",
                    primary: "fas fa-info-circle",
                    warning: "fas fa-exclamation-triangle",
                    success: "fas fa-check-circle"
                };
                static types = ["primary", "success", "danger", "warning"];
                static alerts = [];
                constructor(type, message, options = {}) {
                    // options = {class: "", id = "", closeable = true}
                    type = (Alert.icons.hasOwnProperty(type.toLowerCase()) ? type.toLowerCase() : "info");
                    let text = "";
                    if (Array.isArray(message)) {
                        text = "<ul class='m-0 p-0' style='list-style-position: inside'>";
                        for (let msg of message) {
                            text += "<li>" + msg + "</li>";
                        }
                        text += "</ul>";
                    }
                    else {
                        text = message;
                    }
                    let id;
                    if (!options.hasOwnProperty("id") || ["undefined", undefined, null, ""].includes(options["id"])) {
                        id = 'alert_' + type + '_' + (Date.now() + Number.parseInt(Math.random().toString().split(".")[1]));
                        while (Alert.alerts.includes(id)) {
                            id = 'alert_' + type + '_' + (Date.now() + Number.parseInt(Math.random().toString().split(".")[1]));
                        }
                    }
                    else {
                        if ($("#" + options["id"]).length >= 1) {
                            alert("Die ID \"" + options["id"] + "\" ist bereits einem Element zugeordnet.");
                            return;
                        }
                        id = options["id"];
                    }
                    let element;
                    let closeable = ((options.hasOwnProperty("closeable") && options["closeable"]) || !options.hasOwnProperty("closeable") ? true : false);
                    let classes = ((!options.hasOwnProperty("class") || ["undefined", undefined, null, ""].includes(options["class"])) ? true : false);
                    element = '<div class="alert alert-' + type + ' alertBoxContainer' + (closeable ? " alert-dismissible" : "") + (classes ? " " + options["class"] : "") + '" id="' + id + '">';
                    element += '<div class="alertBoxIcon ' + type + '">';
                    element += '<i class="' + Alert.icons[type] + '"></i>';
                    element += '</div><div class="alertBoxText d-flex align-items-center">';
                    if (closeable) {
                        element += '<button type="button" class="btn-close" data-bs-dismiss="alert"></button>';
                    }
                    element += text + '</div></div>';
                    Alert.alerts.push(id);
                    this.id = id;
                    this.type = type;
                    this.message = text;
                    this.options = options;
                    this.element = $(element).one("close.bs.alert", function() {
                        Alert.destroy($(this).attr("id"));
                    });
                }
                destroy() {
                    Alert.alerts.splice(Alert.alerts.indexOf(this.id), 1);
                    $("#" + this.id).remove();
                }
                static create(type, message, options = {}) {
                    type = (Alert.icons.hasOwnProperty(type.toLowerCase()) ? type.toLowerCase() : "info");
                    let text = "";
                    if (Array.isArray(message)) {
                        text = "<ul class='m-0 p-0' style='list-style-position: inside'>";
                        for (let msg of message) {
                            text += "<li>" + msg + "</li>";
                        }
                        text += "</ul>";
                    }
                    else {
                        text = message;
                    }
                    let id;
                    if (!options.hasOwnProperty("id") || ["undefined", undefined, null, ""].includes(options["id"])) {
                        id = 'alert_' + type + '_' + (Date.now() + Number.parseInt(Math.random().toString().split(".")[1]));
                        while (Alert.alerts.includes(id)) {
                            id = 'alert_' + type + '_' + (Date.now() + Number.parseInt(Math.random().toString().split(".")[1]));
                        }
                    }
                    else {
                        if ($("#" + options["id"]).length >= 1) {
                            alert("Die ID \"" + options["id"] + "\" ist bereits einem Element zugeordnet.");
                            return;
                        }
                        id = options["id"];
                    }
                    let element;
                    let closeable = ((options.hasOwnProperty("closeable") && options["closeable"]) || !options.hasOwnProperty("closeable") ? true : false);
                    let classes = (options.hasOwnProperty("class") && !["undefined", undefined, null, ""].includes(options["class"]) ? true : false);
                    element = '<div class="alert alert-' + type + ' alertBoxContainer' + (closeable ? " alert-dismissible" : "") + (classes ? " " + options["class"] : "") + '" id="' + id + '">';
                    element += '<div class="alertBoxIcon ' + type + '">';
                    element += '<i class="' + Alert.icons[type] + '"></i>';
                    element += '</div><div class="alertBoxText d-flex align-items-center">';
                    if (closeable) {
                        element += '<button type="button" class="btn-close" data-bs-dismiss="alert"></button>';
                    }
                    element += text + '</div></div>';
                    Alert.alerts.push(id);
                    return $(element).one("close.bs.alert", {id: id}, function(event) {
                        Alert.destroy(event["data"]["id"]);
                    });
                } 
                static destroy(id) {
                    Alert.alerts.splice(Alert.alerts.indexOf(id), 1);
                    $("#" + id).remove();
                }
            }
            function getGalleryItems() {
                $("#getGalleryItemsButton").attr("disabled", "disabled");
                $("#historyGalleryTimespanSelect").attr("disabled", "disabled");
                if ($("#getGalleryItemsButton").find("[data-processing='true']").length === 0) {
                    $("#getGalleryItemsButton").prepend("<span data-processing='true' class='spinner-border spinner-border-sm align-middle ms-2 text-secondary'></span>");
                }
                let startDate = picker.getStartDate();
                let endDate = picker.getEndDate();
                if (startDate == null || endDate == null) {
                    startDate = new Date();
                    endDate = new Date();
                    startDate.setDate(1);
                    startDate.setHours(0, 0, 0);
                    endDate.setMonth(endDate.getMonth() +1);
                    endDate.setDate(0);
                    endDate.setHours(23, 59, 59);
                }
                else {
                    startDate.setHours(0, 0, 0);
                    endDate.setHours(0, 0, 0);
                }
                let data = {
                    startDate: startDate.getTime(), // Zeitspanne; 0 = alles
                    endDate: endDate.getTime()
                }
                $.post({
                    url: "gallery.php",
                    data: JSON.stringify(data),
                    processData: false,
                    contentType: "application/json",
                    crossDomain: true,
                    timeout: 10000
                }).done(function(response) {
                    let data = JSON.parse(response);
                    if (data["images"].length >= 1) {
                        let images = "";
                        for (image of data["images"]) {
                            images += "<div class='historyGalleryItem d-flex flex-column p-1 justify-content-between' onclick='showHistoryGalleryImage(this)'><img src='img/" + image + "'>";
                            images += "<article><span class='text-secondary'>verdammt</span><br>01.01.1970, 11:11:11 Uhr</article></div>";
                        }
                        $("#historyGalleryPanel").html(images);
                    }
                // img.naturalWidth and img.naturalHeight
                }).fail(function(response) {
                    $("#historyGallery").prepend(Alert.create("danger", response["status"] + ": " + response["statusText"]));
                }).always(function() {
                    $("#getGalleryItemsButton").removeAttr("disabled").find("[data-processing='true']").remove();
                    $("#historyGalleryTimespanSelect").removeAttr("disabled");
                });
            }
            function editPlant(wtf) {
                let plant = Number.parseInt(wtf);
                /*
                if (Number.isSafeInteger(plant)) {
                    let index = plantProperties.findIndex(key => key["id"] === plant);
                    if (index >= 0) {
                        if (isPlantEditingActive) {
                            let prompt = new Promise(function(resolve) {
                                resolve(confirmReplacePlantEditing(index));
                            });
                            prompt.then(function(value) {
                                $("#savePlantOptions").attr("data-plant-id", wtf);
                                let tab = $("a[href='#plantsAdminOptionContainer']")[0];
                                $(tab).html("Bearbeitung");
                                $("#savePlantOptions").html("<i class='fas fa-save'></i> Speichern");
                                $("#discardPlantButton").html("<i class='fas fa-times'></i> Abbrechen");
                                fillPlantInputs(wtf);
                                new bootstrap.Tab(tab).show();
                                bootstrap.Modal.getInstance($("#mainModal")[0]).hide();
                            });
                        }
                        else {
                            isPlantEditingActive = true;
                            $("#savePlantOptions").attr("data-plant-id", wtf);
                            let tab = $("a[href='#plantsAdminOptionContainer']")[0];
                            $(tab).html("Bearbeitung");
                            $("#savePlantOptions").html("<i class='fas fa-save'></i> Speichern");
                            $("#discardPlantButton").html("<i class='fas fa-times'></i> Abbrechen");
                            fillPlantInputs(wtf);
                            new bootstrap.Tab(tab).show();
                        }
                    }
                }
                */
            }
            /*
            function editUser(user) {
                // Solange man nicht Projektadministrator ist, soll man nur sich selbst bearbeiten können?
                let index = userAccounts.findIndex(key => key["id"] === user);
                if (index >= 0) {
                    let content = "<div><label for='userNameInput' class='form-label'>Benutzername:</label><input type='text' class='form-control' id='userNameInput' placeholder='Benutzernamen eingeben'></div>";
                    content += "<div class='mt-3'><label for='userSurnameInput' class='form-label'>Nachname:</label><input type='text' class='form-control' id='userSurnameInput' placeholder='Nachnamen eingeben'></div>";
                    content += "<div class='mt-3'><label for='userFornameInput' class='form-label'>Vorname:</label><input type='text' class='form-control' id='userFornameInput' placeholder='Vornamen eingeben'></div>";
                    content += "<div class='mt-3'><label for='oldPasswordInput' class='form-label'>Altes Passwort:</label><input type='password' class='form-control' id='oldPasswordInput' placeholder='Altes Passwort eingeben'></div>";
                    content += "<div class='mt-3'><label for='newPasswordInput' class='form-label'>Neues Passwort:</label><input type='password' class='form-control' id='newPasswordInput' placeholder='Neues Passwort eingeben'></div>";
                    let data = {
                        modal: {
                            name: "editUser"
                        },
                        title: {
                            text: "Benutzer " + userAccounts[index]["fullname"] + " (ID: " + userAccounts[index]["id"] + ") bearbeiten"
                        },
                        content: {
                            text: content
                        },
                        footer: {
                            buttons: {
                                default: {
                                    text: "Abbrechen",
                                    class: "btn-danger"
                                },
                                custom: [
                                    {
                                        text: "Speichern",
                                        class: "btn-primary",
                                        attributes: {
                                            id: "saveEditedUserButton"
                                        },
                                        actions: [
                                            {
                                                click: [
                                                    {
                                                        function: function() {
                                                            if ($("#body-overlay").length == 0) {
                                                                $("body").prepend("<div id='body-overlay' style='background-color: transparent'></div>");
                                                            }
                                                            if ($("#saveEditedUserButton").find("[data-processing='true']").length == 0) {
                                                                $("#saveEditedUserButton").attr("disabled", "disabled").prepend("<span class='spinner-border me-1 text-white kreiselchen align-text-bottom' data-processing='true'></span>");
                                                            }
                                                            $("#mainModal .modal-footer > button").attr("disabled", "disabled");
                                                            $("#mainModal .modal-header > [data-bs-dismiss='modal']").attr("disabled", "disabled");
                                                            $("#mainModal .modal-body > .alert").remove();
                                                            $.post("lol", {
                                                                user: userAccounts[index]["id"],
                                                                username: $("#userNameInput").val(),
                                                                surname: $("#userSurnameInput").val(),
                                                                forename: $("#userFornameInput").val()
                                                            }).done(function(response) {
                                                            }).fail(function(response) {
                                                                $("#mainModal .modal-body").prepend(Alert.create("danger", response["status"] + ": " + response["statusText"]));
                                                            }).always(function() {
                                                                $("#saveEditedUserButton").find("[data-processing='true']").remove();
                                                                $("#saveEditedUserButton").removeAttr("disabled");
                                                                $("#body-overlay").remove();
                                                                $("#mainModal .modal-footer > [data-bs-dismiss='modal']").removeAttr("disabled");
                                                                $("#mainModal .modal-header > [data-bs-dismiss='modal']").removeAttr("disabled");
                                                            });
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    }
                    Modal.create(data);
                };
            }
            function createNewUser() {
                let content = "<div><label for='newUserUsernameInput' class='form-label'>Benutzername:</label><input type='text' class='form-control' id='newUserUsernameInput' placeholder='Benutzername eingeben'></div>";
                content += "<div class='mt-3'><label for='newUserSurnameInput' class='form-label'>Nachname:</label><input type='text' class='form-control' id='newUserSurnameInput' placeholder='Nachnamen eingeben'></div>";
                content += "<div class='mt-3'><label for='newUserFornameInput' class='form-label'>Vorname:</label><input type='text' class='form-control' id='newUserFornameInput' placeholder='Vornamen eingeben'></div>";
                let data = {
                    modal: {
                        name: "addNewUser"
                    },
                    title: {
                        text: "Neuen Benutzer erstellen"
                    },
                    content: {
                        text: content
                    },
                    footer: {
                        buttons: {
                            default: {
                                text: "Abbrechen",
                                class: "btn-danger",
                                attributes: {
                                    id: "Fritz"
                                }
                            },
                            custom: [
                                {
                                    text: "Speichern",
                                    class: "btn-primary",
                                    attributes: {
                                        id: "saveNewUserButton"
                                    },
                                    actions: [
                                        {
                                            click: [
                                                {
                                                    function: function() {
                                                        if ($("#body-overlay").length == 0) {
                                                            $("body").prepend("<div id='body-overlay' style='background-color: transparent'></div>");
                                                        }
                                                        if ($("#saveNewUserButton").find("[data-processing='true']").length == 0) {
                                                            $("#saveNewUserButton").attr("disabled", "disabled").prepend("<span class='spinner-border me-1 text-white kreiselchen align-text-bottom' data-processing='true'></span>");
                                                        }
                                                        $("#mainModal .modal-footer > button").attr("disabled", "disabled");
                                                        $("#mainModal .modal-header > [data-bs-dismiss='modal']").attr("disabled", "disabled");
                                                        $("#mainModal .modal-body > .alert").remove();
                                                        $.post("lol", {
                                                            username: $("#newUserUsernameInput").val(),
                                                            surname: $("#newUserSurnameInput").val(),
                                                            forename: $("#newUserFornameInput").val()
                                                        }).done(function(response) {
                                                        }).fail(function(response) {
                                                            $("#mainModal .modal-body").prepend(Alert.create("danger", response["status"] + ": " + response["statusText"]));
                                                        }).always(function() {
                                                            $("#saveNewUserButton").find("[data-processing='true']").remove();
                                                            $("#saveNewUserButton").removeAttr("disabled");
                                                            $("#body-overlay").remove();
                                                            $("#mainModal .modal-footer > [data-bs-dismiss='modal']").removeAttr("disabled");
                                                            $("#mainModal .modal-header > [data-bs-dismiss='modal']").removeAttr("disabled");
                                                        });
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    }
                };
                Modal.create(data);
            }
            */

            /*
            function fillPlantInputs(wtf = null) {
                let selectedPlant = Number.parseInt(wtf);
                let index = plantProperties.findIndex(key => key["id"] === selectedPlant);
                if (index >= 0) {
                    if (isPlantEditingActive) {
                        $("#plantOptionDescriptionInput").val(plantProperties[index]["name"]);
                        if ($("#editPlantAlert").length === 0) {
                            $("#plantsAdminOptionContainer").prepend(Alert.create("primary", "Zurzeit ist die Bearbeitung der Pflanze &quot;" + plantProperties[index]["name"] + "&quot; (ID: " + plantProperties[index]["id"] + ") aktiv.", {id: "editPlantAlert"}));
                        }
                        else {
                            $("#editPlantAlert > .alertBoxText").html("Zurzeit ist die Bearbeitung der Pflanze &quot;" + plantProperties[index]["name"] + "&quot; (ID: " + plantProperties[index]["id"] + ") aktiv.");
                        }
                    }
                    let properties = Object.getOwnPropertyNames(plantProperties[index]["properties"]);
                    for (property of properties) {
                        let propertyName = property[0].toUpperCase() + property.substring(1, property.length);
                        let values = Object.getOwnPropertyNames(plantProperties[index]["properties"][property]);
                        for (value of values) {
                            let inputName = value[0].toUpperCase() + value.substring(1, value.length);
                            let inputElement = "#plantOption" + propertyName + inputName + "Input";
                            $(inputElement).val(plantProperties[index]["properties"][property][value]);
                        }
                    }
                }
            }
            */
            function fillPlantProgramsSelect(plant) {
                let index = plantProperties.findIndex(key => key["id"] === plant);
                if (index >= 0) {
                    for (program of plantPrograms) {
                        if (program["plantID"] === plant) {
                            $("#plantProgramSelection").append("<option value='" + program["id"] + "'>" + program["name"] + "</option>");
                        }
                    }
                }
            }
            function confirmation(options = {}, resolve) {
                let data = {
                    name: "confirmation",
                    title: {
                        text: (options.hasOwnProperty("title") ? options["title"] : "Bestätigung")
                    },
                    content: {
                        text: (options.hasOwnProperty("content") ? options["content"] : "Soll diese Aktion wirklich ausgeführt werden?")
                    },
                    footer: {
                        buttons: {
                            default: {
                                text: "Nein",
                                class: "btn-primary"
                            },
                            custom: [
                                {
                                    text: "Ja",
                                    class: "btn-danger",
                                    attributes: {
                                        id: "confirmationButton"
                                    },
                                    actions: {
                                        click: {
                                            function: function() {
                                                resolve(true);
                                            }
                                        }
                                    }
                                }
                            ]
                        }
                    }
                };
                Modal.create(data);
            }
            function confirmPlantDeletion(plant) {
                let index = plantProperties.findIndex(key => key["id"] === plant);
                if (index >= 0) {
                    let prompt = new Promise(function(resolve) {
                        confirmation({
                            title: "Pflanze entfernen bestätigen",
                            content: "Soll die Pflanze &quot;"  + plantProperties[index]["name"] + "&quot; (ID: " + plant + ") wirklich entfernt werden?"
                        },
                        resolve);
                    });
                    prompt.then(function(value) {
                        if ($("#body-overlay").length == 0) {
                            $("body").prepend("<div id='body-overlay' style='background-color: transparent'></div>");
                        }
                        if ($("#confirmationButton").find("[data-processing='true']").length === 0) {
                            $("#confirmationButton").prepend("<span class='spinner-border me-1 text-white kreiselchen align-text-bottom' data-processing='true'></span>");
                        }
                        $("#mainModal .modal-footer > button").attr("disabled", "disabled");
                        $("#mainModal .modal-header > [data-bs-dismiss='modal']").attr("disabled", "disabled");
                        $("#mainModal .modal-body > .alert").remove();
                        let data = {
                            plant: plant,
                            authentification: getCookie("authToken")
                        };
                        $.post({
                            url: "",
                            data: JSON.stringify(data),
                            processData: false,
                            contentType: "application/json",
                            crossDomain: true,
                            timeout: 10000
                        }).done(function(response) {
                            bootstrap.Modal.getInstance($("#mainModal")[0]).hide();
                        }).fail(function(response) {
                            $("#mainModal .modal-body").prepend(Alert.create("danger", response["status"] + ": " + response["statusText"]));
                        }).always(function() {
                            $("#confirmationButton").find("[data-processing='true']").remove();
                            $("#body-overlay").remove();
                            $("#mainModal .modal-footer > button").removeAttr("disabled");
                            $("#mainModal .modal-header > [data-bs-dismiss='modal']").removeAttr("disabled");
                        });
                    });
                }
            }
            /*
            async function confirmUserDeletion(user) {
                let index = userAccounts.findIndex(key => key["id"] === user);
                if (index >= 0) {
                    let prompt = new Promise(function(resolve) {
                        confirmation({
                            title: "Benutzer entfernen bestätigen",
                            content: "Soll der Benutzer &quot;"  + userAccounts[index]["fullname"] + "&quot; (ID: " + user + ") wirklich entfernt werden?"
                        },
                        resolve);
                    });
                    if (await prompt) {
                        if ($("#body-overlay").length == 0) {
                            $("body").prepend("<div id='body-overlay' style='background-color: transparent'></div>");
                        }
                        if ($("#confirmationButton").find("[data-processing='true']").length == 0) {
                            $("#confirmationButton").prepend("<span class='spinner-border me-1 text-white kreiselchen align-text-bottom' data-processing='true'></span>");
                        }
                        $("#mainModal .modal-footer > button").attr("disabled", "disabled");
                        $("#mainModal .modal-header > [data-bs-dismiss='modal']").attr("disabled", "disabled");
                        $("#mainModal .modal-body > .alert").remove();
                        let data = {
                            user: user
                        }
                        $.post("lol", {
                            _token: authToken,
                            data: JSON.stringify(data)
                        }).done(function(response) {
                            bootstrap.Modal.getInstance($("#mainModal")[0]).hide();
                        }).fail(function(response) {
                            $("#mainModal .modal-body").prepend(Alert.create("danger", response["status"] + ": " + response["statusText"]));
                        }).always(function() {
                                $("#confirmationButton").find("[data-processing='true']").remove();
                            $("#body-overlay").remove();
                            $("#mainModal .modal-footer > button").removeAttr("disabled");
                            $("#mainModal .modal-header > [data-bs-dismiss='modal']").removeAttr("disabled");
                        });
                    }
                }
            }
            */
           /*
            function confirmDiscardPlantEditing() {
                let prompt = new Promise(function(resolve) {
                    confirmation({
                        title: "Pflanzenbearbeitung abbrechen",
                        content: (isPlantEditingActive ? "Soll die Bearbeitung der aktuellen Pflanze wirklich abgebrochen werden?" : "Sollen die ungespeicherten Daten wirklich verworfen werden?")
                    },
                    resolve);
                });
                prompt.then(function(value) {
                    $("#plantOptionContainer input[type='text']").val("");
                    isPlantEditingActive = false;
                    $("a[href='#plantsAdminOptionContainer']").html("Erstellen");
                    $("#savePlantOptions").html("<i class='fas fa-plus'></i> Hinzufügen");
                    $(this).html("<i class='fas fa-trash-alt'></i> Löschen");
                    $("#editPlantAlert").remove();
                    bootstrap.Modal.getInstance($("#mainModal")[0]).hide();
                });
            }
            // wtf = Index der zu bearbeitenden Pflanze!
            function confirmReplacePlantEditing(wtf) {
                let currentPlant = Number.parseInt($("#savePlantOptions").attr("data-plant-id"));
                if (Number.isSafeInteger(currentChartPlant)) {
                    let index = plantProperties.findIndex(key => key["id"] === currentChartPlant);
                    if (index >= 0) {
                        let title = "";
                        let content = "";
                        if (wtf === index) {
                            title = "Pflanzenbearbeitung neu starten bestätigen";
                            content = "Die Bearbeitung der Pflanze &quot;" + plantProperties[wtf]["name"] + "&quot; (ID: " + plantProperties[wtf]["id"] + ") ist bereits aktiv. Soll diese neu gestartet werden?"
                        }
                        else {
                            title = "Pflanzenbearbeitung abbrechen bestätigen";
                            content = "Zurzeit ist die Bearbeitung der Pflanze " + plantProperties[index]["name"] + " (ID: " + currentChartPlant + ") aktiv. Soll diese abgebrochen und stattdessen die Pflanze " + plantProperties[wtf]["name"] + " (ID: " + plantProperties[wtf]["id"] + ") bearbeitet werden?";
                        }
                        let prompt = new Promise(function(resolve) {
                            confirmation({
                                title: title,
                                content: content
                            },
                            resolve);
                        });
                        return prompt;
                    }
                }
            }
            */
            function getCookie(cname) {
                let name = cname + "=";
                let ca = document.cookie.split(";");
                for (let i = 0; i < ca.length; i++) {
                    let c = ca[i];
                    while (c.charAt(0) === " ") {
                        c = c.substring(1);
                    }
                    if (c.indexOf(name) === 0) {
                        return decodeURIComponent(c.substring(name.length, c.length));
                    }
                }
                return "";
            }
            $(window).on("load", function() {
                $("#body-overlay").empty();
                $("#body-overlay").css("opacity", 0).on("transitionend", function() {
                    $(this).remove();
                    $("body").removeClass("overflow-hidden");
                });
            });
            $(document).on("DOMContentLoaded", function() {
                // Hier alle Skripte ausführen, die auf DOM zugreifen sollen, bevor Bilder und Ähnliches geladen wurden
                if (getCookie("authToken").length >= 1 && getCookie("username").length >= 1) {
                    $("a[href='#login']").addClass("d-none");
                    $("a[href='#logout']").removeClass("d-none");
                    $("[data-current-user]").removeClass("d-none").html("<i class='fas fa-user-injured'></i> " + getCookie("username"));
                    $("#mainTabNav > li:last-of-type").removeClass("d-none");
                }
                picker = new Litepicker({ 
                    element: $("#historyGalleryTimespanSelect")[0],
                    lang: "de-de",
                    maxDays: 31,
                    singleMode: false,
                    tooltipText: {"one":"Tag", "other":"Tage"},
                    resetButton: true
                });
                $("a[href='#systemInfos']").click(function() {
                    let content = "<table class='table-sm w-100'><thead>";
                    content += "<tr><th class='w-25'>Eigenschaft</th><th>Wert</th></tr>";
                    content += "</thead><tbody id='systemInfosTable'></tbody></table>";
                    let data = {
                        name: "systemInfos",
                        events: {
                            hide: {
                                function: function(a) {
                                    if (systemInfosTimer !== null) {
                                        clearInterval(systemInfosTimer);
                                        systemInfosTimer = null;
                                    }
                                }
                            },
                            shown: {
                                function: function(o) {
                                    updateSystemInfos();
                                    systemInfosTimer = setInterval(updateSystemInfos, 5000);
                                }
                            }
                        },
                        title: {
                            text: "Systeminformationen"
                        },
                        content: {
                            text: content,
                            options: {
                                scroll: true
                            }
                        }
                    };
                    Modal.create(data);
                });
                $("a[href='#staff']").click(function() {
                    let content = "<table class='table-borderless'><thead></thead><tbody><tr><td class='align-text-top pe-3'>Projektleitung</td><td>Luca Israel<br>Jessica Gerken<br>Nils Harder<br>Fabian Beckmann<br>Darlien Rienits</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Konstruktion</td><td>Nils Berger<br>Kevin Gerken<br>Thees Brünjes<br>Abdul Al Akhdar</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Materialbeschaffung</td><td>Joris Dröge<br>Henrik Jarz<br>Nilds Harder<br>Tammo Karsten<br><s>Bim Töttger</s> Tim Böttger<br>Ali Daham</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Backend-Entwicklung</td><td>Paul Jongmanns<br>Fabian Beckmann</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Frontend-Entwicklung</td><td>Milan Kovacevic<br>Christian Sander<br>Fabian Rose</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Datenbankentwicklung</td><td>Lars Friedrich<br>Kevin Müller<br>Jan Breninek<br>Deon Gulbinat</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Elektronik</td><td>Matties Oldenburg<br>Tristan Muschalla<br>Marvin Bentley<br>Calvin Stelljes<br>Sandro Wriggers</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Statistik</td><td>Kevin Müller<br>Milan Kovacevic<br>René Schäfer<br>Emanuel Kass<br>Jan Breninek<br>Deon Gulbinat</td></tr>";
                    content += "<tr><td class='align-text-top pe-3'>Dokumentation</td><td>Jessica Gerken</td></tr>";
                    content += "</tbody></table>";
                    let data = {
                        name: "staff",
                        title: {
                            text: "Mitwirkende"
                        },
                        content: {
                            options: {
                                scroll: true
                            },
                            text: content
                        }
                    };
                    Modal.create(data);
                });
                $("a[href='#about']").click(function() {
                    let content = "<img src='img/logo_large.png' id='hydroPocLogo'><p>&quot;HydroPoc&quot;, ein hydroponisches System, ist ein Ganzjahresschulprojekt von der gesamten Klasse der IN20 an der BSDGG.</p>";
                    content += "<h4 class='mb-1'>Anschrift</h4><p>Berufliche Schule für Dienstleistung, Gewerbe und Gestaltung<br>Georg-Büchner-Str. 13<br>27574 Bremerhaven</p>";
                    content += "<h4 class='mb-1'>Kontakt</h4><p>Telefon: (0471) 30 94 650<br>Web: <a href='https://www.bsdgg.de' target='_blank'>https://www.bsdgg.de</a></p>";
                    let data = {
                        size: "lg",
                        name: "about",
                        events: {
                            hide: {
                                function: function() {
                                    $("#hydroPocLogo").off("click animationend");
                                }
                            }
                        },
                        title: {
                            text: "Über"
                        },
                        content: {
                            text: content
                        }
                    };
                    Modal.create(data);
                    $("#hydroPocLogo").on("click", function() {
                        $(this).addClass("contract");
                    }).on("animationend", function(wtf) {
                        if (wtf["originalEvent"]["animationName"] === "contract") {
                            $(this).removeClass("contract").addClass("boing");
                        }
                        else {
                            $(this).removeClass("boing");
                            this.offsetWidth;
                        }
                    });
                });
                /*$("#applyPlantTemplateButton").click(function() {
                    fillPlantInputs($("#plantsAdminPlantSelection").val());
                });*/
                $("#plantOptionsForm").on("reset", function() {
                    confirmDiscardPlantEditing();
                    return false;
                });
                $("#savePlantOptions").click(function() {
                    $("#savePlantOptionsSubmit").click();
                });
                $("#plantOptionsForm").submit(function() {
                    //$("#discardPlantButton").attr("disabled", "disabled");
                    if ($("#savePlantOptions").find("[data-processing='true']").length === 0) {
                        $("#savePlantOptions").attr("disabled", "disabled").prepend("<span data-processing='true' class='spinner-border spinner-border-sm align-middle ms-2 text-secondary'></span>");
                    }
                    let data = {
                        authentification: getCookie("authToken")
                    };
                    /*et inputs = $("#plantOptionsFormContainer input");
                    for (input of inputs) {
                        data[$(input).attr("id").slice(8, -5)] = $(input).val();
                    }*/
                    $.post({
                        url: "http://192.168.100.187:3000/api/plant/"+ (isPlantEditingActive ? "update" : "create"),
                        data: JSON.stringify(data),
                        processData: false,
                        contentType: "application/json",
                        crossDomain: true,
                        timeout: 10000
                    }).done(function(response) {
                    }).fail(function(response) {
                        $("#plantOptionMenu").before(Alert.create("danger", response["status"] + ": " + response["statusText"], {class: "mt-3 position-relative"}));
                        scrollTo(0, $("#plantsAdminOptionContainer > .alert").last().offset()["top"] -10);

                    }).always(function() {
                        $("#savePlantOptions").find("[data-processing='true']").remove();
                        $("#savePlantOptions").removeAttr("disabled");
                        //$("#discardPlantButton").removeAttr("disabled");
                    });
                    return false;
                });
                $("#historyGalleryTimespanForm").submit(function() {
                    getGalleryItems();
                    return false;
                });
                $("#plantsAdminTemplateForm").submit(function() {
                    fillPlantInputs($("#plantsAdminPlantSelection").val());
                    return false;
                });
                $("a[href='#login']").on("click", function() {
                    let content = "<form enctype='text/plain' method='post' action='/' id='loginForm' class='w-100'><input type='submit' class='d-none' id='loginSubmit'><label for='mail' class='form-label'>E-Mail:</label>";
                    content += "<input type='text' class='form-control' id='mail' placeholder='E-Mail-Adresse eingeben' required></div>";
                    content += "<div class='mt-3'><label for='password' class='form-label'>Passwort:</label>";
                    content += "<input type='password' class='form-control' id='password' placeholder='Passwort eingeben' required></div>";
                    content += "<a href='#'>Ich habe mein Passwort vergessen!</a></form>";
                    let data = {
                        name: "login",
                        events: {
                            shown: {
                                function: function() {
                                    $("#loginForm").submit(function() {
                                        login();
                                        return false;
                                    });
                                }
                            },
                            hidden: {
                                function: function() {
                                    $("#loginForm").off("submit");
                                }
                            }
                        },
                        title: {
                            text: "Anmelden"
                        },
                        content: {
                            text: content
                        },
                        footer: {
                            buttons: {
                                default: {
                                    text: "Abbrechen",
                                    class: "btn-danger"
                                },
                                custom: [
                                    {
                                        text: "Anmelden",
                                        class: "btn-primary",
                                        attributes: {
                                            id: "loginButton"
                                        },
                                        actions: {
                                            click: {
                                                function: function() {
                                                    $("#loginSubmit").click();
                                                }
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    };
                    Modal.create(data);
                });
                $("a[href='#logout']").on("click", function() {
                    document.cookie = "authToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";
                    document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";
                    $("a[href='#login']").removeClass("d-none");
                    $("a[href='#logout']").addClass("d-none");
                    $("[data-current-user]").addClass("d-none").html("");
                    $("#mainTabNav > li:last-of-type").addClass("d-none");
                });
                $(".config-chart-button").click(function() {
                    $("#chartHistoryElementTitle").html($(this).attr("data-chart-title"));
                    $("#chartHistoryModal").attr("data-chart", $(this).attr("data-chart"));
                    new bootstrap.Modal($("#chartHistoryModal")[0]).show();
                });
                /*
                $.get("dataTables_test.php", {type: "plantdetails"}).done(function(response) {
                    let data = JSON.parse(response);
                    Object.assign(plantProperties, data["data"]);
                    for (plant of data["data"]) {
                        $("#plantSelection").append("<option value='" + plant["id"] + "'>" + plant["name"] + " (" + plant["id"] + ")" + "</option>");
                        
                    }
                    $("#plantSelection").val(data["data"][0]["id"]).change();
                    currentChartPlant = data["data"][0]["id"];
                    fillPlantProgramsSelect(data["data"][0]["id"]);
                });
                // Soll nur als Admin sichtbar sein!
                $.get("dataTables_test.php", {type: "plantPrograms"}).done(function(response) {
                    let data = JSON.parse(response);
                    Object.assign(plantPrograms, data["data"]);
                });
                */
                let date = new Date();
                $("footer").html("&copy; " + "2021-" + date.getFullYear() + " BSDGG/IN20");
                /*$("#plantSelection").change(function() {
                    $("#plantProgramSelection").empty().attr("disabled", "disabled");
                    $(this).attr("disabled", "disabled");
                    let id = Number.parseInt($(this).val());
                    fillPlantProgramsSelect(id);
                    $(this).removeAttr("disabled");
                    $("#plantProgramSelection").removeAttr("disabled");
                });*/
                /*
                $("#plantProgramsAdminPlantSelection").change(function() {
                    let options = {};
                    let value = Number.parseInt($(this).val());
                    Object.assign(options, dataTablesAdminOptions["plantPrograms"]);
                    if (!Number.isSafeInteger(Number.parseInt($(this).attr("data-old"))) && value <= 0) {
                        options["rowGroup"] = {
                            dataSrc: "plantID",
                            className: "bg-gray-200",
                            endRender: null,
                            // Wird nach Erzeugung ausgelöst!
                            startRender: function(rows, group) {
                                let index = plantProperties.findIndex(key => key["id"] === group);
                                return $("<tr>").append("<td colspan='3' class='align-middle' style='color: #282828'>" + (plantProperties.hasOwnProperty(index) ? plantProperties[index]["name"] : "(Unbekannte Pflanzen-ID: " + group) + "</td><td class='fritz'><button class='btn btn-sm btn-success' onclick='showPlantProgramCreationModal(" + group + ")'><i class='fas fa-asterisk'></i> Neu...</button></td>");
                            }
                        },
                        options["orderFixed"] = [0, "asc"];
                    }
                    options["destroy"] = true;
                    if (value >= 1) {
                        options["ajax"]["data"]["category"] = value;
                    }
                    else {
                        delete options["ajax"]["data"]["category"];
                    }
                    $(this).attr("data-old", value);
                    adminDataTables["plantPrograms"] = $("#plantProgramsAdminTable").DataTable(options).on("draw", function(settings) {
                        if (!adminDataTables["plantPrograms"].rowGroup().enabled()) {
                            if ($("#showPlantProgramCreationModalButton").length === 0) {
                                $("#plantProgramsAdminTable_wrapper > .row:last-of-type").before("<div class='d-flex justify-content-end mt-3'><button type='button' class='btn btn-success' onclick='showPlantProgramCreationModal()' id='showPlantProgramCreationModalButton'><i class='fas fa-asterisk'></i> Neu...</button></div>");
                            }
                        }
                    	else {
                            $("#showPlantProgramCreationModalButton").remove();
                        }
                    });
                });
                */
                /*
                $("#logsAdminCategorySelection").change(function() {
                    let options = {};
                    let value = Number.parseInt($(this).val());
                    Object.assign(options, dataTablesAdminOptions["logs"]);
                    if (!Number.isSafeInteger(Number.parseInt($(this).attr("data-old"))) && value <= 0) {
                        options["rowGroup"] = {
                            dataSrc: "type",
                            className: "bg-gray-200",
                            endRender: null,
                            startRender: function(rows, group) {
                                return $("<tr>").append("<td colspan='3' class='align-middle' style='color: #282828'>" + dataTableTranslationStrings["logs"][group] + "</td>");
                            }
                        };
                        options["orderFixed"] = [1, "asc"];
                    }
                    options["destroy"] = true;
                    if (value >= 1) {
                        options["ajax"]["data"]["category"] = value;
                    }
                    else {
                        delete options["ajax"]["data"]["category"];
                    }
                    $(this).attr("data-old", value);
                    adminDataTables["logs"] = $("#logsAdminTable").DataTable(options);
                });
                */
                $("#user-actions-accordion").on("shown.bs.collapse", function() {
                    if (!DataTable.isDataTable("#userAccountsAdminTable")) {
                        adminDataTables["userAccounts"] = $("#userAccountsAdminTable").DataTable(dataTablesAdminOptions["userAccounts"]);
                    }
                    else {
                        $("#userAccountsAdminTable").DataTable().ajax.reload();
                    }
                });
                $("#plants-programs-accordion").on("shown.bs.collapse", function() {
                    if (!DataTable.isDataTable("#plantProgramsAdminTable")) {
                        $("#plantProgramsAdminPlantSelection").val("0");
                        let options = {};
                        Object.assign(options, dataTablesAdminOptions["plantPrograms"]);
                        options["rowGroup"] = {
                            dataSrc: "plantID",
                            className: "bg-gray-200",
                            endRender: null,
                            // Wird nach Erzeugung ausgelöst!
                            startRender: function(rows, group) {
                                let index = plantProperties.findIndex(key => key["id"] === group);
                                return $("<tr>").append("<td colspan='3' class='align-middle' style='color: #282828'>" + (plantProperties.hasOwnProperty(index) ? plantProperties[index]["name"] : "(Unbekannte Pflanzen-ID: " + group) + "</td><td class='fritz'><button class='btn btn-sm btn-success' onclick='showPlantProgramCreationModal(" + group + ")'><i class='fas fa-asterisk'></i> Neu...</button></td>");
                            }
                        };
                        options["orderFixed"] = [0, "asc"];
                        for (plant of plantProperties) {
                            $("#plantProgramsAdminPlantSelection").append("<option value='" + plant["id"] + "'>" + plant["name"] + "</option>");
                        }
                        adminDataTables["plantPrograms"] = $("#plantProgramsAdminTable").DataTable(options).on("draw", function(settings) {
                            if (!adminDataTables["plantPrograms"].rowGroup().enabled()) {
                                if ($("#showPlantProgramCreationModalButton").length === 0) {
                                    $("#plantProgramsAdminTable_wrapper > .row:last-of-type").before("<div class='d-flex justify-content-end mt-3'><button type='button' class='btn btn-success' onclick='showPlantProgramCreationModal()' id='showPlantProgramCreationModalButton'><i class='fas fa-asterisk'></i> Neu...</button></div>");
                                }
                            }
                            else {
                                $("#showPlantProgramCreationModalButton").remove();
                            }
                        });
                    }
                    else {
                        $("#plantProgramsAdminTable").DataTable().ajax.reload();
                    }
                });
                $("#pump-actions-accordion").on("shown.bs.collapse", function() {
                    if (!DataTable.isDataTable("#pumpsAdminTable")) {
                        adminDataTables["pumps"] = $("#pumpsAdminTable").DataTable(dataTablesAdminOptions["pumps"]);
                    } 
                    else {
                        $("#pumpsAdminTable").DataTable().ajax.reload();
                    }
                });
                $("#collapse-logs-actions").on("shown.bs.collapse", function() {
                    if (!DataTable.isDataTable("#logsAdminTable")) {
                        //$("#logsAdminCategorySelection").val("0");
                        let options = {};
                        Object.assign(options, dataTablesAdminOptions["logs"]);
                        /*options["rowGroup"] = {
                            dataSrc: 2,
                            className: "bg-gray-200",
                            endRender: null,
                            startRender: function(rows, group) {
                                return $("<tr>").append("<td colspan='2' class='align-middle' style='color: #282828'>" + dataTableTranslationStrings["logs"][group] + "</td>");
                            }
                        };
                        options["orderFixed"] = [2, "asc"];*/
                        adminDataTables["logs"] = $("#logsAdminTable").DataTable(options);
                    }
                    else {
                        $("#logsAdminTable").DataTable().ajax.reload();
                    }
                });
                $("#collapse-plants-actions").on("shown.bs.collapse", function(element) {
                    if ($(element["target"]).attr("data-bs-parent") === "#plants-accordion") {
                        if (!DataTable.isDataTable("#plantsAdminTable")) {
                            adminDataTables["plants"] = $("#plantsAdminTable").DataTable(dataTablesAdminOptions["plants"]);
                        }
                        else {
                            $("#plantsAdminTable").DataTable().ajax.reload();
                        }
                    }
                });
                // DataTables-Layout neu berechnen, wenn sich die Bildschirmbreite ändert, wenn Administrationsseite nicht aktiv war 
                $("a[href='#administration']").on("shown.bs.tab", function () {
                    readjustTables();
                });
                $("a[href='#plantsAdminOverviewContainer']").on("shown.bs.tab", function () {
                    readjustTables();
                });
                /*
                $("a[href='#plantsAdminOptionContainer']").on("shown.bs.tab", function() {
                    $("#plantsAdminPlantSelection").empty();
                    if (plantProperties.length >= 1) {
                        $("#applyPlantTemplateButton").removeAttr("disabled");
                        for (plant of plantProperties) {
                            $("#plantsAdminPlantSelection").append("<option value='" + plant["id"] + "'>" + plant["name"] + "</option>");
                        }
                    }
                });
                */
                // Bilderlinks laden
                $("a[href='#historyGallery']").on("shown.bs.tab", function() {
                    getGalleryItems();
                });
                $("#chartHistoryModal").on("show.bs.modal", function() {
                    let chart = $(this).attr("data-chart");
                    if (!["undefined", "", undefined, null].includes(chart)) {
                        if (!isLoadingHistoryChartData) {
                            isLoadingHistoryChartData = true;
                            $.post({
                                url: apiURL + "/sensor/data",
                                data: JSON.stringify({sensor: chart}),
                                processData: false,
                                contentType: "application/json",
                                crossDomain: true,
                                timeout: 10000
                            }).done(function(response) {
                            }).fail(function(response) {
                                $("#history-chart").prepend(Alert.create("danger", response["status"] + ": " + response["statusText"]));
                            }).always(function() {
                                isLoadingHistoryChartData = false;
                            });
                        }
                        charts["history"]["options"]["scales"]["y"]["min"] = charts["scales"][chart][0];
                        charts["history"]["options"]["scales"]["y"]["max"] = charts["scales"][chart][1];
                        charts["history"].update();
                    }
                });
                // Aktuell
                charts["current"]["co2_level"] = new Chart($("#co2-chart-current")[0].getContext("2d"), {
                    options: {
                        plugins: {
                           legend: {
                                display: false,
                                labels: {
                                    pointStyle: "rect",
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    }
                                }
                            }
                        },
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    },
                                    callback: function(val, index) {
                                        return index % 4 === 0 ? charts["current"]["co2_level"]["data"]["labels"][index] : "";
                                    }
                                }
                            },
                            y: {
                                min: charts["scales"]["co2_level"][0],
                                max: charts["scales"]["co2_level"][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    }
                                }
                            }
                        }
                    },
                    type: "line",
                    data: {
                        datasets: [
                            {
                                label: "Aktueller Wert",
                                stack: "current",
                                borderColor: getCSSVar("--chart-current-border"),
                                backgroundColor: "rgba(0, 0, 0, 0.75)",
                                borderWidth: 1
                            },
                            {
                                label: "Mittelwert",
                                stack: "middle",
                                borderColor: getCSSVar("--chart-middle-border"),
                                backgroundColor: "rgba(0, 255, 0, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Sollwert",
                                stack: "setpoint",
                                borderColor: getCSSVar("--chart-setpoint-border"),
                                backgroundColor: "rgba(253, 126, 20, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Eingriffsgrenze",
                                stack: "upperControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Warngrenze",
                                stack: "upperWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Eingriffsgrenze",
                                stack: "lowerControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Warngrenze",
                                stack: "lowerWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Pumpenaktivität #1",
                                stack: "pump-1",
                                borderColor: getCSSVar("--chart-activity-1-border"),
                                backgroundColor: "rgba(112, 146, 190, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            },
                            {
                                label: "Pumpenaktivität #2",
                                stack: "pump-2",
                                borderColor: getCSSVar("--chart-activity-2-border"),
                                backgroundColor: "rgba(142, 192, 109, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            }
                        ]
                    }
                });
                charts["current"]["temperature_water"] = new Chart($("#temperature-water-chart-current")[0].getContext("2d"), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: "rect"
                                }
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                boxPadding: 3
                            }
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10
                            }
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    },
                                    callback: function(val, index) {
                                        return index % 4 === 0 ? charts["current"]["temperature_water"]["data"]["labels"][index] : "";
                                    }
                                }
                            },
                            y: {
                                min: charts["scales"]["temperature_water"][0],
                                max: charts["scales"]["temperature_water"][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    }
                                }
                            }
                        }
                    },
                    type: "line",
                    data: {
                        datasets: [
                            {
                                label: "Aktueller Wert",
                                stack: "current",
                                borderColor: getCSSVar("--chart-current-border"),
                                backgroundColor: "rgba(0, 0, 0, 0.75)",
                                borderWidth: 1
                            },
                            {
                                label: "Mittelwert",
                                stack: "middle",
                                borderColor: getCSSVar("--chart-middle-border"),
                                backgroundColor: "rgba(0, 255, 0, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Sollwert",
                                stack: "setpoint",
                                borderColor: getCSSVar("--chart-setpoint-border"),
                                backgroundColor: "rgba(253, 126, 20, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Eingriffsgrenze",
                                stack: "upperControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Warngrenze",
                                stack: "upperWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Eingriffsgrenze",
                                stack: "lowerControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Warngrenze",
                                stack: "lowerWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Pumpenaktivität #1",
                                stack: "pump-1",
                                borderColor: getCSSVar("--chart-activity-1-border"),
                                backgroundColor: "rgba(112, 146, 190, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            },
                            {
                                label: "Pumpenaktivität #2",
                                stack: "pump-2",
                                borderColor: getCSSVar("--chart-activity-2-border"),
                                backgroundColor: "rgba(142, 192, 109, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            }
                        ]
                    }
                });
                charts["current"]["temperature_air"] = new Chart($("#temperature-air-chart-current")[0].getContext("2d"), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: "rect"
                                }
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                boxPadding: 3
                            }
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10
                            }
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    },
                                    callback: function(val, index) {
                                        return index % 4 === 0 ? charts["current"]["temperature_air"]["data"]["labels"][index] : "";
                                    }
                                }
                            },
                            y: {
                                min: charts["scales"]["temperature_air"][0],
                                max: charts["scales"]["temperature_air"][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    }
                                }
                            }
                        }
                    },
                    type: "line",
                    data: {
                        datasets: [
                            {
                                label: "Aktueller Wert",
                                stack: "current",
                                borderColor: getCSSVar("--chart-current-border"),
                                backgroundColor: "rgba(0, 0, 0, 0.75)",
                                borderWidth: 1
                            },
                            {
                                label: "Mittelwert",
                                stack: "middle",
                                borderColor: getCSSVar("--chart-middle-border"),
                                backgroundColor: "rgba(0, 255, 0, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Sollwert",
                                stack: "setpoint",
                                borderColor: getCSSVar("--chart-setpoint-border"),
                                backgroundColor: "rgba(253, 126, 20, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Eingriffsgrenze",
                                stack: "upperControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Warngrenze",
                                stack: "upperWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Eingriffsgrenze",
                                stack: "lowerControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Warngrenze",
                                stack: "lowerWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Pumpenaktivität #1",
                                stack: "pump-1",
                                borderColor: getCSSVar("--chart-activity-1-border"),
                                backgroundColor: "rgba(112, 146, 190, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            },
                            {
                                label: "Pumpenaktivität #2",
                                stack: "pump-2",
                                borderColor: getCSSVar("--chart-activity-2-border"),
                                backgroundColor: "rgba(142, 192, 109, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            }
                        ]
                    }
                });
                charts["current"]["swimmer_1"] = new Chart($("#swimmer-1-chart-current")[0].getContext("2d"), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: "rect"
                                }
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                boxPadding: 3
                            }
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10
                            }
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    },
                                    callback: function(val, index) {
                                        return index % 4 === 0 ? charts["current"]["swimmer_1"]["data"]["labels"][index] : "";
                                    }
                                }
                            },
                            y: {
                                min: charts["scales"]["swimmer_1"][0],
                                max: charts["scales"]["swimmer_1"][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    }
                                }
                            }
                        }
                    },
                    type: "line",
                    data: {
                        datasets: [
                            {
                                label: "Aktueller Wert",
                                stack: "current",
                                borderColor: getCSSVar("--chart-current-border"),
                                backgroundColor: "rgba(0, 0, 0, 0.75)",
                                borderWidth: 1
                            },
                            {
                                label: "Mittelwert",
                                stack: "middle",
                                borderColor: getCSSVar("--chart-middle-border"),
                                backgroundColor: "rgba(0, 255, 0, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Sollwert",
                                stack: "setpoint",
                                borderColor: getCSSVar("--chart-setpoint-border"),
                                backgroundColor: "rgba(253, 126, 20, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Eingriffsgrenze",
                                stack: "upperControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Warngrenze",
                                stack: "upperWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Eingriffsgrenze",
                                stack: "lowerControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Warngrenze",
                                stack: "lowerWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Pumpenaktivität #1",
                                stack: "pump-1",
                                borderColor: getCSSVar("--chart-activity-1-border"),
                                backgroundColor: "rgba(112, 146, 190, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            },
                            {
                                label: "Pumpenaktivität #2",
                                stack: "pump-2",
                                borderColor: getCSSVar("--chart-activity-2-border"),
                                backgroundColor: "rgba(142, 192, 109, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            }
                        ]
                    }
                });
                charts["current"]["ec_value"] = new Chart($("#ec-chart-current")[0].getContext("2d"), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: "rect"
                                }
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                boxPadding: 3
                            }
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10
                            }
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    },
                                    callback: function(val, index) {
                                        return index % 4 === 0 ? charts["current"]["ec_value"]["data"]["labels"][index] : "";
                                    }
                                }
                            },
                            y: {
                                min: charts["scales"]["ec_value"][0],
                                max: charts["scales"]["ec_value"][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    }
                                }
                            }
                        }
                    },
                    type: "line",
                    data: {
                        datasets: [
                            {
                                label: "Aktueller Wert",
                                stack: "current",
                                borderColor: getCSSVar("--chart-current-border"),
                                backgroundColor: "rgba(0, 0, 0, 0.75)",
                                borderWidth: 1
                            },
                            {
                                label: "Mittelwert",
                                stack: "middle",
                                borderColor: getCSSVar("--chart-middle-border"),
                                backgroundColor: "rgba(0, 255, 0, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Sollwert",
                                stack: "setpoint",
                                borderColor: getCSSVar("--chart-setpoint-border"),
                                backgroundColor: "rgba(253, 126, 20, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Eingriffsgrenze",
                                stack: "upperControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Warngrenze",
                                stack: "upperWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Eingriffsgrenze",
                                stack: "lowerControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Warngrenze",
                                stack: "lowerWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Pumpenaktivität #1",
                                stack: "pump-1",
                                borderColor: getCSSVar("--chart-activity-1-border"),
                                backgroundColor: "rgba(112, 146, 190, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            },
                            {
                                label: "Pumpenaktivität #2",
                                stack: "pump-2",
                                borderColor: getCSSVar("--chart-activity-2-border"),
                                backgroundColor: "rgba(142, 192, 109, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            }
                        ]
                    }
                });
                charts["current"]["humidity"] = new Chart($("#humidity-chart-current")[0].getContext("2d"), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: "rect"
                                }
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                boxPadding: 3
                            }
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10
                            }
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    },
                                    callback: function(val, index) {
                                        return index % 4 === 0 ? charts["current"]["humidity"]["data"]["labels"][index] : "";
                                    }
                                }
                            },
                            y: {
                                min: charts["scales"]["humidity"][0],
                                max: charts["scales"]["humidity"][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    }
                                }
                            }
                        }
                    },
                    type: "line",
                    data: {
                        datasets: [
                            {
                                label: "Aktueller Wert",
                                stack: "current",
                                borderColor: getCSSVar("--chart-current-border"),
                                backgroundColor: "rgba(0, 0, 0, 0.75)",
                                borderWidth: 1
                            },
                            {
                                label: "Mittelwert",
                                stack: "middle",
                                borderColor: getCSSVar("--chart-middle-border"),
                                backgroundColor: "rgba(0, 255, 0, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Sollwert",
                                stack: "setpoint",
                                borderColor: getCSSVar("--chart-setpoint-border"),
                                backgroundColor: "rgba(253, 126, 20, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Eingriffsgrenze",
                                stack: "upperControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Warngrenze",
                                stack: "upperWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Eingriffsgrenze",
                                stack: "lowerControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Warngrenze",
                                stack: "lowerWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Pumpenaktivität #1",
                                stack: "pump-1",
                                borderColor: getCSSVar("--chart-activity-1-border"),
                                backgroundColor: "rgba(112, 146, 190, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            },
                            {
                                label: "Pumpenaktivität #2",
                                stack: "pump-2",
                                borderColor: getCSSVar("--chart-activity-2-border"),
                                backgroundColor: "rgba(142, 192, 109, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            }
                        ]
                    }
                });
                charts["current"]["ph_value"] = new Chart($("#ph-chart-current")[0].getContext("2d"), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: "rect"
                                }
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                boxPadding: 3
                            }
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10
                            }
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    },
                                    callback: function(val, index) {
                                        return index % 4 === 0 ? charts["current"]["ph_value"]["data"]["labels"][index] : "";
                                    }
                                }
                            },
                            y: {
                                min: charts["scales"]["ph_value"][0],
                                max: charts["scales"]["ph_value"][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    }
                                }
                            }
                        }
                    },
                    type: "line",
                    data: {
                        datasets: [
                            {
                                label: "Aktueller Wert",
                                stack: "current",
                                borderColor: getCSSVar("--chart-current-border"),
                                backgroundColor: "rgba(0, 0, 0, 0.75)",
                                borderWidth: 1
                            },
                            {
                                label: "Mittelwert",
                                stack: "middle",
                                borderColor: getCSSVar("--chart-middle-border"),
                                backgroundColor: "rgba(0, 255, 0, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Sollwert",
                                stack: "setpoint",
                                borderColor: getCSSVar("--chart-setpoint-border"),
                                backgroundColor: "rgba(253, 126, 20, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Eingriffsgrenze",
                                stack: "upperControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Warngrenze",
                                stack: "upperWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Eingriffsgrenze",
                                stack: "lowerControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Warngrenze",
                                stack: "lowerWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Pumpenaktivität #1",
                                stack: "pump-1",
                                borderColor: getCSSVar("--chart-activity-1-border"),
                                backgroundColor: "rgba(112, 146, 190, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            },
                            {
                                label: "Pumpenaktivität #2",
                                stack: "pump-2",
                                borderColor: getCSSVar("--chart-activity-2-border"),
                                backgroundColor: "rgba(142, 192, 109, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            }
                        ]
                    }
                });
                charts["current"]["swimmer_2"] = new Chart($("#swimmer-2-chart-current")[0].getContext("2d"), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: "rect"
                                }
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                boxPadding: 3
                            }
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10
                            }
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    },
                                    callback: function(val, index) {
                                        return index % 4 === 0 ? charts["current"]["swimmer_2"]["data"]["labels"][index] : "";
                                    }
                                }
                            },
                            y: {
                                min: charts["scales"]["swimmer_2"][0],
                                max: charts["scales"]["swimmer_2"][1],
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    }
                                }
                            }
                        }
                    },
                    type: "line",
                    data: {
                        datasets: [
                            {
                                label: "Aktueller Wert",
                                stack: "current",
                                borderColor: getCSSVar("--chart-current-border"),
                                backgroundColor: "rgba(0, 0, 0, 0.75)",
                                borderWidth: 1
                            },
                            {
                                label: "Mittelwert",
                                stack: "middle",
                                borderColor: getCSSVar("--chart-middle-border"),
                                backgroundColor: "rgba(0, 255, 0, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Sollwert",
                                stack: "setpoint",
                                borderColor: getCSSVar("--chart-setpoint-border"),
                                backgroundColor: "rgba(253, 126, 20, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Eingriffsgrenze",
                                stack: "upperControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Warngrenze",
                                stack: "upperWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Eingriffsgrenze",
                                stack: "lowerControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Warngrenze",
                                stack: "lowerWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Pumpenaktivität #1",
                                stack: "pump-1",
                                borderColor: getCSSVar("--chart-activity-2-border"),
                                backgroundColor: "rgba(142, 192, 109, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            },
                            {
                                label: "Pumpenaktivität #2",
                                stack: "pump-2",
                                borderColor: getCSSVar("--chart-activity-1-border"),
                                backgroundColor: "rgba(112, 146, 190, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            }
                        ]
                    }
                });
                charts["current"]["swimmer_3"] = new Chart($("#swimmer-3-chart-current")[0].getContext("2d"), {
                    options: {
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: "rect"
                                }
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                boxPadding: 3
                            }
                        },
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 10
                            }
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    },
                                    callback: function(val, index) {
                                        return index % 4 === 0 ? charts["current"]["swimmer_3"]["data"]["labels"][index] : "";
                                    }
                                }
                            },
                            y: {
                                min: charts["scales"]["swimmer_3"][0],
                                max: charts["scales"]["swimmer_3"][1]
                            }
                        }
                    },
                    type: "line",
                    data: {
                        datasets: [
                            {
                                label: "Aktueller Wert",
                                stack: "current",
                                borderColor: getCSSVar("--chart-current-border"),
                                backgroundColor: "rgba(0, 0, 0, 0.75)",
                                borderWidth: 1
                            },
                            {
                                label: "Mittelwert",
                                stack: "middle",
                                borderColor: getCSSVar("--chart-middle-border"),
                                backgroundColor: "rgba(0, 255, 0, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Sollwert",
                                stack: "setpoint",
                                borderColor: getCSSVar("--chart-setpoint-border"),
                                backgroundColor: "rgba(253, 126, 20, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Eingriffsgrenze",
                                stack: "upperControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Obere Warngrenze",
                                stack: "upperWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Eingriffsgrenze",
                                stack: "lowerControlLimit",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                borderDash: [10, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Untere Warngrenze",
                                stack: "lowerWarningLimit",
                                borderColor: getCSSVar("--chart-warning-limit-border"),
                                backgroundColor: "rgba(255, 127, 39, 0.75)",
                                borderWidth: 1,
                                borderDash: [5, 5],
                                pointStyle: "line"
                            },
                            {
                                label: "Pumpenaktivität #1",
                                stack: "pump-1",
                                borderColor: getCSSVar("--chart-activity-1-border"),
                                backgroundColor: "rgba(112, 146, 190, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            },
                            {
                                label: "Pumpenaktivität #2",
                                stack: "pump-2",
                                borderColor: getCSSVar("--chart-activity-2-border"),
                                backgroundColor: "rgba(142, 192, 109, 0.75)",
                                borderWidth: 1,
                                pointStyle: "line",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(112, 146, 190, 0.5)", 1: "rgba(255, 255, 255, 0.5)"});
                                    }
                                }
                            }
                        ]
                    }
                });
                charts["history"] = new Chart($("#history-chart")[0].getContext("2d"), {
                    type: "line",
                    options: {
                        plugins: {
                            legend: {
                                labels: {
                                    usePointStyle: true,
                                    pointStyle: "rect",
                                    font: {
                                        size: 14,
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    }
                                }
                            },
                            tooltip: {
                                titleFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                bodyFont: {
                                    family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                },
                                boxPadding: 3
                            }
                        },
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    },
                                    callback: function(val, index) {
                                        return index % 4 === 0 ? charts["history"]["data"]["labels"][index] : "";
                                    }
                                }
                            },
                            y: {
                                min: 0,
                                max: 100,
                                ticks: {
                                    font: {
                                        family: "'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji','Segoe UI Symbol', 'Noto Color Emoji'"
                                    }
                                }
                            }
                        }
                    },
                    data: {
                        datasets: [
                            {
                                label: "Messwert",
                                stack: "measured",
                                borderColor: "rgb(219, 112, 147)",
                                backgroundColor: "rgba(219, 112, 147, 0.75)",
                                borderWidth: 1,
                                pointStyle: "circle",
                                fill: {
                                    target: "start",
                                    above: function(context) {
                                        let chart = context.chart;
                                        if (!chart) {
                                            return;
                                        }
                                        return getGradient(chart.ctx, chart.chartArea, {0: "rgba(219, 112, 147, 0.5)", 1: "rgba(219, 112, 147, 0.5)"});
                                    }
                                }
                            },
                            {
                                label: "Mittelwert",
                                stack: "middle",
                                borderColor: "rgb(0, 255, 0)",
                                backgroundColor: "rgba(0, 255, 0, 0.75)",
                                borderWidth: 2,
                                pointStyle: "line"
                            },
                            {
                                label: "Höchstwert",
                                stack: "highest",
                                borderColor: getCSSVar("--chart-control-limit-border"),
                                backgroundColor: "rgba(220, 53, 69, 0.75)",
                                borderWidth: 2,
                                pointStyle: "circle"
                            },
                            {
                                label: "Tiefstwert",
                                stack: "lowest",
                                borderColor: "rgb(72, 61, 139)",
                                backgroundColor: "rgba(72, 61, 139, 0.75)",
                                borderWidth: 2,
                                pointStyle: "circle"
                            }
                        ]
                    }
                });
                $("[data-bs-toggle='collapse']").click(function() {
                    $(this).children("i:last-of-type").css("transform", ($(this).attr("aria-expanded") === "true" ? "rotate(180deg)" : "rotate(0deg)"));
                });
                /*
                $("#historyTimespan").change(function() {
                    $(this).attr("disabled", "disabled").after("<span class='spinner-border ms-2 text-primary kreiselchen' style='flex: 0 0 auto' data-processing='true'></span>");
                    let data = {
                        authentification: getCookie("authToken"),
                        chart: $(this).attr("data-chart"),
                        lol: $(this).val()
                    };
                    $.post({
                        url: "history_charts_data.php",
                        data: JSON.stringify(data),
                        processData: false,
                        contentType: "application/json",
                        crossDomain: true,
                        timeout: 10000
                    }).done(function(response) {
                        let data = JSON.parse(response);
                        charts["history"]["data"]["labels"] = data["labels"];
                        let charts_ = Object.keys(data["data"]);
                        for (chart of charts_) {
                            let index = charts["history"]["data"]["datasets"].findIndex(key => key.stack === chart);
                            if (index >= 0 && data["data"][chart] !== null) {
                                Object.assign(charts["history"]["data"]["datasets"][index]["data"], data["data"][chart]);
                                charts["history"]["options"]["scales"]["x"]["min"] = data["labels"][0];
                                charts["history"]["options"]["scales"]["x"]["max"] = data["labels"][data["labels"].length -1];
                            }
                        }
                        charts["history"].update("none");
                    }).always(function() {
                        // Fehler: Entfernt ALLE Kreiselchen!
                        $("[data-processing='true']").remove();
                        $("#historyTimespan").removeAttr("disabled");
                    });
                });
                */
                $("#historyGalleryTimespanSelect").change(function() {
                    let that = this;
                    $("#historyGallery").find(".alert").remove();
                    $(this).attr("disabled", "disabled").after("<span class='spinner-border ms-2 text-primary kreiselchen' style='flex: 0 0 auto' data-processing='true'></span>");
                    let data = {
                        authentification: getCookie("authToken"),
                        history: $(this).val()
                    };
                    $.post({
                        url: "history_charts_data.php",
                        data: JSON.stringify(data),
                        processData: false,
                        contentType: "application/json",
                        crossDomain: true,
                        timeout: 10000
                    }).done(function(response) {
                    }).fail(function(response) {
                        $("#historyGallery").prepend(Alert.create("danger", response["status"] + ": " + response["statusText"]));
                    }).always(function() {
                        $(that).removeAttr("disabled");
                        $("#historyGallery").find("[data-processing='true']").remove();
                    });
                });
                // Neue Daten vom Server laden
                setInterval(function() {
                    if (!isLoadingCurrentChartData) {
                        isLoadingCurrentChartData = true;
                        $.post({
                            url: apiURL + "/sensor/data",
                            data: JSON.stringify({amount: 13}),
                            processData: false,
                            contentType: "application/json",
                            crossDomain: true,
                            timeout: 10000
                        }).done(function(response) {
                            let types = Object.getOwnPropertyNames(response["limits"]);
                            let labels = [];
                            let indexCurrent = -1;
                            for (let [iteration, sensor] of response["sensors"].entries()) {
                                let date = new Date(Math.trunc(sensor["timestamp"] / 1000));
                                if (labels.length <= 13) {
                                    labels.push(date.toLocaleTimeString());
                                }
                                for (type of types) {
                                    if (!["id", "timestamp"].includes(type) && charts["current"].hasOwnProperty(type)) {
                                        //console.log(charts["current"][type]["data"]["labels"].length);
                                        if (charts["current"][type]["data"]["labels"].length >= 13) {
                                            charts["current"][type]["data"]["labels"] = [];
                                        }
                                        charts["current"][type]["data"]["labels"].push(date.toLocaleTimeString());
                                        indexCurrent = charts["current"][type]["data"]["datasets"].findIndex(key => key["stack"] === "current");
                                        let indexMiddle = charts["current"][type]["data"]["datasets"].findIndex(key => key["stack"] === "middle");
                                        if (indexCurrent >= 0) {
                                            if (charts["current"][type]["data"]["datasets"][indexCurrent]["data"].length >= 13) {
                                                charts["current"][type]["data"]["datasets"][indexCurrent]["data"] = [];
                                            }
                                            charts["current"][type]["data"]["datasets"][indexCurrent]["data"].push({x: date.toLocaleTimeString(), y: sensor[type]});
                                            for (pump of response["pumpactivity"]) {
                                                if (pump["status"]) {
                                                    let indexPump = charts["current"][type]["data"]["datasets"].findIndex(key => key["stack"] === "pump-" + pump["id"].toString());
                                                    if (indexPump >= 0) {
                                                        if (charts["current"][type]["data"]["datasets"][indexPump]["data"].length >= 13) {
                                                            charts["current"][type]["data"]["datasets"][indexPump]["data"] = [];
                                                        }
                                                        charts["current"][type]["data"]["datasets"][indexPump]["data"].push({x: date.toLocaleTimeString(), y: sensor[type]});
                                                    }
                                                }
                                            }
                                        }
                                        if (indexMiddle >= 0) {
                                            if (charts["current"][type]["data"]["datasets"][indexMiddle]["data"].length >= 13) {
                                                charts["current"][type]["data"]["datasets"][indexMiddle]["data"] = [];
                                            }
                                            charts["current"][type]["data"]["datasets"][indexMiddle]["data"].push({x: date.toLocaleTimeString(), y: sensor[type]});
                                        }
                                        let limits = Object.getOwnPropertyNames(response["limits"][type]);
                                        for (limit of limits) {
                                            let indexLimit = charts["current"][type]["data"]["datasets"].findIndex(key => key["stack"] === limit);
                                            if (indexLimit >= 0) {
                                                if (charts["current"][type]["data"]["datasets"][indexLimit]["data"].length >= 13) {
                                                    charts["current"][type]["data"]["datasets"][indexLimit]["data"] = [];
                                                }
                                                charts["current"][type]["data"]["datasets"][indexLimit]["data"].push({x: date.toLocaleTimeString(), y: response["limits"][type][limit]});
                                            }
                                        }
                                        if (iteration === 12) {
                                            charts["current"][type]["options"]["scales"]["x"]["min"] = labels[0];
                                            charts["current"][type]["options"]["scales"]["x"]["max"] = labels[11];
                                            charts["current"][type].update("none"); // Sehr rechenintensiv bei zeitgleicher Aktualisierung aller Diagramme
                                            let lastCurrentValue = charts["current"][type]["data"]["datasets"][indexCurrent]["data"][11]["y"];
                                            if (lastCurrentValue > response["limits"][type]["upperWarningLimit"] && lastCurrentValue < response["limits"][type]["upperControlLimit"]) {
                                                switchAlert(type, "warning");
                                            }
                                            else if (lastCurrentValue > response["limits"][type]["upperControlLimit"]) {
                                                switchAlert(type, "danger");
                                            }
                                            else if (lastCurrentValue < response["limits"][type]["lowerWarningLimit"] && lastCurrentValue > response["limits"][type]["lowerControlLimit"]) {
                                                switchAlert(type, "warning");
                                            }
                                            else if (lastCurrentValue < response["limits"][type]["lowerControlLimit"]) {
                                                switchAlert(type, "danger");
                                            }
                                            else {
                                                switchAlert(type, "success");
                                            }
                                            $("#section-" + type + "> div:last-of-type > canvas").css("visibility", "visible");
                                            $("#section-" + type + "> div:last-of-type > .chart-overlay ").css("display", "none");
                                        }
                                    }
                                }
                            }
                        }).fail(function(response) {
                            $("#historyGallery").prepend(Alert.create("danger", response["status"] + ": " + response["statusText"]));
                        }).always(function() {
                            isLoadingCurrentChartData = false;
                        });
                    }
                }, 5000);
                /*setInterval(function() {
                    // "current" gilt für das Diagramm der letzten Minute, "history" ist für das Verlaufsdiagramm
                    if (!isLoadingCurrentChartData) {
                        isLoadingCurrentChartData = true;
                        $.post("current_charts_data.php", {
                            labels: JSON.stringify(charts["current"]["co2"]["data"]["labels"]),
                            actuators: JSON.stringify(actuators)
                        }).done(function(response) {
                            let data = JSON.parse(response);
                            let items = Object.keys(data);
                            // item = Sensor, z.B. co2
                            for (item of items) {
                                if (charts["current"].hasOwnProperty(item)) {
                                    // chart z.B. "current"
                                    Object.assign(charts["current"][item]["data"]["labels"], data[item]["labels"]);
                                    let charts_ = Object.keys(data[item]["data"]); // current, setpoint, mean
                                    for (chart of charts_) {
                                        let index = charts["current"][item]["data"]["datasets"].findIndex(key => key.stack === chart);
                                        if (index >= 0 && data[item]["data"][chart] !== null) {

                                            // Aktorenaktionen
                                            if (chart == "actuator" && data[item]["data"]["actuator"]["enabled"] == 1) {
                                                currentIndex = charts["current"][item]["data"]["datasets"].findIndex(key => key.stack === "current");
                                                if (charts["current"][item]["data"]["datasets"][index]["data"].length >= 13) {
                                                    charts["current"][item]["data"]["datasets"][index]["data"].shift();
                                                }
                                                let lastXPosition = charts["current"][item]["data"]["datasets"][currentIndex]["data"].length -1;
                                                let lastXValue = charts["current"][item]["data"]["datasets"][currentIndex]["data"][lastXPosition]["x"];
                                                if (lastXValue == data[item]["data"]["actuator"]["data"]["x"]) {
                                                    // Letztes Element löschen, damit nicht zwei gleiche X-Werte angezeigt werden
                                                    charts["current"][item]["data"]["datasets"][currentIndex]["data"].splice(lastXPosition, 1);
                                                }
                                                // Damit Objekte wirklich zugewiesen werden, statt als Referenz!
                                                Object.assign(actuators[item], data[item]["data"]["actuator"]);
                                                delete actuators[item]["data"];
                                                if (data[item]["data"]["actuator"]["count"] == 0) {
                                                    actuators[item]["enabled"] = 0;
                                                }
                                                charts["current"][item]["data"]["datasets"][index]["data"].push(data[item]["data"]["actuator"]["data"]);
                                                charts["current"][item]["data"]["datasets"][currentIndex]["data"].push(data[item]["data"]["actuator"]["data"]);
                                            }
                                            else {
                                                if (charts["current"][item]["data"]["datasets"][index]["data"].length >= 13) {
                                                    charts["current"][item]["data"]["datasets"][index]["data"].shift();
                                                }
                                                charts["current"][item]["data"]["datasets"][index]["data"].push(data[item]["data"][chart]);
                                                charts["current"][item]["options"]["scales"]["x"]["min"] = data[item]["labels"][0];
                                                charts["current"][item]["options"]["scales"]["x"]["max"] = data[item]["labels"][data[item]["labels"].length -1];
                                                // Wenn Wert kleiner gleich Warnwert
                                                if ((Number.parseInt(data[item]["data"]["current"]["y"]) <= Number.parseInt(data[item]["data"]["lowerWarningLimit"]["y"]) && Number.parseInt(data[item]["data"][chart]["y"]) > Number.parseInt(data[item]["data"]["lowerControlLimit"]["y"])) || (Number.parseInt(data[item]["data"]["current"]["y"]) >= Number.parseInt(data[item]["data"]["upperWarningLimit"]["y"]) && Number.parseInt(data[item]["data"][chart]["y"]) < Number.parseInt(data[item]["data"]["upperControlLimit"]["y"]))) {
                                                    switchAlert(item, "warning");
                                                }
                                                else if ((Number.parseInt(data[item]["data"]["current"]["y"]) >= Number.parseInt(data[item]["data"]["upperControlLimit"]["y"]) && Number.parseInt(data[item]["data"]["current"]["y"]) > Number.parseInt(data[item]["data"]["upperWarningLimit"]["y"])) || (Number.parseInt(data[item]["data"]["current"]["y"]) <= Number.parseInt(data[item]["data"]["lowerControlLimit"]["y"]) && Number.parseInt(data[item]["data"][chart]["y"]) < Number.parseInt(data[item]["data"]["lowerWarningLimit"]["y"]))) {
                                                    switchAlert(item, "danger");
                                                    console.log("joo");
                                                }
                                                else {
                                                    switchAlert(item, "success");
                                                }
                                            }
                                        }
                                    }
                                    charts["current"][item].update("none"); // Sehr rechenintensiv bei zeitgleicher Aktualisierung aller Diagramme
                                    $("#section-" + item + "> div:last-of-type > canvas").css("visibility", "visible");
                                    $("#section-" + item + "> div:last-of-type > .chart-overlay ").css("display", "none");
                                }
                            }
                        }).always(function() {
                            isLoadingCurrentChartData = false;
                        });
                    }
                }, 5000);*/
            });
        </script>
        <style>
            @font-face {
                font-family: "Font Awesome 5 Brands";
                font-style: normal;
                font-weight: 400;
                font-display: block;
                src: url("font/free-fa-brands-400.woff") format("woff")
            }
            @font-face {
                font-family: "Font Awesome 5 Free";
                font-style: normal;
                font-weight: 400;
                font-display: block;
                src: url("font/free-fa-regular-400.woff") format("woff")
            }
            @font-face {
                font-family: "Font Awesome 5 Pro";
                font-style: normal;
                font-weight: 400;
                font-display: block;
                src: url("font/free-fa-regular-400.woff") format("woff")
            }
            @font-face {
                font-family: "Font Awesome 5 Free";
                font-style: normal;
                font-weight: 900;
                font-display: block;
                src: url("font/free-fa-solid-900.woff") format("woff")
            }
            @font-face {
                font-family:"Font Awe0some 5 Pro";
                font-style: normal;
                font-weight: 900;
                font-display: block;
                src: url("fonts/free-fa-solid-900.woff") format("woff")
            }
            :root {
                --chart-setpoint-border: orange;
                --chart-current-border: black;
                --chart-middle-border: green;
                --chart-warning-limit-border: rgb(255, 115, 0);
                --chart-control-limit-border: rgb(220, 53, 69);
                --chart-activity-1-border: rgb(112, 146, 190);
                --chart-activity-2-border: rgb(91, 166, 136);
                --alert-color-warning: #cd853f;
                --alert-background-warning: #f7e8cd;
                --alert-color-danger: #dc143c;
                --alert-background-danger: #ffe4e1;
                --alert-color-success: #228b22;
                --alert-background-success: #c0edc0;
            }
            body {
                display: grid;
                grid-gap: 0;
                grid-template-rows: auto 1fr 71px;
                overflow-x: hidden;
                min-height: 100vh; 
                background-color: #f4f2e0;
                align-content: flex-start;
                background-image: url("img/moo.png");
                background-repeat: repeat;
                background-blend-mode: color;
            }
            #body-overlay {
                position: absolute;
                z-index: 9999;
                width: 100%;
                height: 100%;
                opacity: 1;
                background-color: #ffffff;
                transition: opacity 1s;
                display: flex;
                align-content: center;
                align-items: center;
                justify-content: center;
            }
            main {
                grid-column: 1 / 3;
                grid-row: 2 / 2;
                display: flex;
                align-items: flex-start;
                justify-content: center;
                padding: 0 5%;
            }
            main > div.row:first-of-type {
                flex: 0 1 100%
            }
            header {
                grid-column: 1 / 3;
                grid-row: 1 / 1;
                display: flex;
                flex-direction: column;
                align-self: flex-start;
                background-image: linear-gradient(90deg, #32887c, #458084, #32887c);
                border-top: 1px solid #76a5a8;
                border-bottom: 1px solid #76a5a8;
                height: 50px;
                color: #fff;
                justify-content: center;
            }
            #logo {
                background-image: url("img/logo.png");
                background-size: 114px 32px;
                background-repeat: no-repeat;
                width: 114px;
                height: 32px;
                filter: drop-shadow(0 1px black);
            }
            footer {
                height: 50px;
                color: white; 
                grid-column: 1 / 3;
                grid-row: 3 / 3;
                align-self: flex-end;
                background-image: linear-gradient(90deg, #32887c, #458084, #32887c);
                border-top: 1px solid #76a5a8;
                border-bottom: 1px solid #76a5a8;
                text-shadow: 0 1px 0 black;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            [data-bs-toggle="collapse"] > i {
                transition: transform 250ms;
            }
            #overviewPanel {
                display: grid;
                /* Höhe */
                grid-auto-rows: minmax(350px, auto);
                grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
                /* Breite */ 
                grid-gap: 10px;
                margin-top: 10px;
                align-content: flex-start;
                justify-content: space-between
            }
            #historyGalleryPanel {
                display: grid;
                /* Höhe */
                grid-auto-rows: minmax(250px, auto);
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                /* Breite */ 
                grid-gap: 10px;
                align-content: flex-start;
                justify-content: unset
            }
            .historyGalleryItem {
                border: 2px solid var(--bs-gray-300, #dee2e6);
                transition: border 200ms ease-in-out 0s;
                border-radius: 5px;
            }
            .historyGalleryItem:hover {
                cursor: pointer;
                border: 2px solid var(--bs-gray-500, #adb5bd);
            }
            /*
            .historyGalleryItem > div:first-of-type {
                background-color: black;
                flex: 0 1 100%;
                border-radius: 5px;
            }*/
            .historyGalleryItem > div:first-of-type > div:first-of-type {
                margin: 0 auto 0 auto;
                min-height: 100%;
                max-width: 200px;
                align-self: flex-start;
            }
            div.lol {
                border: 2px solid var(--bs-gray-300, #dee2e6)
            }
            div.lol div:first-of-type {
                flex: 0 0 28px
            }
            div.lol > div:first-of-type > span:first-of-type {
                font-weight: bold;
                font-size: 1rem;
                vertical-align: middle;
                color: var(--bs-gray-600, #6c757d)
            }
            canvas[id$="-chart-current"] {
                visibility: hidden
            }
            .chart-overlay > h2, #body-overlay > h1 {
                color: var(--bs-gray-500, #adb5bd);
                margin: 0
            }
            .chart-overlay {
                position: absolute;
                z-index: 2;
                width: 100%;
                height: 100%;
                align-items: center;
                align-content: center;
                justify-content: center;
                display: flex
            }
            div.lol.warning {
                background-color: var(--alert-background-warning);
                border: 2px dashed var(--alert-color-warning);
                animation: background-flashing-warning 3s linear 0s infinite
            }
            div.lol.danger {
                background-color: var(--alert-background-danger);
                border: 2px dashed var(--alert-color-danger);
                animation: background-flashing-danger 1s linear 0s infinite
            }
            .tab-content:not(.tab-content-simple) {
                background-color: #fbfbfb;
                border-bottom-left-radius: 5px;
                border-bottom-right-radius: 5px;
                border-top-right-radius: 5px;
                box-shadow: 0 1px 4px 0px var(--bs-gray-600, #6c757d);
            }
            .nav-tabs {
                border-bottom-width: 0 !important;
            }
            .nav-tabs > .nav-item > .nav-link:focus-visible, .nav-pills > .nav-item > .nav-link:focus-visible, .navbar-nav > .nav-item > .nav-link:focus-visible {
                outline-style: none;
            }
            .nav-tabs > .nav-item {
                position: relative;
                z-index: 2;
            }
            /* langer block unter erstem tab */
            .nav-tabs > .nav-item:first-of-type > .nav-link.active::after {
                content: "";
                position: absolute;
                width: 100%;
                height: 10px;
                left: -1px;
                bottom: -10px;
                z-index: 10;
                background-color: #fbfbfb;
                border-left: 1px solid var(--bs-gray-300, #dee2e6);
            }
            /* kleine blöcke VOR zwischen erstem und letztem tab */
            .nav-tabs > .nav-item:not(:first-of-type)::before {
                content: "";
                position: absolute;
                width: 10px;
                height: 10px;
                left: -5px;
                bottom: -11px;
                z-index: 11;
                background-color: #fbfbfb;
            }
            /* langer block unter nicht erstem tab */
            .nav-tabs > .nav-item:not(:first-of-type) > .nav-link.active::after {
                content: "";
                position: absolute;
                width: 100%;
                height: 10px;
                left: -1px;
                bottom: -10px;
                z-index: 10;
                background-color: #fbfbfb;
            }
            /* kleiner block HINTER letztem tab */
            .nav-tabs > .nav-item:last-of-type::after {
                content: "";
                position: absolute;
                width: 10px;
                height: 10px;
                right: -5px;
                bottom: -11px;
                z-index: 11;
                background-color: #fbfbfb;
            }
            .nav-tabs > .nav-item > .nav-link.active {
                box-shadow: 0 2px 5px 0px #00000057;
                background-color: #fbfbfb;
                border-bottom-color: #fbfbfb;
                position: relative;
            }
            .nav-tabs > .nav-item > .nav-link.disabled {
                border: 1px solid var(--bs-gray-200, #e9ecef) !important;
            }
            .nav-tabs > .nav-item > a.nav-link:not(.disabled, .active):hover, .nav-tabs > .nav-item > a.nav-link:not(.disabled, .active):active,
            .nav-tabs > .nav-item > a.nav-link:not(.disabled, .active):focus {
                border: 1px solid var(--bs-gray-300, #dee2e6) !important;
                border-bottom: 1px solid transparent !important
            }
            nav {
                flex: 1 0 100%;
            }
            #first-navbar > li:not(:last-of-type) {
                margin-right: 0.25rem;
            }
            #second-navbar > li:not(:first-of-type, :last-of-type) {
                margin-right: 0.25rem;
            }
            #navigation > ul > li > a:not(.disabled), #navigation > ul > li > a:not(.disabled):visited {
                color: white;
            }
            #navigation > ul > li > a, #navigation .navbar-text {
                text-shadow: 0 1px 0 black
            }
            #navigation > ul > li > a:not(.disabled):hover, #navigation > ul > li > a:not(.disabled):active, #navigation > ul > li > a.active {
                color: black !important;
                background-color: #f6ffff;
                box-shadow: 0 1px 1px 0px rgba(0, 0, 0, 0.5);
                text-shadow: 0 0 0 transparent
            }
            .card-header {
                padding: 0 !important;
            }
            hr {
                opacity: 1 !important;
            }
            table {
                border-spacing: 0;
                border-radius: 2px;
                border-collapse: separate !important;
                overflow: hidden;
            }
            table:not(.table-borderless) > thead > tr > th:first-of-type {
                border-top-left-radius: 2px;
            }
            table:not(.table-borderless) > thead > tr > th:last-of-type {
                border-top-right-radius: 2px;
            }
            table:not(.table-borderless) > thead > tr > th:not(.TintengefrorenerTiefenfrisch) {
                border-left: 1px solid var(--bs-gray-300, #dee2e6) !important;
            }
            table:not(.table-borderless) > thead > tr > th {
                border-top: 1px solid var(--bs-gray-300, #dee2e6) !important;
                border-bottom: 2px solid var(--bs-gray-300, #dee2e6) !important;
                background-color: #f7f7f7 !important
            }
            table:not(.table-borderless) > thead > tr > th:last-of-type {
                border-right: 1px solid var(--bs-gray-300, #dee2e6) !important;
            }
            table.dataTable:not(.table-borderless) > thead > tr > th:last-of-type {
                border-right: 1px solid var(--bs-gray-300, #dee2e6) !important
            }
            table.dataTable:not(.table-borderless) > tbody > tr > td:not(.fritz) {
                border-left: 1px solid var(--bs-gray-300, #dee2e6) !important
            }
            table.dataTable:not(.table-borderless) > tbody > tr:last-of-type > td {
                border-bottom: 1px solid var(--bs-gray-300, #dee2e6) !important
            }
            table.dataTable:not(.table-borderless) > tbody > tr:last-of-type > td:first-of-type {
                border-bottom-left-radius: 2px
            }
            table.dataTable:not(.table-borderless) > tbody > tr:last-of-type > td:last-of-type {
                border-bottom-right-radius: 2px
            }
            /* Normale Tabllen */
            table:not(.table-borderless, .dataTable) > tbody > tr > td:last-of-type {
                border-right: 1px solid var(--bs-gray-300, #dee2e6)
            }
            table:not(.table-borderless, .dataTable) > tbody > tr > td {
                border-bottom: 1px solid var(--bs-gray-300, #dee2e6);
                border-left: 1px solid var(--bs-gray-300, #dee2e6)
            }
            i.user-offline {
                color: var(--alert-color-danger);
                text-shadow: 0 0 3px var(--alert-color-danger);
            }
            i.user-online {
                color: var(--alert-color-success);
                text-shadow: 0 0 3px var(--alert-background-success);
            }
            #hydroPocLogo {
                width: 287px;
                height: 80px;
            }
            .contract {
                animation: contract 1s ease-in-out 0s 1;
            }
            .boing {
                animation: boing 1s ease-in-out 0s 1;
            }
            @keyframes contract {
                0% { width: 287px }
                100% { width: 50px }
            }
            @keyframes boing {
                0% { width: 50px }
                20% { width: 287px }
                40% { width: 277px }
                60% { width: 287px }
                80% { width: 282px }
                100% { width: 287px }
            }
            @keyframes flashing {
                0% { opacity: 0; }
                50% { opacity: 1; }
                100% { opacity: 0; }
            }
            @keyframes background-flashing-danger {
                0% { background-color: #ffffff }
                50%  { background-color: var(--alert-background-danger) }
                100% { background-color: #ffffff }
            }
            @keyframes background-flashing-warning {
                0% { background-color: #ffffff }
                50%  { background-color: var(--alert-background-warning) }
                100% { background-color: #ffffff }
            }
            i.project-admin {
                font-size: larger;
                color: goldenrod
            }
            i.site-admin {
                font-size: larger;
                color: silver
            }
            table.dataTable > thead .sorting::before, table.dataTable > thead .sorting_asc::before, 
            table.dataTable > thead .sorting_desc::before, table.dataTable > thead .sorting_asc_disabled::before, 
            table.dataTable > thead .sorting_desc_disabled::before,
            table.dataTable > thead .sorting::after, table.dataTable > thead .sorting_asc::after,
            table.dataTable > thead .sorting_desc::after, table.dataTable > thead .sorting_asc_disabled::after,
            table.dataTable > thead .sorting_desc_disabled::after {
                content: "" !important;
                right: auto !important
            }
            table.dataTable thead .sorting::after {
                position: absolute;
                width: 100%;
                height: 100%;
                right: 5px !important;
                top: 0 !important;
                opacity: 0.5 !important;
                background-repeat: no-repeat;
                background-position-x: right;
                background-position-y: center;
                background-size: 16px 16px;
                background-image: url("img/iconmonstr-sort-2.svg")
            }
            table.dataTable thead .sorting_desc::after {
                background-image: url("img/iconmonstr-sort-3.svg") !important
            }
            table.dataTable thead .sorting_asc::after {
                background-image: url("img/iconmonstr-sort-4.svg") !important
            }
            div.dataTables_scrollHeadInner {
                padding-right: 0 !important;
                width: 100% !important
            }
            table.dataTable > thead > tr > th {
                box-sizing: border-box;
            }
            table.dataTable:not(.table-borderless) > tbody > tr > td:only-of-type {
                border-right: 1px solid var(--bs-gray-300, #dee2e6);
            }
            div.dataTables_scrollBody {
                height: unset;
            }
            div.dataTables_wrapper > .row:last-of-type {
                margin-top: 24px
            }
            .table-responsive {
                max-height: 400px
            }
            /* Vorladen von Sortierungssymbolen in Tabellen */
            body::after {
                position: absolute;
                width: 0;
                height: 0;
                z-index: -1;
                overflow: hidden;
                content: url("img/iconmonstr-sort-2.svg") url("img/iconmonstr-sort-3.svg") url("img/iconmonstr-sort-4.svg")
            }
            .config-chart-button {
                right: 15px;
                position: absolute;
                z-index: 3;
            }
            .kreiselchen {
                width: 1.25rem;
                height: 1.25rem
            }
            .bg-gray-200 {
                background-color: var(--bs-gray-200, #e9ecef);
                font-weight: 600;
            }
            div.dataTables_wrapper > div.row:last-of-type {
                margin-top: 1rem !important;
            }
            a[data-bs-toggle="pill"]:hover {
                background-color: rgba(var(--bs-primary-rgb), 0.1);
            }
            #plantOptionContainer {
                overflow-y: scroll;
                max-height: 400px;
            }
            #plantOptionContainer h5 {
                font-weight: 600;
            }
            .accordion-flush > .accordion-item > .accordion-header > .accordion-button:focus, .accordion-flush .accordion-button:not(.collapsed) {
                box-shadow: unset;
                color: black
            }
            .accordion-flush > .accordion-item:last-of-type > .accordion-header > .accordion-button:not(.collapsed) {
                border-bottom: 1px solid var(--bs-gray-300, #dee2e6)
            }
            .accordion-flush > .accordion-item:first-of-type > .accordion-header > .accordion-button:not(.collapsed) {
                border-top: 1px solid var(--bs-gray-300, #dee2e6)
            }
            .accordion-flush > .accordion-item > .accordion-header > .accordion-button {
                background-color: var(--bs-gray-100, #f8f9fa);
                border-left: 1px solid var(--bs-gray-300, #dee2e6);
                border-right: 1px solid var(--bs-gray-300, #dee2e6)
            }
            .accordion-flush > .accordion-item:last-of-type > .accordion-header > .accordion-button.collapsed {
                overflow: hidden;
                border-bottom-left-radius: 5px;
                border-bottom-right-radius: 5px;
                border-bottom: 1px solid var(--bs-gray-300, #dee2e6)
            }
            .accordion-flush > .accordion-item:last-of-type > .accordion-header > .accordion-button {
                border-bottom-left-radius: 0;
                border-bottom-right-radius: 0;
            }
            .accordion-flush > .accordion-item:last-of-type .accordion-collapse.collapse.show > .accordion-body, .accordion-flush > .accordion-item:last-of-type .accordion-collapse.collapsing > .accordion-body {
                border-bottom-left-radius: 5px;
                border-bottom-right-radius: 5px;
                border-bottom: 1px solid var(--bs-gray-300, #dee2e6)
            }
            .accordion-flush > .accordion-item > .accordion-collapse > .accordion-body {
                border-left: 1px solid var(--bs-gray-300, #dee2e6);
                border-right: 1px solid var(--bs-gray-300, #dee2e6)
            }
            .accordion-flush > .accordion-item:first-of-type > .accordion-header > .accordion-button {
                overflow: hidden;
                border-top-left-radius: 5px;
                border-top-right-radius: 5px;
                border-top: 1px solid var(--bs-gray-300, #dee2e6)
            }
            .accordion-flush > .accordion-item:not(:first-of-type, :last-of-type) .accordion-collapse.collapse.show > .accordion-body, .accordion-flush > .accordion-item:not(:first-of-type, :last-of-type) .accordion-collapse.collapsing > .accordion-body {
                border-top: 1px solid var(--bs-gray-300, #dee2e6)
            }
            .accordion-flush > .accordion-item:first-of-type .accordion-collapse.collapse.show > .accordion-body, .accordion-flush > .accordion-item:first-of-type .accordion-collapse.collapsing > .accordion-body {
                border-top: 1px solid var(--bs-gray-300, #dee2e6)
            }
            #mobile-navbar > ul.dropdown-menu:first-of-type {
                box-shadow: 0 0 5px 1px #0000008a
            }
            ul.nav-pills .nav-link.disabled {
                background-color: var(--bs-gray-100, #f8f9fa) !important;
            }

            table.dataTable.dtr-inline.collapsed > tbody > tr > td.child, table.dataTable.dtr-inline.collapsed > tbody > tr > th.child, table.dataTable.dtr-inline.collapsed > tbody > tr > td.dataTables_empty {
                cursor: default !important
            }
            table.dataTable.dtr-inline.collapsed > tbody > tr > td.child:before, table.dataTable.dtr-inline.collapsed > tbody > tr > th.child:before, table.dataTable.dtr-inline.collapsed > tbody > tr > td.dataTables_empty:before{
                display: none !important
            }
            table.dataTable.dtr-inline.collapsed > tbody > tr > td.dtr-details, table.dataTable.dtr-inline.collapsed > tbody > tr > th.dtr-details {
                position: relative;
                cursor: pointer
            }
            table.dataTable.dtr-column > tbody > tr > td.dtr-details, table.dataTable.dtr-column > tbody > tr > th.dtr-details, table.dataTable.dtr-column > tbody > tr > td.control,
            table.dataTable.dtr-column > tbody > tr > th.control{
                position: relative;
                cursor: pointer
            }
            table.dataTable:not(.table-borderless) > tbody > tr > td:only-of-type, table.dataTable:not(.table-borderless) > tbody > tr > td:last-of-type {
                border-right: 1px solid var(--bs-gray-300, #dee2e6)
            }
            .alert-primary.alertBoxContainer {
                border-color: #b1cbf5
            }
            .alert-warning.alertBoxContainer {
                border-color: #ebde9f
            }
            .alert-danger.alertBoxContainer {
                border-color: #e5babe
            }
            .alert-success.alertBoxContainer {
                border-color: #b9dac1
            }
            .alertBoxIcon {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 0.714rem 0.357rem;
                align-self: stretch;
            }
            .alertBoxIcon.primary {
                background-color: #b1cbf5;
                color: #437b95
            }
            .alertBoxIcon.danger {
                background-color: #e5babe;
                color: #911
            }
            .alertBoxIcon.success {
                background-color: #b9dac1;
                color: #508d50
            }
            .alertBoxIcon.warning {
                background-color: #ebde9f;
                color: #918130
            }
            .alertBoxIcon > i {
                font-size: 1.5625rem
            }
            .alertBoxText {
                padding: 0.5rem;
                margin: 0.5rem;
                width: 100%;
            }
            .alertBoxContainer {
                display: flex;
                align-items: center;
                padding: 0;
                position: relative
            }
            .alertBoxText button.close {
                margin: 0 0 auto auto;
            }
            .alertBoxText ul {
                list-style-position: inside;
                margin: 0;
                padding: 0;
            }
            #section-legend {
                gap: 8px;
            }
            .legendContainer div.legendIcon {
                position: relative;
                top: 2px;
                width: 16px;
                height: 16px
            }
            .legendContainer {
                border: 2px solid var(--bs-gray-300, #dee2e6);
            }
            .knorke {
                margin-left: 0.25rem;
            }
            @media only screen and (max-width: 600px) {
                .alert > i {
                    vertical-align: baseline !important;
                }
                main {
                    padding: 0 2%
                }
                #overviewPanel {
                    grid-auto-rows: minmax(300px, auto);
                    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr))
                }
                #historyGalleryPanel {
                    grid-auto-rows: minmax(300px, auto);
                    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                }
                .historyGalleryItem > div:first-of-type > div:first-of-type {
                    max-width: 300px;
                }
                table.dataTable thead > tr > th {
                    font-weight: 600;
                }
                #first-navbar, #second-navbar {
                    display: none;
                }
                #mobile-navbar {
                    display: block;
                    margin: auto 20px auto auto;
                }
                #plantOptionMenu {
                    flex-direction: column;
                }
                #plantOptionNavigation {
                    width: 100%
                }
                #plantOptionsFormContainer label {
                    padding-left: 0;
                }
                #plantOptionsFormContainer input[type="text"] {
                    width: 100%;
                }
                /*
                #plantOptionContainer *:not(input, label) {
                    padding-left: 0;
                    margin-left: 0;
                }*/
                #plantOptionContainer {
                    width: 100%;
                    margin-top: 1rem;
                    border: 1px solid var(--bs-gray-300, #dee2e6);
                    border-radius: 4px;
                }/*
                .formContainer, .legendContainer {
                    flex-direction: column;
                }*/
                .formContainer {
                    flex-direction: column;
                }
                .formContainer > label + select:not(:last-child), .formContainer > label + input:not(:last-child), .formContainer > button:not(:last-child) {
                    margin-bottom: 0.5rem;
                }
                table.dataTable:not(.table-borderless) > tbody > tr:first-of-type > td:first-of-type {
                    border-top-left-radius: 1px;
                    border-top-right-radius: 1px;
                    overflow: hidden;
                }
                .accordion-flush > .accordion-item > .accordion-collapse > .accordion-body > div.row > div.col-md-8:not(:first-of-type, :last-of-type) {
                    margin-top: 0.5rem;
                }
                .accordion-flush > .accordion-item > .accordion-collapse > .accordion-body > div.row > div.col-md-4 {
                    margin: auto auto 0 auto
                }
                *:not(h1, h2, h3, h4, h5, h6, .alertBoxIcon > i, h1 > span, h2 > span, h3 > span, h4 > span, h5 > span, h6 > span, h1 > i, h2 > i, h3 > i, h4 > i, h5 > i, h6 > i) {
                    font-size: 14px !important;
                }
                .dataTables_filter {
                    margin-top: 0.5rem;
                }
                .table-container {
                    width: 0;
                    flex: 1 0 auto;
                    overflow-y: auto
                }
                .legendContainer {
                    margin-top: 0;
                }
            }
            /* Small devices (portrait tablets and large phones, 600px and up) */
            @media only screen and (min-width: 600px) {
                .alert > i {
                    vertical-align: baseline !important;
                }
                main {
                    padding: 0 2%
                }
                #overviewPanel {
                    grid-auto-rows: minmax(300px, auto);
                    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr))
                }
                #historyGalleryPanel {
                    grid-auto-rows: minmax(300px, auto);
                    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                }
                .historyGalleryItem > div:first-of-type > div:first-of-type {
                    max-width: 300px;
                }
                table.dataTable thead > tr > th {
                    font-weight: 600;
                }
                #first-navbar, #second-navbar {
                    display: none;
                }
                #mobile-navbar {
                    display: block;
                    margin: auto 20px auto auto;
                }
                #plantOptionMenu {
                    flex-direction: column;
                }
                #plantOptionsFormContainer input[type="text"] {
                    width: 100%;
                }
                #plantOptionNavigation {
                    width: 100%
                }
                #plantOptionContainer {
                    width: 100%;
                    margin-top: 1rem;
                    border: 1px solid var(--bs-gray-300, #dee2e6);
                    border-radius: 4px;
                }
                .formContainer {
                    flex-direction: column;
                }
                .formContainer > label + select:not(:last-child), .formContainer > label + input:not(:last-child), .formContainer > button:not(:last-child) {
                    margin-bottom: 0.5rem;
                }
                table.dataTable:not(.table-borderless) > tbody > tr:first-of-type > td:first-of-type {
                    border-top-left-radius: 1px;
                    border-top-right-radius: 1px;
                    overflow: hidden;
                }
                .accordion-flush > .accordion-item > .accordion-collapse > .accordion-body > div.row > div.col-md-8:not(:first-of-type, :last-of-type) {
                    margin-top: 0.5rem;
                }
                .accordion-flush > .accordion-item > .accordion-collapse > .accordion-body > div.row > div.col-md-4 {
                    margin: auto auto 0 auto
                }
                *:not(h1, h2, h3, h4, h5, h6, .alertBoxIcon > i, h1 > span, h2 > span, h3 > span, h4 > span, h5 > span, h6 > span, h1 > i, h2 > i, h3 > i, h4 > i, h5 > i, h6 > i) {
                    font-size: 14px !important;
                }
                .dataTables_filter {
                    margin-top: 0.5rem;
                }
                .table-container {
                    width: 0;
                    flex: 1 0 auto;
                    overflow-y: auto
                }
                .legendContainer {
                    margin-top: 0;
                }
            }
            /* Medium devices (landscape tablets, 768px and up) */
            @media only screen and (min-width: 768px) {
                #first-navbar, #second-navbar {
                    display: flex;
                }
                #plantOptionMenu {
                    flex-direction: column;
                }
                #plantOptionsFormContainer .form-check-label {
                    padding-left: 0;
                }
                #mobile-navbar {
                    display: none;
                }
                *:not(h1, h2, h3, h4, h5, h6, .alertBoxIcon > i, h1 > span, h2 > span, h3 > span, h4 > span, h5 > span, h6 > span, h1 > i, h2 > i, h3 > i, h4 > i, h5 > i, h6 > i) {
                    font-size: 14px !important;
                }
                .formContainer > label + select:not(:last-child), .formContainer > button:not(:last-child) {
                    margin-bottom: 0.5rem;
                }
                .legendContainer {
                    margin-top: 0;
                }
                .legendContainer .legendItem {
                    width: auto;
                }
                #plantOptionsFormContainer input[type="text"] {
                    width: auto;
                }
            }
            /* Large devices (laptops/desktops, 992px and up) */
            @media only screen and (min-width: 992px) {
                #first-navbar, #second-navbar {
                    display: flex;
                }
                #plantOptionMenu {
                    flex-direction: row;
                }
                #plantOptionNavigation {
                    width: auto
                }
                #plantOptionContainer {
                    width: auto;
                    margin-top: 0;
                    margin-left: 0.5rem;
                    flex: 1 0;
                }
                .legendContainer .legendItem {
                    width: auto;
                }
                .formContainer {
                    flex-direction: row;
                    align-content: center;
                    align-items: center;
                }
                .formContainer > * {
                    margin-top: 0;
                    margin-bottom: 0 !important;
                }
                .formContainer label:not(:first-of-type) {
                    margin-left: 1rem;
                }
                .formContainer button:not(:only-child) {
                    margin-left: 0.5rem;
                }
                .legendContainer {
                    margin-top: 0;
                }
                #mobile-navbar {
                    display: none;
                }
                *:not(h1, h2, h3, h4, h5, h6, .alertBoxIcon > i, h1 > span, h2 > span, h3 > span, h4 > span, h5 > span, h6 > span, h1 > i, h2 > i, h3 > i, h4 > i, h5 > i, h6 > i) {
                    font-size: 16px !important;
                }
                .legendContainer > label {
                    margin-top: 0;
                }
                #plantOptionsFormContainer input[type="text"] {
                    width: auto;
                }
            }
            /* Extra large devices (large laptops and desktops, 1200px and up) */
            @media only screen and (min-width: 1200px) {
                #first-navbar, #second-navbar {
                    display: flex;
                }
                #plantOptionMenu {
                    flex-direction: row;
                }
                #mobile-navbar {
                    display: none;
                }
                *:not(h1, h2, h3, h4, h5, h6, .alertBoxIcon > i, h1 > span, h2 > span, h3 > span, h4 > span, h5 > span, h6 > span, h1 > i, h2 > i, h3 > i, h4 > i, h5 > i, h6 > i) {
                    font-size: 16px !important;
                }
                .formContainer > * {
                    margin-top: 0;
                    margin-bottom: 0;
                }
                .formContainer label:not(:first-of-type) {
                    margin-left: 1rem;
                }
                .formContainer button:not(:only-child) {
                    margin-left: 0.5rem;
                }
                .legendContainer .legendItem {
                    width: auto;
                }
                #plantOptionsFormContainer input[type="text"] {
                    width: auto;
                }
            }
            @media only screen and (min-width: 1285px) {
                #plantOptionsFormContainer input[type="text"] {
                    display: inline-block;
                }
            }
        </style>
    </head>
    <body class="m-0 p-0 overflow-hidden">
        <div id="body-overlay">
            <div class="spinner-border mr-2" style="border-width: 5px; color: var(--bs-gray-500)"></div>
        </div>
        <header>
            <nav class="navbar navbar-expand-sm p-0" id="navigation">
                <a class="navbar-brand ms-3 mb-0" href="#">
                    <div id="logo"></div>
                </a>
                <ul class="navbar-nav" id="first-navbar">
                    <li class="nav-item">
                        <a class="nav-link rounded-3" href="#systemInfos"><i class="fas fa-hdd"></i> Systeminformationen</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link rounded-3" href="#staff"><i class="fas fa-users"></i> Mitwirkende</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link rounded-3" href="#about"><i class="fas fa-info-circle"></i> Über</a>
                    </li>
                </ul>
                <ul class="navbar-nav mt-auto me-2 mb-auto ms-auto" id="second-navbar">
                    <span class="navbar-text me-2" data-current-user="current-user"></span>
                    <li class="nav-item">
                        <a class="nav-link rounded-3" href="#login"><i class="fas fa-sign-in-alt"></i> Anmelden</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link rounded-3 d-none" href="#logout"><i class="fas fa-sign-out-alt"></i> Abmelden</a>
                    </li>
                </ul>
                <div class="dropdown" id="mobile-navbar">
                    <button type="button" class="btn btn-outline-light dropdown-toggle" data-bs-toggle="dropdown" style="box-shadow: 0 0 1px 0 black">
                        <i class="fas fa-bars"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" id="mobile-navbar-dropdown">
                        <li><a class="dropdown-item" href="#systemInfos"><i class="fas fa-hdd"></i> Systeminformationen</a></li>
                        <li><a class="dropdown-item" href="#staff"><i class="fas fa-users"></i> Mitwirkende</a></li>
                        <li><a class="dropdown-item" href="#about"><i class="fas fa-info-circle"></i> Über</a></li>
                        <li><div class="dropdown-divider"></div></li>
                        <li><span class="dropdown-item-text d-none text-secondary" data-current-user="current-user"></span></li>
                        <li><a class="dropdown-item" href="#login"><i class="fas fa-sign-in-alt"></i> Anmelden</a></li>
                        <li><a class="dropdown-item d-none" href="#logout"><i class="fas fa-sign-out-alt"></i> Abmelden</a></li>
                    </ul>
                </div> 
            </nav>
        </header>
        <main>
            <div class="row justify-content-center">
                <div class="mt-4 p-0" id="panel">
                    <ul class="nav nav-tabs" id="mainTabNav">
                        <li class="nav-item">
                            <a class="nav-link active" data-bs-toggle="tab" href="#overview">Übersicht</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#historyGallery">Bildergalerie</a>
                        </li>
                        <li class="nav-item d-none">
                            <a class="nav-link" data-bs-toggle="tab" href="#administration">Administration</a>
                        </li>
                    </ul>
                    <div class="tab-content p-3 border">
                        <div class="tab-pane active" id="overview">
                            <!--
                            <div class="d-flex formContainer">
                                <label for="plantSelection" class="col-form-label me-2">Pflanze:</label>
                                <select class="form-select w-auto d-inline-block" id="plantSelection"></select>
                                <label for="plantProgramSelection" class="col-form-label me-2">Programm:</label>
                                <select class="form-select w-auto d-inline-block" id="plantProgramSelection me-2"></select>
                                <button type="button" class="btn btn-success align-baseline"><i class="fas fa-play"></i></button>
                                <button type="button" class="btn btn-warning ms-2"><i class="fas fa-pause"></i></button>
                            </div>
                        -->
                            <div class="d-flex legendContainer rounded-3 p-2">
                                <label class="me-2">Legende:</label>
                                <div id="section-legend" class="flex-wrap d-flex">
                                    <div class="legendItem"><div style="background-color: black;" class="d-inline-block legendIcon"></div><span class="ms-1">Messwert</span></div>
                                    <div class="legendItem"><div style="background-color: var(--chart-setpoint-border)" class="d-inline-block legendIcon"></div><span class="ms-1">Sollwert</span></div>
                                    <div class="legendItem"><div style="background-color: var(--chart-middle-border)" class="d-inline-block legendIcon"></div><span class="ms-1">Mittelwert</span></div>
                                    <div class="legendItem"><div style="background-color: var(--chart-activity-1-border)" class="d-inline-block legendIcon"></div><span class="ms-1">Pumpenaktivität 1</span></div>
                                    <div class="legendItem"><div style="background-color: var(--chart-activity-2-border)" class="d-inline-block legendIcon"></div><span class="ms-1">Pumpenaktivität 2</span></div>
                                    <div class="legendItem"><div style="border: 2px dashed rgb(220, 53, 69);" class="d-inline-block legendIcon"></div><span class="ms-1">Eingriffsgrenze</span></div>
                                    <div class="legendItem"><div style="border: 1px dashed rgb(255, 115, 0);" class="d-inline-block legendIcon"></div><span class="ms-1">Warngrenze</span></div>
                                </div>
                            </div>
                            <div id="overviewPanel">
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-co2_level">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Co²-Gehalt (ppm)</span>
                                        <button class="btn btn-xs btn-secondary config-chart-button" data-chart="co2_level" data-chart-title="Co²-Gehalt"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="co2-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-temperature_water">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Wassertemperatur (°C)</span>
                                        <button class="btn btn-xs btn-secondary config-chart-button" data-chart="temperature_water" data-chart-title="Wassertemperatur"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="temperature-water-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-temperature_air">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Lufttemperatur (°C)</span>
                                        <button class="btn btn-xs btn-secondary config-chart-button" data-chart="temperature_air" data-chart-title="Lufttemperatur"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="temperature-air-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-humidity">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Luftfeuchtigkeit (%)</span>
                                        <button class="btn btn-xs btn-secondary config-chart-button" data-chart="humidity" data-chart-title="Luftfeuchtigkeit"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="humidity-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-ph_value">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>pH-Wert</span>
                                        <button class="btn btn-xs btn-secondary config-chart-button" data-chart="ph_value" data-chart-title="pH-Wert"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="ph-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-ec_value">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Elektrischer Leitwert (G)</span>
                                        <button class="btn btn-xs btn-secondary config-chart-button" data-chart="ec_value" data-chart-title="Elektrischer Leitwert"><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="ec-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-swimmer_1">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Wasserstand #1 (L)</span>
                                        <button class="btn btn-xs btn-secondary config-chart-button" data-chart="swimmer_1" data-chart-title="Wasserstand #1"></button><i class="fas fa-history"></i></button>
                                    </div>
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="swimmer-1-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-swimmer_2">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Wasserstand #2 (L)</span>
                                        <button class="btn btn-xs btn-secondary config-chart-button" data-chart="swimmer_2" data-chart-title="Wasserstand #2"><i class="fas fa-history"></i></button>
                                    </div>   
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="swimmer-2-chart-current"></canvas>
                                    </div>
                                </div>
                                <div class="rounded-3 lol d-flex align-items-center align-content-center flex-column" id="section-swimmer_3">
                                    <div class="position-relative w-100 text-center pt-2">
                                        <span>Wasserstand #3 (L)</span>
                                        <button class="btn btn-xs btn-secondary config-chart-button" data-chart="swimmer_3" data-chart-title="Wasserstand #3"><i class="fas fa-history"></i></button>
                                    </div>   
                                    <div class="position-relative w-100 h-100">
                                        <div class="chart-overlay">
                                            <h2><i class="fas fa-info-circle"></i> Noch keine Daten</h2>
                                        </div>
                                        <canvas id="swimmer-3-chart-current"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="administration">
                            <div id="plants-accordion" class="mb-3">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-plants-actions" data-table="plants">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-seedling"></i> Pflanzen</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-plants-actions" class="collapse hide" data-bs-parent="#plants-accordion">
                                        <div class="card-body">
                                            <ul class="nav nav-pills">
                                                <li class="nav-item">
                                                    <a class="nav-link active" data-bs-toggle="pill" href="#plantsAdminOverviewContainer">Übersicht</a>
                                                </li>
                                                <li class="nav-item">
                                                    <!--<a class="nav-link" data-bs-toggle="pill" href="#plantsAdminCategoriesContainer"></a>-->
                                                    <a class="nav-link" data-bs-toggle="pill" href="#plantsAdminOptionContainer">Optionen</a>
                                                </li>
                                            </ul>
                                            <div class="tab-content pt-3 tab-content-simple">
                                                <div class="tab-pane active" id="plantsAdminOverviewContainer">
                                                    <table class="table table-sm w-100 mt-3" id="plantsAdminTable">
                                                        <thead>
                                                            <tr>
                                                                <th>ID</th>
                                                                <th>Name</th>
                                                                <th>Eigenschaften</th>
                                                                <th>Optionen</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                </div>
                                                <div class="tab-pane" id="plantsAdminOptionContainer">
                                                    <!--
                                                    <form enctype="text/plain" id="plantsAdminTemplateForm" method="post" action="/" class="w-100 d-flex formContainer mb-3 justify-content-center">
                                                        <label for="plantsAdminPlantSelection" class="col-form-label me-2">Vorlage:</label>
                                                        <select class="form-select w-auto d-inline-block" id="plantsAdminPlantSelection" data-old="0"></select>
                                                        <button type="submit" class="btn btn-primary align-top" id="applyPlantTemplateButton" disabled="disabled"><i class="fas fa-sync"></i> Übernehmen</button>
                                                    </form>
                                                    -->
                                                    <div class="d-flex mt-3" id="plantOptionMenu">
                                                        <div id="plantOptionNavigation" class="list-group col-md-2 position-relative align-self-start">
                                                            <!--<a class="list-group-item list-group-item-action" href="#plantOptionGeneralSection">Allgemein</a>-->
                                                            <a class="list-group-item list-group-item-action" href="#plantOptionWaterTemperatureSection">Wassertemperatur</a>
                                                            <a class="list-group-item list-group-item-action" href="#plantOptionPhSection">pH-Wert</a>
                                                            <a class="list-group-item list-group-item-action" href="#plantOptionSalinitySection">Salzgehalt</a>
                                                        </div>
                                                        <div data-bs-spy="scroll" data-bs-target="#plantOptionNavigation" data-bs-offset="0" class="col-md-10 position-relative" id="plantOptionContainer">
                                                            <div id="plantOptionsFormContainer" class="p-3">
                                                                <form enctype="text/plain" method="post" action="/" id="plantOptionsForm" class="w-100">
                                                                    <input type="submit" class="d-none" id="savePlantOptionsSubmit">
                                                                    <!--<div class="row">
                                                                        <h5 id="plantOptionGeneralSection" class="col-md-12">Allgemein</h5>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionDescriptionInput" class="col-form-label col-md-6">Bezeichnung:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionDescriptionInput" aria-label="Bezeichnung" aria-describedby="plantOptionDescriptionInput">
                                                                        </div>
                                                                    </div>-->
                                                                    <h5 id="plantOptionWaterTemperatureSection" class="col-md-12">Wassertemperatur</h5>
                                                                    <div class="row">
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionWaterTemperatureSetpointInput" class="col-form-label col-md-6">Sollwert:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionWaterTemperatureSetpointInput" aria-label="Sollwert für Temperatur" aria-describedby="plantOptionWaterTemperatureSetpointInput">
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionWaterTemperatureUpperControlLimitInput" class="col-form-label col-md-6">Obere Eingriffsgrenze:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionWaterTemperatureUpperControlLimitInput" aria-label="Obere Eingriffsgrenze für Temperatur" aria-describedby="plantOptionWaterTemperatureUpperControlLimitInput">
                                                                        </div>
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionWaterTemperatureLowerControlLimitInput" class="col-form-label col-md-6">Untere Eingriffsgrenze:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionWaterTemperatureLowerControlLimitInput" aria-label="Untere Eingriffsgrenze für Temperatur" aria-describedby="plantOptionWaterTemperatureLowerControlLimitInput">
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionWaterTemperatureUpperWarningLimitInput" class="col-form-label col-md-6">Obere Warngrenze:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionWaterTemperatureUpperWarningLimitInput" aria-label="Obere Warngrenze für Temperatur" aria-describedby="plantOptionWaterTemperatureUpperWarningLimitInput">
                                                                        </div>
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionWaterTemperatureLowerWarningLimitInput" class="col-form-label col-md-6" >Untere Warngrenze:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionWaterTemperatureLowerWarningLimitInput" aria-label="Untere Warngrenze für Temperatur" aria-describedby="plantOptionWaterTemperatureLowerWarningLimitInput">
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <h5 id="plantOptionPhSection" class="mt-4 col-md-12">pH-Wert</h5>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionPhSetpointInput" class="col-form-label col-md-6">Sollwert:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionPhSetpointInput" aria-label="Sollwert für Temperatur" aria-describedby="plantOptionPhSetpointInput">
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionPhUpperControlLimitInput" class="col-form-label col-md-6">Obere Eingriffsgrenze:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionPhUpperControlLimitInput" aria-label="Obere Eingriffsgrenze für Temperatur" aria-describedby="plantOptionPhUpperControlLimitInput">
                                                                        </div>
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionPhLowerControlLimitInput" class="col-form-label col-md-6">Untere Eingriffsgrenze:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionPhLowerControlLimitInput" aria-label="Untere Eingriffsgrenze für Temperatur" aria-describedby="plantOptionPhLowerControlLimitInput">
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionPhUpperWarningLimitInput" class="col-form-label col-md-6">Obere Warngrenze:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionPhUpperWarningLimitInput" aria-label="Obere Warngrenze für Temperatur" aria-describedby="plantOptionPhUpperWarningLimitInput">
                                                                        </div>
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionPhLowerWarningLimitInput" class="col-form-label col-md-6" >Untere Warngrenze:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionPhLowerWarningLimitInput" aria-label="Untere Warngrenze für Temperatur" aria-describedby="plantOptionPhLowerWarningLimitInput">
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <h5 id="plantOptionSalinitySection" class="mt-4 col-md-12">Salzgehalt</h5>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionSalinitySetpointInput" class="col-form-label col-md-6">Sollwert:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionSalinitySetpointInput" aria-label="Sollwert für Salzgehalt" aria-describedby="plantOptionSalinitySetpointInput">
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionSalinityUpperControlLimitInput" class="col-form-label col-md-6">Obere Eingriffsgrenze:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionSalinityUpperControlLimitInput" aria-label="Obere Eingriffsgrenze für Salzgehalt" aria-describedby="plantOptionSalinityUpperControlLimitInput">
                                                                        </div>
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionSalinityLowerControlLimitInput" class="col-form-label col-md-6">Untere Eingriffsgrenze:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionSalinityLowerControlLimitInput" aria-label="Untere Eingriffsgrenze für Salzgehalt" aria-describedby="plantOptionSalinityLowerControlLimitInput">
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionSalinityUpperWarningLimitInput" class="col-form-label col-md-6">Obere Warngrenze:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionSalinityUpperWarningLimitInput" aria-label="Obere Warngrenze für Salzgehalt" aria-describedby="plantOptionSalinityUpperWarningLimitInput">
                                                                        </div>
                                                                        <div class="mt-2 col-md-6">
                                                                            <label for="plantOptionSalinityLowerWarningLimitInput" class="col-form-label col-md-6" >Untere Warngrenze:</label>
                                                                            <input required type="text" class="form-control col-md-6" id="plantOptionSalinityLowerWarningLimitInput" aria-label="Untere Warngrenze für Salzgehalt" aria-describedby="plantOptionSalinityLowerWarningLimitInput">
                                                                        </div>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="mt-4 d-flex align-content-center align-items-center justify-content-end" style="gap: 5px">
                                                        <button type="button" class="btn btn-success" id="savePlantOptions"><i class="fas fa-plus"></i> Speichern</button>
                                                        <!--<button type="reset" class="btn btn-danger" id="discardPlantButton"><i class="fas fa-trash-alt"></i> Löschen</button>-->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="plants-programs-accordion" class="mb-3">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-plants-programs-actions" data-table="plantPrograms">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-cubes"></i> Pflanzenprogramme</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-plants-programs-actions" class="collapse hide" data-bs-parent="#plants-programs-actions-accordion">
                                        <div class="card-body">
                                            <div class="d-flex formContainer mb-3">
                                                <label for="plantProgramsAdminPlantSelection" class="col-form-label me-2">Pflanze:</label>
                                                <select class="form-select w-auto d-inline-block" id="plantProgramsAdminPlantSelection" data-old="0">
                                                    <option value="0">Alle</option>
                                                </select>
                                            </div>
                                            <table class="table table-sm w-100 mt-3" id="plantProgramsAdminTable">
                                                <thead>
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>rowTitle</th>
                                                        <th>Name</th>
                                                        <th>Beschreibung</th>
                                                        <th>Optionen</th>
                                                    </tr>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="pump-actions-accordion" class="mb-3">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-pump-actions" data-table="pumps">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-fan"></i> Pumpensteuerung</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-pump-actions" class="collapse hide" data-bs-parent="#pump-actions-accordion">
                                        <div class="card-body">
                                            <table class="table table-sm w-100 mt-3" id="pumpsAdminTable">
                                            <thead>
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Leistung</th>
                                                    <th>?</th>
                                                    <th>?</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="user-actions-accordion" class="mb-3">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-user-actions" data-table="userAccounts">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-user-circle"></i> Benutzerkonten</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-user-actions" class="collapse hide" data-bs-parent="#actuator-user-accordion">
                                        <div class="card-body">
                                            <table class="table table-sm w-100 mt-3" id="userAccountsAdminTable">
                                                <thead>
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>Benutzername</th>
                                                        <th>Erstellt</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="logs-accordion">
                                <div class="card">
                                    <div class="card-header">
                                        <a class="btn d-flex align-items-center" data-bs-toggle="collapse" href="#collapse-logs-actions" data-table="logs">
                                            <h4 class="ms-0 mt-auto me-auto mb-auto"><i class="fas fa-scroll"></i> Logs</h4>
                                            <i class="fas fa-chevron-down ms-auto mt-auto me-2 mb-auto"></i>
                                        </a>
                                    </div>
                                    <div id="collapse-logs-actions" class="collapse hide" data-bs-parent="#logs-accordion">
                                        <div class="card-body">
                                            <!--<div class="d-flex formContainer mb-3">
                                                <label for="logsAdminCategorySelection" class="col-form-label me-2">Kategorie:</label>
                                                <select class="form-select w-auto d-inline-block" id="logsAdminCategorySelection" data-old="0">
                                                    <option value="0">Alles</option>
                                                    <option value="success">Erfolg</option>
                                                    <option value="error">Fehler</option>
                                                    <option value="info">Information</option>
                                                </select>
                                            </div>-->
                                            <table class="table table-sm w-100 mt-3" id="logsAdminTable">
                                                <thead>
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>Zeitpunkt</th>
                                                        <th>Typ</th>
                                                        <th>Nachricht</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="historyGallery">
                            <form enctype="text/plain" method="post" action="/" class="formContainer mb-3 w-100 d-flex" id="historyGalleryTimespanForm">
                                <label for="historyGalleryTimespanSelect" class="col-form-label me-2">Zeitraum:</label>
                                <input type="text" id="historyGalleryTimespanSelect" class="form-control w-auto d-inline-block">
                                <button type="submit" class="btn btn-primary align-baseline" id="getGalleryItemsButton">Anzeigen</button>
                            </form>
                            <div id="historyGalleryPanel" class="mt-3"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <footer></footer>
        <!-- Kann möglicherweise nicht mit Modal.create() erzeugt werden, ohne jedes Mal charts["history"] zu zerstören! -->
        <div class="modal fade" id="chartHistoryModal">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Verlauf von <span id="chartHistoryElementTitle"></span></h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <ul class="nav nav-pills">
                            <li class="nav-item">
                                <a class="nav-link active" data-bs-toggle="pill" href="#lol">Statistik</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="pill" href="#lolo">Aktionen</a>
                            </li>
                        </ul>
                        <div class="tab-content pt-3 tab-content-simple">
                            <div class="tab-pane active" id="lol">
                                <!--
                                <div class="d-inline-flex align-items-center mb-3">
                                    <label for="historyTimespan">Zeitraum:</label>
                                    <select id="historyTimespan" class="form-select ms-2">
                                        <option value="1">Letzte Stunde</option>
                                        <option value="3">Letzte 3 Stunden</option>
                                        <option value="6">Letzte 6 Stunden</option>
                                        <option value="12">Letzte 12 Stunden</option>
                                        <option value="24">Letzte 24 Stunden</option>
                                    </select>
                                </div>
                                -->
                                <div id="history" class="w-100" style="height:60vh">
                                    <canvas id="history-chart"></canvas>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="lolo">
                                <h2>Ja spinnt der Beppi!</h2>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Schließen</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="mainModal">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Dieser Titel gehört ersetzt!</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body"></div>
                    <div class="modal-footer"></div>
                </div>
            </div>
        </div>
    </body>
</html>